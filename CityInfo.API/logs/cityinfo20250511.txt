2025-05-11 19:31:55.083 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-11 19:31:55.190 +07:00 [DBG] Hosting starting
2025-05-11 19:31:55.214 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-11 19:31:55.225 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-227fa330-dced-4a64-a1c8-04d8b60f3e99.xml'.
2025-05-11 19:31:55.231 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2025-05-11 19:31:55.233 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2025-05-11 19:31:55.234 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-bea7c23c-cd46-482f-bde2-174e951603a6.xml'.
2025-05-11 19:31:55.238 +07:00 [DBG] Found key {227fa330-dced-4a64-a1c8-04d8b60f3e99}.
2025-05-11 19:31:55.242 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2025-05-11 19:31:55.244 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2025-05-11 19:31:55.244 +07:00 [DBG] Found key {bea7c23c-cd46-482f-bde2-174e951603a6}.
2025-05-11 19:31:55.251 +07:00 [DBG] Considering key {227fa330-dced-4a64-a1c8-04d8b60f3e99} with expiration date 2025-06-05 10:07:06Z as default key.
2025-05-11 19:31:55.255 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-11 19:31:55.258 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-11 19:31:55.260 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-11 19:31:55.264 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-11 19:31:55.266 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-11 19:31:55.269 +07:00 [DBG] Using key {227fa330-dced-4a64-a1c8-04d8b60f3e99} as the default key.
2025-05-11 19:31:55.270 +07:00 [DBG] Key ring with default key {227fa330-dced-4a64-a1c8-04d8b60f3e99} was loaded during application startup.
2025-05-11 19:31:55.390 +07:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert.
2025-05-11 19:31:55.477 +07:00 [DBG] Connection id "0HNCGGV8D0EBJ" accepted.
2025-05-11 19:31:55.479 +07:00 [DBG] Connection id "0HNCGGV8D0EBJ" started.
2025-05-11 19:31:55.485 +07:00 [INF] Now listening on: https://localhost:7169
2025-05-11 19:31:55.491 +07:00 [INF] Now listening on: http://localhost:5169
2025-05-11 19:31:55.492 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2025-05-11 19:31:55.493 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-05-11 19:31:55.494 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-05-11 19:31:55.495 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-05-11 19:31:55.520 +07:00 [DBG] Connection id "0HNCGGV8D0EBK" accepted.
2025-05-11 19:31:55.521 +07:00 [DBG] Connection id "0HNCGGV8D0EBK" started.
2025-05-11 19:31:55.522 +07:00 [DBG] Connection id "0HNCGGV8D0EBL" accepted.
2025-05-11 19:31:55.525 +07:00 [DBG] Connection id "0HNCGGV8D0EBL" started.
2025-05-11 19:31:55.552 +07:00 [DBG] Connection id "0HNCGGV8D0EBK" received FIN.
2025-05-11 19:31:55.552 +07:00 [DBG] Connection id "0HNCGGV8D0EBJ" received FIN.
2025-05-11 19:31:55.552 +07:00 [DBG] Connection id "0HNCGGV8D0EBL" received FIN.
2025-05-11 19:31:55.588 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:31:55.588 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:31:55.588 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:31:55.633 +07:00 [DBG] Connection id "0HNCGGV8D0EBL" stopped.
2025-05-11 19:31:55.633 +07:00 [DBG] Connection id "0HNCGGV8D0EBJ" stopped.
2025-05-11 19:31:55.633 +07:00 [DBG] Connection id "0HNCGGV8D0EBK" stopped.
2025-05-11 19:31:55.635 +07:00 [DBG] Connection id "0HNCGGV8D0EBJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:31:55.636 +07:00 [DBG] Connection id "0HNCGGV8D0EBK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:31:55.635 +07:00 [DBG] Connection id "0HNCGGV8D0EBL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:31:55.637 +07:00 [DBG] Connection id "0HNCGGV8D0EBM" accepted.
2025-05-11 19:31:55.640 +07:00 [DBG] Connection id "0HNCGGV8D0EBM" started.
2025-05-11 19:31:55.641 +07:00 [DBG] Connection id "0HNCGGV8D0EBN" accepted.
2025-05-11 19:31:55.642 +07:00 [DBG] Connection id "0HNCGGV8D0EBN" started.
2025-05-11 19:31:55.643 +07:00 [DBG] Connection id "0HNCGGV8D0EBO" accepted.
2025-05-11 19:31:55.644 +07:00 [DBG] Connection id "0HNCGGV8D0EBO" started.
2025-05-11 19:31:55.645 +07:00 [DBG] Connection id "0HNCGGV8D0EBM" received FIN.
2025-05-11 19:31:55.646 +07:00 [DBG] Connection id "0HNCGGV8D0EBN" received FIN.
2025-05-11 19:31:55.646 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:31:55.649 +07:00 [DBG] Connection id "0HNCGGV8D0EBO" received FIN.
2025-05-11 19:31:55.647 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:31:55.650 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:31:55.651 +07:00 [DBG] Connection id "0HNCGGV8D0EBM" stopped.
2025-05-11 19:31:55.653 +07:00 [DBG] Connection id "0HNCGGV8D0EBN" stopped.
2025-05-11 19:31:55.654 +07:00 [DBG] Connection id "0HNCGGV8D0EBO" stopped.
2025-05-11 19:31:55.655 +07:00 [DBG] Connection id "0HNCGGV8D0EBM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:31:55.656 +07:00 [DBG] Connection id "0HNCGGV8D0EBN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:31:55.656 +07:00 [DBG] Connection id "0HNCGGV8D0EBO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:31:55.661 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-11 19:31:55.662 +07:00 [INF] Hosting environment: Development
2025-05-11 19:31:55.663 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\api\CityInfo.API
2025-05-11 19:31:55.663 +07:00 [DBG] Hosting started
2025-05-11 19:32:08.536 +07:00 [DBG] Connection id "0HNCGGV8D0EBP" accepted.
2025-05-11 19:32:08.539 +07:00 [DBG] Connection id "0HNCGGV8D0EBP" started.
2025-05-11 19:32:08.540 +07:00 [DBG] Connection id "0HNCGGV8D0EBQ" accepted.
2025-05-11 19:32:08.541 +07:00 [DBG] Connection id "0HNCGGV8D0EBQ" started.
2025-05-11 19:32:08.541 +07:00 [DBG] Connection id "0HNCGGV8D0EBR" accepted.
2025-05-11 19:32:08.542 +07:00 [DBG] Connection id "0HNCGGV8D0EBR" started.
2025-05-11 19:32:08.544 +07:00 [DBG] Connection id "0HNCGGV8D0EBP" received FIN.
2025-05-11 19:32:08.545 +07:00 [DBG] Connection id "0HNCGGV8D0EBQ" received FIN.
2025-05-11 19:32:08.545 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:08.545 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:08.547 +07:00 [DBG] Connection id "0HNCGGV8D0EBR" received FIN.
2025-05-11 19:32:08.552 +07:00 [DBG] Connection id "0HNCGGV8D0EBP" stopped.
2025-05-11 19:32:08.548 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:08.550 +07:00 [DBG] Connection id "0HNCGGV8D0EBQ" stopped.
2025-05-11 19:32:08.549 +07:00 [DBG] Connection id "0HNCGGV8D0EBS" accepted.
2025-05-11 19:32:08.553 +07:00 [DBG] Connection id "0HNCGGV8D0EBP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:08.556 +07:00 [DBG] Connection id "0HNCGGV8D0EBS" started.
2025-05-11 19:32:08.555 +07:00 [DBG] Connection id "0HNCGGV8D0EBQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:08.555 +07:00 [DBG] Connection id "0HNCGGV8D0EBR" stopped.
2025-05-11 19:32:08.560 +07:00 [DBG] Connection id "0HNCGGV8D0EBR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:08.561 +07:00 [DBG] Connection id "0HNCGGV8D0EBS" received FIN.
2025-05-11 19:32:08.562 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:08.564 +07:00 [DBG] Connection id "0HNCGGV8D0EBS" stopped.
2025-05-11 19:32:08.565 +07:00 [DBG] Connection id "0HNCGGV8D0EBS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:21.221 +07:00 [DBG] Connection id "0HNCGGV8D0EBT" accepted.
2025-05-11 19:32:21.222 +07:00 [DBG] Connection id "0HNCGGV8D0EBT" started.
2025-05-11 19:32:21.223 +07:00 [DBG] Connection id "0HNCGGV8D0EBU" accepted.
2025-05-11 19:32:21.226 +07:00 [DBG] Connection id "0HNCGGV8D0EBU" started.
2025-05-11 19:32:21.227 +07:00 [DBG] Connection id "0HNCGGV8D0EBV" accepted.
2025-05-11 19:32:21.228 +07:00 [DBG] Connection id "0HNCGGV8D0EBT" received FIN.
2025-05-11 19:32:21.229 +07:00 [DBG] Connection id "0HNCGGV8D0EBV" started.
2025-05-11 19:32:21.230 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:21.232 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:21.235 +07:00 [DBG] Connection id "0HNCGGV8D0EC0" accepted.
2025-05-11 19:32:21.242 +07:00 [DBG] Connection id "0HNCGGV8D0EBU" stopped.
2025-05-11 19:32:21.242 +07:00 [DBG] Connection id "0HNCGGV8D0EC0" started.
2025-05-11 19:32:21.240 +07:00 [DBG] Connection id "0HNCGGV8D0EBT" stopped.
2025-05-11 19:32:21.239 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:21.248 +07:00 [DBG] Connection id "0HNCGGV8D0EBT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:21.250 +07:00 [DBG] Connection id "0HNCGGV8D0EC0" received FIN.
2025-05-11 19:32:21.243 +07:00 [DBG] Connection id "0HNCGGV8D0EBU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:21.236 +07:00 [DBG] Connection id "0HNCGGV8D0EBV" received FIN.
2025-05-11 19:32:21.231 +07:00 [DBG] Connection id "0HNCGGV8D0EBU" received FIN.
2025-05-11 19:32:21.256 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:21.259 +07:00 [DBG] Connection id "0HNCGGV8D0EBV" stopped.
2025-05-11 19:32:21.269 +07:00 [DBG] Connection id "0HNCGGV8D0EC0" stopped.
2025-05-11 19:32:21.271 +07:00 [DBG] Connection id "0HNCGGV8D0EBV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:21.273 +07:00 [DBG] Connection id "0HNCGGV8D0EC0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:21.939 +07:00 [DBG] Connection id "0HNCGGV8D0EC1" accepted.
2025-05-11 19:32:21.940 +07:00 [DBG] Connection id "0HNCGGV8D0EC1" started.
2025-05-11 19:32:21.948 +07:00 [DBG] Connection id "0HNCGGV8D0EC2" accepted.
2025-05-11 19:32:21.954 +07:00 [DBG] Connection id "0HNCGGV8D0EC2" started.
2025-05-11 19:32:21.955 +07:00 [DBG] Connection id "0HNCGGV8D0EC3" accepted.
2025-05-11 19:32:21.956 +07:00 [DBG] Connection id "0HNCGGV8D0EC1" received FIN.
2025-05-11 19:32:21.958 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:21.960 +07:00 [DBG] Connection id "0HNCGGV8D0EC2" received FIN.
2025-05-11 19:32:21.958 +07:00 [DBG] Connection id "0HNCGGV8D0EC3" started.
2025-05-11 19:32:21.962 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:21.965 +07:00 [DBG] Connection id "0HNCGGV8D0EC4" accepted.
2025-05-11 19:32:21.969 +07:00 [DBG] Connection id "0HNCGGV8D0EC2" stopped.
2025-05-11 19:32:21.969 +07:00 [DBG] Connection id "0HNCGGV8D0EC4" started.
2025-05-11 19:32:21.968 +07:00 [DBG] Connection id "0HNCGGV8D0EC3" received FIN.
2025-05-11 19:32:21.963 +07:00 [DBG] Connection id "0HNCGGV8D0EC1" stopped.
2025-05-11 19:32:21.970 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:21.973 +07:00 [DBG] Connection id "0HNCGGV8D0EC1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:21.974 +07:00 [DBG] Connection id "0HNCGGV8D0EC4" received FIN.
2025-05-11 19:32:21.971 +07:00 [DBG] Connection id "0HNCGGV8D0EC2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:21.975 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:21.976 +07:00 [DBG] Connection id "0HNCGGV8D0EC3" stopped.
2025-05-11 19:32:21.982 +07:00 [DBG] Connection id "0HNCGGV8D0EC4" stopped.
2025-05-11 19:32:21.982 +07:00 [DBG] Connection id "0HNCGGV8D0EC3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:21.983 +07:00 [DBG] Connection id "0HNCGGV8D0EC4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:24.083 +07:00 [DBG] Connection id "0HNCGGV8D0EC5" accepted.
2025-05-11 19:32:24.084 +07:00 [DBG] Connection id "0HNCGGV8D0EC5" started.
2025-05-11 19:32:24.089 +07:00 [DBG] Connection id "0HNCGGV8D0EC6" accepted.
2025-05-11 19:32:24.090 +07:00 [DBG] Connection id "0HNCGGV8D0EC5" received FIN.
2025-05-11 19:32:24.091 +07:00 [DBG] Connection id "0HNCGGV8D0EC6" started.
2025-05-11 19:32:24.091 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:24.097 +07:00 [DBG] Connection id "0HNCGGV8D0EC6" received FIN.
2025-05-11 19:32:24.098 +07:00 [DBG] Connection id "0HNCGGV8D0EC5" stopped.
2025-05-11 19:32:24.098 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:24.100 +07:00 [DBG] Connection id "0HNCGGV8D0EC5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:24.103 +07:00 [DBG] Connection id "0HNCGGV8D0EC6" stopped.
2025-05-11 19:32:24.105 +07:00 [DBG] Connection id "0HNCGGV8D0EC6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:26.998 +07:00 [DBG] Connection id "0HNCGGV8D0EC7" accepted.
2025-05-11 19:32:26.999 +07:00 [DBG] Connection id "0HNCGGV8D0EC7" started.
2025-05-11 19:32:27.000 +07:00 [DBG] Connection id "0HNCGGV8D0EC8" accepted.
2025-05-11 19:32:27.001 +07:00 [DBG] Connection id "0HNCGGV8D0EC8" started.
2025-05-11 19:32:27.002 +07:00 [DBG] Connection id "0HNCGGV8D0EC9" accepted.
2025-05-11 19:32:27.003 +07:00 [DBG] Connection id "0HNCGGV8D0EC9" started.
2025-05-11 19:32:27.004 +07:00 [DBG] Connection id "0HNCGGV8D0EC7" received FIN.
2025-05-11 19:32:27.004 +07:00 [DBG] Connection id "0HNCGGV8D0EC8" received FIN.
2025-05-11 19:32:27.005 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:27.005 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:27.008 +07:00 [DBG] Connection id "0HNCGGV8D0EC9" received FIN.
2025-05-11 19:32:27.009 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:27.010 +07:00 [DBG] Connection id "0HNCGGV8D0ECA" accepted.
2025-05-11 19:32:27.010 +07:00 [DBG] Connection id "0HNCGGV8D0EC7" stopped.
2025-05-11 19:32:27.014 +07:00 [DBG] Connection id "0HNCGGV8D0ECA" started.
2025-05-11 19:32:27.012 +07:00 [DBG] Connection id "0HNCGGV8D0EC8" stopped.
2025-05-11 19:32:27.014 +07:00 [DBG] Connection id "0HNCGGV8D0EC9" stopped.
2025-05-11 19:32:27.015 +07:00 [DBG] Connection id "0HNCGGV8D0EC7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:27.018 +07:00 [DBG] Connection id "0HNCGGV8D0EC9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:27.019 +07:00 [DBG] Connection id "0HNCGGV8D0ECA" received FIN.
2025-05-11 19:32:27.017 +07:00 [DBG] Connection id "0HNCGGV8D0EC8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:27.020 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:27.025 +07:00 [DBG] Connection id "0HNCGGV8D0ECA" stopped.
2025-05-11 19:32:27.026 +07:00 [DBG] Connection id "0HNCGGV8D0ECA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:33.684 +07:00 [DBG] Connection id "0HNCGGV8D0ECB" accepted.
2025-05-11 19:32:33.685 +07:00 [DBG] Connection id "0HNCGGV8D0ECB" started.
2025-05-11 19:32:33.686 +07:00 [DBG] Connection id "0HNCGGV8D0ECC" accepted.
2025-05-11 19:32:33.687 +07:00 [DBG] Connection id "0HNCGGV8D0ECC" started.
2025-05-11 19:32:33.687 +07:00 [DBG] Connection id "0HNCGGV8D0ECD" accepted.
2025-05-11 19:32:33.689 +07:00 [DBG] Connection id "0HNCGGV8D0ECD" started.
2025-05-11 19:32:33.690 +07:00 [DBG] Connection id "0HNCGGV8D0ECB" received FIN.
2025-05-11 19:32:33.690 +07:00 [DBG] Connection id "0HNCGGV8D0ECC" received FIN.
2025-05-11 19:32:33.691 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:33.692 +07:00 [DBG] Connection id "0HNCGGV8D0ECE" accepted.
2025-05-11 19:32:33.693 +07:00 [DBG] Connection id "0HNCGGV8D0ECD" received FIN.
2025-05-11 19:32:33.694 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:33.695 +07:00 [DBG] Connection id "0HNCGGV8D0ECE" started.
2025-05-11 19:32:33.695 +07:00 [DBG] Connection id "0HNCGGV8D0ECC" stopped.
2025-05-11 19:32:33.691 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:33.699 +07:00 [DBG] Connection id "0HNCGGV8D0ECC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:33.698 +07:00 [DBG] Connection id "0HNCGGV8D0ECD" stopped.
2025-05-11 19:32:33.700 +07:00 [DBG] Connection id "0HNCGGV8D0ECE" received FIN.
2025-05-11 19:32:33.701 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:32:33.701 +07:00 [DBG] Connection id "0HNCGGV8D0ECB" stopped.
2025-05-11 19:32:33.703 +07:00 [DBG] Connection id "0HNCGGV8D0ECD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:33.706 +07:00 [DBG] Connection id "0HNCGGV8D0ECE" stopped.
2025-05-11 19:32:33.706 +07:00 [DBG] Connection id "0HNCGGV8D0ECB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:32:33.708 +07:00 [DBG] Connection id "0HNCGGV8D0ECE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:07.283 +07:00 [DBG] Connection id "0HNCGGV8D0ECF" accepted.
2025-05-11 19:33:07.288 +07:00 [DBG] Connection id "0HNCGGV8D0ECF" started.
2025-05-11 19:33:07.292 +07:00 [DBG] Connection id "0HNCGGV8D0ECG" accepted.
2025-05-11 19:33:07.294 +07:00 [DBG] Connection id "0HNCGGV8D0ECG" started.
2025-05-11 19:33:07.294 +07:00 [DBG] Connection id "0HNCGGV8D0ECH" accepted.
2025-05-11 19:33:07.299 +07:00 [DBG] Connection id "0HNCGGV8D0ECF" received FIN.
2025-05-11 19:33:07.300 +07:00 [DBG] Connection id "0HNCGGV8D0ECG" received FIN.
2025-05-11 19:33:07.308 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:07.303 +07:00 [DBG] Connection id "0HNCGGV8D0ECI" accepted.
2025-05-11 19:33:07.303 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:07.324 +07:00 [DBG] Connection id "0HNCGGV8D0ECG" stopped.
2025-05-11 19:33:07.305 +07:00 [DBG] Connection id "0HNCGGV8D0ECH" started.
2025-05-11 19:33:07.328 +07:00 [DBG] Connection id "0HNCGGV8D0ECF" stopped.
2025-05-11 19:33:07.326 +07:00 [DBG] Connection id "0HNCGGV8D0ECI" started.
2025-05-11 19:33:07.328 +07:00 [DBG] Connection id "0HNCGGV8D0ECG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:07.330 +07:00 [DBG] Connection id "0HNCGGV8D0ECF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:07.334 +07:00 [DBG] Connection id "0HNCGGV8D0ECI" received FIN.
2025-05-11 19:33:07.332 +07:00 [DBG] Connection id "0HNCGGV8D0ECH" received FIN.
2025-05-11 19:33:07.340 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:07.340 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:07.343 +07:00 [DBG] Connection id "0HNCGGV8D0ECH" stopped.
2025-05-11 19:33:07.344 +07:00 [DBG] Connection id "0HNCGGV8D0ECI" stopped.
2025-05-11 19:33:07.344 +07:00 [DBG] Connection id "0HNCGGV8D0ECH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:07.345 +07:00 [DBG] Connection id "0HNCGGV8D0ECI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:33.273 +07:00 [DBG] Connection id "0HNCGGV8D0ECJ" accepted.
2025-05-11 19:33:33.279 +07:00 [DBG] Connection id "0HNCGGV8D0ECJ" started.
2025-05-11 19:33:33.282 +07:00 [DBG] Connection id "0HNCGGV8D0ECK" accepted.
2025-05-11 19:33:33.284 +07:00 [DBG] Connection id "0HNCGGV8D0ECK" started.
2025-05-11 19:33:33.284 +07:00 [DBG] Connection id "0HNCGGV8D0ECL" accepted.
2025-05-11 19:33:33.289 +07:00 [DBG] Connection id "0HNCGGV8D0ECJ" received FIN.
2025-05-11 19:33:33.291 +07:00 [DBG] Connection id "0HNCGGV8D0ECK" received FIN.
2025-05-11 19:33:33.296 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:33.296 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:33.290 +07:00 [DBG] Connection id "0HNCGGV8D0ECL" started.
2025-05-11 19:33:33.299 +07:00 [DBG] Connection id "0HNCGGV8D0ECM" accepted.
2025-05-11 19:33:33.303 +07:00 [DBG] Connection id "0HNCGGV8D0ECJ" stopped.
2025-05-11 19:33:33.307 +07:00 [DBG] Connection id "0HNCGGV8D0ECM" started.
2025-05-11 19:33:33.305 +07:00 [DBG] Connection id "0HNCGGV8D0ECK" stopped.
2025-05-11 19:33:33.309 +07:00 [DBG] Connection id "0HNCGGV8D0ECL" received FIN.
2025-05-11 19:33:33.308 +07:00 [DBG] Connection id "0HNCGGV8D0ECJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:33.314 +07:00 [DBG] Connection id "0HNCGGV8D0ECM" received FIN.
2025-05-11 19:33:33.311 +07:00 [DBG] Connection id "0HNCGGV8D0ECK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:33.311 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:33.315 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:33.321 +07:00 [DBG] Connection id "0HNCGGV8D0ECL" stopped.
2025-05-11 19:33:33.323 +07:00 [DBG] Connection id "0HNCGGV8D0ECM" stopped.
2025-05-11 19:33:33.324 +07:00 [DBG] Connection id "0HNCGGV8D0ECL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:33.324 +07:00 [DBG] Connection id "0HNCGGV8D0ECM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:34.599 +07:00 [DBG] Connection id "0HNCGGV8D0ECN" accepted.
2025-05-11 19:33:34.600 +07:00 [DBG] Connection id "0HNCGGV8D0ECN" started.
2025-05-11 19:33:34.601 +07:00 [DBG] Connection id "0HNCGGV8D0ECO" accepted.
2025-05-11 19:33:34.602 +07:00 [DBG] Connection id "0HNCGGV8D0ECO" started.
2025-05-11 19:33:34.603 +07:00 [DBG] Connection id "0HNCGGV8D0ECP" accepted.
2025-05-11 19:33:34.605 +07:00 [DBG] Connection id "0HNCGGV8D0ECP" started.
2025-05-11 19:33:34.605 +07:00 [DBG] Connection id "0HNCGGV8D0ECN" received FIN.
2025-05-11 19:33:34.606 +07:00 [DBG] Connection id "0HNCGGV8D0ECO" received FIN.
2025-05-11 19:33:34.608 +07:00 [DBG] Connection id "0HNCGGV8D0ECQ" accepted.
2025-05-11 19:33:34.609 +07:00 [DBG] Connection id "0HNCGGV8D0ECP" received FIN.
2025-05-11 19:33:34.615 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:34.615 +07:00 [DBG] Connection id "0HNCGGV8D0ECQ" started.
2025-05-11 19:33:34.606 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:34.607 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:34.617 +07:00 [DBG] Connection id "0HNCGGV8D0ECP" stopped.
2025-05-11 19:33:34.621 +07:00 [DBG] Connection id "0HNCGGV8D0ECQ" received FIN.
2025-05-11 19:33:34.620 +07:00 [DBG] Connection id "0HNCGGV8D0ECN" stopped.
2025-05-11 19:33:34.622 +07:00 [DBG] Connection id "0HNCGGV8D0ECO" stopped.
2025-05-11 19:33:34.625 +07:00 [DBG] Connection id "0HNCGGV8D0ECO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:34.624 +07:00 [DBG] Connection id "0HNCGGV8D0ECN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:34.622 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:34.622 +07:00 [DBG] Connection id "0HNCGGV8D0ECP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:34.630 +07:00 [DBG] Connection id "0HNCGGV8D0ECQ" stopped.
2025-05-11 19:33:34.631 +07:00 [DBG] Connection id "0HNCGGV8D0ECQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:34.863 +07:00 [DBG] Connection id "0HNCGGV8D0ECR" accepted.
2025-05-11 19:33:34.864 +07:00 [DBG] Connection id "0HNCGGV8D0ECR" started.
2025-05-11 19:33:34.865 +07:00 [DBG] Connection id "0HNCGGV8D0ECS" accepted.
2025-05-11 19:33:34.866 +07:00 [DBG] Connection id "0HNCGGV8D0ECS" started.
2025-05-11 19:33:34.866 +07:00 [DBG] Connection id "0HNCGGV8D0ECT" accepted.
2025-05-11 19:33:34.868 +07:00 [DBG] Connection id "0HNCGGV8D0ECR" received FIN.
2025-05-11 19:33:34.869 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:34.871 +07:00 [DBG] Connection id "0HNCGGV8D0ECS" received FIN.
2025-05-11 19:33:34.870 +07:00 [DBG] Connection id "0HNCGGV8D0ECT" started.
2025-05-11 19:33:34.872 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:34.873 +07:00 [DBG] Connection id "0HNCGGV8D0ECU" accepted.
2025-05-11 19:33:34.873 +07:00 [DBG] Connection id "0HNCGGV8D0ECR" stopped.
2025-05-11 19:33:34.878 +07:00 [DBG] Connection id "0HNCGGV8D0ECT" received FIN.
2025-05-11 19:33:34.879 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:34.878 +07:00 [DBG] Connection id "0HNCGGV8D0ECS" stopped.
2025-05-11 19:33:34.884 +07:00 [DBG] Connection id "0HNCGGV8D0ECT" stopped.
2025-05-11 19:33:34.880 +07:00 [DBG] Connection id "0HNCGGV8D0ECR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:34.884 +07:00 [DBG] Connection id "0HNCGGV8D0ECS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:34.879 +07:00 [DBG] Connection id "0HNCGGV8D0ECU" started.
2025-05-11 19:33:34.885 +07:00 [DBG] Connection id "0HNCGGV8D0ECT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:34.891 +07:00 [DBG] Connection id "0HNCGGV8D0ECU" received FIN.
2025-05-11 19:33:34.892 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:34.896 +07:00 [DBG] Connection id "0HNCGGV8D0ECU" stopped.
2025-05-11 19:33:34.897 +07:00 [DBG] Connection id "0HNCGGV8D0ECU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:50.857 +07:00 [DBG] Connection id "0HNCGGV8D0ECV" accepted.
2025-05-11 19:33:50.858 +07:00 [DBG] Connection id "0HNCGGV8D0ECV" started.
2025-05-11 19:33:50.859 +07:00 [DBG] Connection id "0HNCGGV8D0ED0" accepted.
2025-05-11 19:33:50.862 +07:00 [DBG] Connection id "0HNCGGV8D0ED1" accepted.
2025-05-11 19:33:50.862 +07:00 [DBG] Connection id "0HNCGGV8D0ED0" started.
2025-05-11 19:33:50.863 +07:00 [DBG] Connection id "0HNCGGV8D0ED1" started.
2025-05-11 19:33:50.865 +07:00 [DBG] Connection id "0HNCGGV8D0ECV" received FIN.
2025-05-11 19:33:50.865 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:50.866 +07:00 [DBG] Connection id "0HNCGGV8D0ED0" received FIN.
2025-05-11 19:33:50.867 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:50.867 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:50.868 +07:00 [DBG] Connection id "0HNCGGV8D0ED2" accepted.
2025-05-11 19:33:50.868 +07:00 [DBG] Connection id "0HNCGGV8D0ED1" received FIN.
2025-05-11 19:33:50.871 +07:00 [DBG] Connection id "0HNCGGV8D0ED0" stopped.
2025-05-11 19:33:50.873 +07:00 [DBG] Connection id "0HNCGGV8D0ED2" started.
2025-05-11 19:33:50.873 +07:00 [DBG] Connection id "0HNCGGV8D0ED1" stopped.
2025-05-11 19:33:50.869 +07:00 [DBG] Connection id "0HNCGGV8D0ECV" stopped.
2025-05-11 19:33:50.877 +07:00 [DBG] Connection id "0HNCGGV8D0ED1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:50.878 +07:00 [DBG] Connection id "0HNCGGV8D0ECV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:50.879 +07:00 [DBG] Connection id "0HNCGGV8D0ED2" received FIN.
2025-05-11 19:33:50.875 +07:00 [DBG] Connection id "0HNCGGV8D0ED0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:50.879 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:50.883 +07:00 [DBG] Connection id "0HNCGGV8D0ED2" stopped.
2025-05-11 19:33:50.884 +07:00 [DBG] Connection id "0HNCGGV8D0ED2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:51.514 +07:00 [DBG] Connection id "0HNCGGV8D0ED3" accepted.
2025-05-11 19:33:51.515 +07:00 [DBG] Connection id "0HNCGGV8D0ED3" started.
2025-05-11 19:33:51.517 +07:00 [DBG] Connection id "0HNCGGV8D0ED4" accepted.
2025-05-11 19:33:51.518 +07:00 [DBG] Connection id "0HNCGGV8D0ED4" started.
2025-05-11 19:33:51.518 +07:00 [DBG] Connection id "0HNCGGV8D0ED5" accepted.
2025-05-11 19:33:51.519 +07:00 [DBG] Connection id "0HNCGGV8D0ED3" received FIN.
2025-05-11 19:33:51.520 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:51.522 +07:00 [DBG] Connection id "0HNCGGV8D0ED4" received FIN.
2025-05-11 19:33:51.523 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:51.520 +07:00 [DBG] Connection id "0HNCGGV8D0ED5" started.
2025-05-11 19:33:51.524 +07:00 [DBG] Connection id "0HNCGGV8D0ED6" accepted.
2025-05-11 19:33:51.525 +07:00 [DBG] Connection id "0HNCGGV8D0ED3" stopped.
2025-05-11 19:33:51.529 +07:00 [DBG] Connection id "0HNCGGV8D0ED6" started.
2025-05-11 19:33:51.529 +07:00 [DBG] Connection id "0HNCGGV8D0ED3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:51.531 +07:00 [DBG] Connection id "0HNCGGV8D0ED5" received FIN.
2025-05-11 19:33:51.528 +07:00 [DBG] Connection id "0HNCGGV8D0ED4" stopped.
2025-05-11 19:33:51.533 +07:00 [DBG] Connection id "0HNCGGV8D0ED6" received FIN.
2025-05-11 19:33:51.533 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:51.531 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:51.533 +07:00 [DBG] Connection id "0HNCGGV8D0ED4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:51.536 +07:00 [DBG] Connection id "0HNCGGV8D0ED6" stopped.
2025-05-11 19:33:51.537 +07:00 [DBG] Connection id "0HNCGGV8D0ED5" stopped.
2025-05-11 19:33:51.538 +07:00 [DBG] Connection id "0HNCGGV8D0ED6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:51.539 +07:00 [DBG] Connection id "0HNCGGV8D0ED5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:51.943 +07:00 [DBG] Connection id "0HNCGGV8D0ED7" accepted.
2025-05-11 19:33:51.944 +07:00 [DBG] Connection id "0HNCGGV8D0ED7" started.
2025-05-11 19:33:51.945 +07:00 [DBG] Connection id "0HNCGGV8D0ED8" accepted.
2025-05-11 19:33:51.946 +07:00 [DBG] Connection id "0HNCGGV8D0ED8" started.
2025-05-11 19:33:51.947 +07:00 [DBG] Connection id "0HNCGGV8D0ED9" accepted.
2025-05-11 19:33:51.948 +07:00 [DBG] Connection id "0HNCGGV8D0ED7" received FIN.
2025-05-11 19:33:51.948 +07:00 [DBG] Connection id "0HNCGGV8D0ED9" started.
2025-05-11 19:33:51.950 +07:00 [DBG] Connection id "0HNCGGV8D0ED8" received FIN.
2025-05-11 19:33:51.948 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:51.952 +07:00 [DBG] Connection id "0HNCGGV8D0EDA" accepted.
2025-05-11 19:33:51.953 +07:00 [DBG] Connection id "0HNCGGV8D0ED9" received FIN.
2025-05-11 19:33:51.954 +07:00 [DBG] Connection id "0HNCGGV8D0EDA" started.
2025-05-11 19:33:51.954 +07:00 [DBG] Connection id "0HNCGGV8D0ED7" stopped.
2025-05-11 19:33:51.953 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:51.956 +07:00 [DBG] Connection id "0HNCGGV8D0ED7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:51.957 +07:00 [DBG] Connection id "0HNCGGV8D0EDA" received FIN.
2025-05-11 19:33:51.950 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:51.958 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:51.959 +07:00 [DBG] Connection id "0HNCGGV8D0ED9" stopped.
2025-05-11 19:33:51.962 +07:00 [DBG] Connection id "0HNCGGV8D0ED8" stopped.
2025-05-11 19:33:51.962 +07:00 [DBG] Connection id "0HNCGGV8D0EDA" stopped.
2025-05-11 19:33:51.963 +07:00 [DBG] Connection id "0HNCGGV8D0ED9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:51.964 +07:00 [DBG] Connection id "0HNCGGV8D0ED8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:51.964 +07:00 [DBG] Connection id "0HNCGGV8D0EDA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:52.178 +07:00 [DBG] Connection id "0HNCGGV8D0EDB" accepted.
2025-05-11 19:33:52.179 +07:00 [DBG] Connection id "0HNCGGV8D0EDB" started.
2025-05-11 19:33:52.179 +07:00 [DBG] Connection id "0HNCGGV8D0EDC" accepted.
2025-05-11 19:33:52.181 +07:00 [DBG] Connection id "0HNCGGV8D0EDC" started.
2025-05-11 19:33:52.181 +07:00 [DBG] Connection id "0HNCGGV8D0EDD" accepted.
2025-05-11 19:33:52.182 +07:00 [DBG] Connection id "0HNCGGV8D0EDD" started.
2025-05-11 19:33:52.183 +07:00 [DBG] Connection id "0HNCGGV8D0EDB" received FIN.
2025-05-11 19:33:52.184 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:52.186 +07:00 [DBG] Connection id "0HNCGGV8D0EDD" received FIN.
2025-05-11 19:33:52.185 +07:00 [DBG] Connection id "0HNCGGV8D0EDE" accepted.
2025-05-11 19:33:52.184 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:52.189 +07:00 [DBG] Connection id "0HNCGGV8D0EDE" started.
2025-05-11 19:33:52.188 +07:00 [DBG] Connection id "0HNCGGV8D0EDB" stopped.
2025-05-11 19:33:52.193 +07:00 [DBG] Connection id "0HNCGGV8D0EDB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:52.192 +07:00 [DBG] Connection id "0HNCGGV8D0EDC" stopped.
2025-05-11 19:33:52.198 +07:00 [DBG] Connection id "0HNCGGV8D0EDE" received FIN.
2025-05-11 19:33:52.198 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:52.184 +07:00 [DBG] Connection id "0HNCGGV8D0EDC" received FIN.
2025-05-11 19:33:52.187 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:52.199 +07:00 [DBG] Connection id "0HNCGGV8D0EDC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:52.202 +07:00 [DBG] Connection id "0HNCGGV8D0EDE" stopped.
2025-05-11 19:33:52.203 +07:00 [DBG] Connection id "0HNCGGV8D0EDD" stopped.
2025-05-11 19:33:52.205 +07:00 [DBG] Connection id "0HNCGGV8D0EDE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:52.205 +07:00 [DBG] Connection id "0HNCGGV8D0EDD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:52.455 +07:00 [DBG] Connection id "0HNCGGV8D0EDF" accepted.
2025-05-11 19:33:52.456 +07:00 [DBG] Connection id "0HNCGGV8D0EDF" started.
2025-05-11 19:33:52.456 +07:00 [DBG] Connection id "0HNCGGV8D0EDG" accepted.
2025-05-11 19:33:52.457 +07:00 [DBG] Connection id "0HNCGGV8D0EDG" started.
2025-05-11 19:33:52.457 +07:00 [DBG] Connection id "0HNCGGV8D0EDH" accepted.
2025-05-11 19:33:52.459 +07:00 [DBG] Connection id "0HNCGGV8D0EDF" received FIN.
2025-05-11 19:33:52.459 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:52.460 +07:00 [DBG] Connection id "0HNCGGV8D0EDG" received FIN.
2025-05-11 19:33:52.461 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:52.459 +07:00 [DBG] Connection id "0HNCGGV8D0EDH" started.
2025-05-11 19:33:52.462 +07:00 [DBG] Connection id "0HNCGGV8D0EDI" accepted.
2025-05-11 19:33:52.462 +07:00 [DBG] Connection id "0HNCGGV8D0EDF" stopped.
2025-05-11 19:33:52.464 +07:00 [DBG] Connection id "0HNCGGV8D0EDG" stopped.
2025-05-11 19:33:52.467 +07:00 [DBG] Connection id "0HNCGGV8D0EDH" received FIN.
2025-05-11 19:33:52.466 +07:00 [DBG] Connection id "0HNCGGV8D0EDF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:52.467 +07:00 [DBG] Connection id "0HNCGGV8D0EDG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:52.465 +07:00 [DBG] Connection id "0HNCGGV8D0EDI" started.
2025-05-11 19:33:52.467 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:52.472 +07:00 [DBG] Connection id "0HNCGGV8D0EDI" received FIN.
2025-05-11 19:33:52.472 +07:00 [DBG] Connection id "0HNCGGV8D0EDH" stopped.
2025-05-11 19:33:52.473 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:52.474 +07:00 [DBG] Connection id "0HNCGGV8D0EDH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:52.476 +07:00 [DBG] Connection id "0HNCGGV8D0EDI" stopped.
2025-05-11 19:33:52.478 +07:00 [DBG] Connection id "0HNCGGV8D0EDI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:52.893 +07:00 [DBG] Connection id "0HNCGGV8D0EDJ" accepted.
2025-05-11 19:33:52.895 +07:00 [DBG] Connection id "0HNCGGV8D0EDJ" started.
2025-05-11 19:33:52.895 +07:00 [DBG] Connection id "0HNCGGV8D0EDK" accepted.
2025-05-11 19:33:52.897 +07:00 [DBG] Connection id "0HNCGGV8D0EDK" started.
2025-05-11 19:33:52.897 +07:00 [DBG] Connection id "0HNCGGV8D0EDL" accepted.
2025-05-11 19:33:52.898 +07:00 [DBG] Connection id "0HNCGGV8D0EDJ" received FIN.
2025-05-11 19:33:52.899 +07:00 [DBG] Connection id "0HNCGGV8D0EDL" started.
2025-05-11 19:33:52.899 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:52.903 +07:00 [DBG] Connection id "0HNCGGV8D0EDM" accepted.
2025-05-11 19:33:52.904 +07:00 [DBG] Connection id "0HNCGGV8D0EDL" received FIN.
2025-05-11 19:33:52.905 +07:00 [DBG] Connection id "0HNCGGV8D0EDM" started.
2025-05-11 19:33:52.901 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:52.904 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:52.908 +07:00 [DBG] Connection id "0HNCGGV8D0EDM" received FIN.
2025-05-11 19:33:52.908 +07:00 [DBG] Connection id "0HNCGGV8D0EDK" stopped.
2025-05-11 19:33:52.904 +07:00 [DBG] Connection id "0HNCGGV8D0EDJ" stopped.
2025-05-11 19:33:52.909 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:52.911 +07:00 [DBG] Connection id "0HNCGGV8D0EDK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:52.910 +07:00 [DBG] Connection id "0HNCGGV8D0EDL" stopped.
2025-05-11 19:33:52.900 +07:00 [DBG] Connection id "0HNCGGV8D0EDK" received FIN.
2025-05-11 19:33:52.913 +07:00 [DBG] Connection id "0HNCGGV8D0EDM" stopped.
2025-05-11 19:33:52.912 +07:00 [DBG] Connection id "0HNCGGV8D0EDJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:52.915 +07:00 [DBG] Connection id "0HNCGGV8D0EDL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:52.916 +07:00 [DBG] Connection id "0HNCGGV8D0EDM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:54.612 +07:00 [DBG] Connection id "0HNCGGV8D0EDN" accepted.
2025-05-11 19:33:54.613 +07:00 [DBG] Connection id "0HNCGGV8D0EDN" started.
2025-05-11 19:33:54.616 +07:00 [DBG] Connection id "0HNCGGV8D0EDO" accepted.
2025-05-11 19:33:54.617 +07:00 [DBG] Connection id "0HNCGGV8D0EDO" started.
2025-05-11 19:33:54.617 +07:00 [DBG] Connection id "0HNCGGV8D0EDN" received FIN.
2025-05-11 19:33:54.618 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:54.620 +07:00 [DBG] Connection id "0HNCGGV8D0EDO" received FIN.
2025-05-11 19:33:54.621 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:54.622 +07:00 [DBG] Connection id "0HNCGGV8D0EDN" stopped.
2025-05-11 19:33:54.625 +07:00 [DBG] Connection id "0HNCGGV8D0EDO" stopped.
2025-05-11 19:33:54.625 +07:00 [DBG] Connection id "0HNCGGV8D0EDN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:54.626 +07:00 [DBG] Connection id "0HNCGGV8D0EDO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:55.894 +07:00 [DBG] Connection id "0HNCGGV8D0EDP" accepted.
2025-05-11 19:33:55.894 +07:00 [DBG] Connection id "0HNCGGV8D0EDP" started.
2025-05-11 19:33:55.895 +07:00 [DBG] Connection id "0HNCGGV8D0EDQ" accepted.
2025-05-11 19:33:55.896 +07:00 [DBG] Connection id "0HNCGGV8D0EDQ" started.
2025-05-11 19:33:55.897 +07:00 [DBG] Connection id "0HNCGGV8D0EDR" accepted.
2025-05-11 19:33:55.898 +07:00 [DBG] Connection id "0HNCGGV8D0EDP" received FIN.
2025-05-11 19:33:55.898 +07:00 [DBG] Connection id "0HNCGGV8D0EDR" started.
2025-05-11 19:33:55.899 +07:00 [DBG] Connection id "0HNCGGV8D0EDQ" received FIN.
2025-05-11 19:33:55.899 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:55.900 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:55.904 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:55.904 +07:00 [DBG] Connection id "0HNCGGV8D0EDS" accepted.
2025-05-11 19:33:55.904 +07:00 [DBG] Connection id "0HNCGGV8D0EDP" stopped.
2025-05-11 19:33:55.907 +07:00 [DBG] Connection id "0HNCGGV8D0EDS" started.
2025-05-11 19:33:55.905 +07:00 [DBG] Connection id "0HNCGGV8D0EDR" received FIN.
2025-05-11 19:33:55.906 +07:00 [DBG] Connection id "0HNCGGV8D0EDQ" stopped.
2025-05-11 19:33:55.907 +07:00 [DBG] Connection id "0HNCGGV8D0EDR" stopped.
2025-05-11 19:33:55.911 +07:00 [DBG] Connection id "0HNCGGV8D0EDS" received FIN.
2025-05-11 19:33:55.911 +07:00 [DBG] Connection id "0HNCGGV8D0EDR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:55.910 +07:00 [DBG] Connection id "0HNCGGV8D0EDQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:55.908 +07:00 [DBG] Connection id "0HNCGGV8D0EDP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:55.912 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:55.918 +07:00 [DBG] Connection id "0HNCGGV8D0EDS" stopped.
2025-05-11 19:33:55.919 +07:00 [DBG] Connection id "0HNCGGV8D0EDS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:56.616 +07:00 [DBG] Connection id "0HNCGGV8D0EDT" accepted.
2025-05-11 19:33:56.617 +07:00 [DBG] Connection id "0HNCGGV8D0EDT" started.
2025-05-11 19:33:56.618 +07:00 [DBG] Connection id "0HNCGGV8D0EDU" accepted.
2025-05-11 19:33:56.619 +07:00 [DBG] Connection id "0HNCGGV8D0EDU" started.
2025-05-11 19:33:56.621 +07:00 [DBG] Connection id "0HNCGGV8D0EDT" received FIN.
2025-05-11 19:33:56.622 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:56.622 +07:00 [DBG] Connection id "0HNCGGV8D0EDU" received FIN.
2025-05-11 19:33:56.623 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:56.624 +07:00 [DBG] Connection id "0HNCGGV8D0EDT" stopped.
2025-05-11 19:33:56.628 +07:00 [DBG] Connection id "0HNCGGV8D0EDU" stopped.
2025-05-11 19:33:56.628 +07:00 [DBG] Connection id "0HNCGGV8D0EDT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:56.629 +07:00 [DBG] Connection id "0HNCGGV8D0EDU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:57.532 +07:00 [DBG] Connection id "0HNCGGV8D0EDV" accepted.
2025-05-11 19:33:57.533 +07:00 [DBG] Connection id "0HNCGGV8D0EDV" started.
2025-05-11 19:33:57.533 +07:00 [DBG] Connection id "0HNCGGV8D0EE0" accepted.
2025-05-11 19:33:57.535 +07:00 [DBG] Connection id "0HNCGGV8D0EE0" started.
2025-05-11 19:33:57.536 +07:00 [DBG] Connection id "0HNCGGV8D0EE1" accepted.
2025-05-11 19:33:57.537 +07:00 [DBG] Connection id "0HNCGGV8D0EDV" received FIN.
2025-05-11 19:33:57.537 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:57.537 +07:00 [DBG] Connection id "0HNCGGV8D0EE1" started.
2025-05-11 19:33:57.538 +07:00 [DBG] Connection id "0HNCGGV8D0EE0" received FIN.
2025-05-11 19:33:57.539 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:57.542 +07:00 [DBG] Connection id "0HNCGGV8D0EE2" accepted.
2025-05-11 19:33:57.540 +07:00 [DBG] Connection id "0HNCGGV8D0EDV" stopped.
2025-05-11 19:33:57.546 +07:00 [DBG] Connection id "0HNCGGV8D0EE2" started.
2025-05-11 19:33:57.545 +07:00 [DBG] Connection id "0HNCGGV8D0EE0" stopped.
2025-05-11 19:33:57.544 +07:00 [DBG] Connection id "0HNCGGV8D0EE1" received FIN.
2025-05-11 19:33:57.547 +07:00 [DBG] Connection id "0HNCGGV8D0EDV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:57.550 +07:00 [DBG] Connection id "0HNCGGV8D0EE2" received FIN.
2025-05-11 19:33:57.549 +07:00 [DBG] Connection id "0HNCGGV8D0EE0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:57.545 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:57.551 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:57.555 +07:00 [DBG] Connection id "0HNCGGV8D0EE1" stopped.
2025-05-11 19:33:57.557 +07:00 [DBG] Connection id "0HNCGGV8D0EE2" stopped.
2025-05-11 19:33:57.557 +07:00 [DBG] Connection id "0HNCGGV8D0EE1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:57.559 +07:00 [DBG] Connection id "0HNCGGV8D0EE2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:58.393 +07:00 [DBG] Connection id "0HNCGGV8D0EE3" accepted.
2025-05-11 19:33:58.394 +07:00 [DBG] Connection id "0HNCGGV8D0EE3" started.
2025-05-11 19:33:58.394 +07:00 [DBG] Connection id "0HNCGGV8D0EE4" accepted.
2025-05-11 19:33:58.395 +07:00 [DBG] Connection id "0HNCGGV8D0EE4" started.
2025-05-11 19:33:58.396 +07:00 [DBG] Connection id "0HNCGGV8D0EE5" accepted.
2025-05-11 19:33:58.397 +07:00 [DBG] Connection id "0HNCGGV8D0EE3" received FIN.
2025-05-11 19:33:58.397 +07:00 [DBG] Connection id "0HNCGGV8D0EE5" started.
2025-05-11 19:33:58.399 +07:00 [DBG] Connection id "0HNCGGV8D0EE4" received FIN.
2025-05-11 19:33:58.399 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:58.400 +07:00 [DBG] Connection id "0HNCGGV8D0EE6" accepted.
2025-05-11 19:33:58.401 +07:00 [DBG] Connection id "0HNCGGV8D0EE5" received FIN.
2025-05-11 19:33:58.403 +07:00 [DBG] Connection id "0HNCGGV8D0EE6" started.
2025-05-11 19:33:58.402 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:58.402 +07:00 [DBG] Connection id "0HNCGGV8D0EE4" stopped.
2025-05-11 19:33:58.406 +07:00 [DBG] Connection id "0HNCGGV8D0EE5" stopped.
2025-05-11 19:33:58.406 +07:00 [DBG] Connection id "0HNCGGV8D0EE6" received FIN.
2025-05-11 19:33:58.407 +07:00 [DBG] Connection id "0HNCGGV8D0EE4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:58.407 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:58.398 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:58.408 +07:00 [DBG] Connection id "0HNCGGV8D0EE5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:58.411 +07:00 [DBG] Connection id "0HNCGGV8D0EE6" stopped.
2025-05-11 19:33:58.412 +07:00 [DBG] Connection id "0HNCGGV8D0EE3" stopped.
2025-05-11 19:33:58.413 +07:00 [DBG] Connection id "0HNCGGV8D0EE6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:58.414 +07:00 [DBG] Connection id "0HNCGGV8D0EE3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:58.990 +07:00 [DBG] Connection id "0HNCGGV8D0EE7" accepted.
2025-05-11 19:33:58.991 +07:00 [DBG] Connection id "0HNCGGV8D0EE7" started.
2025-05-11 19:33:58.992 +07:00 [DBG] Connection id "0HNCGGV8D0EE8" accepted.
2025-05-11 19:33:58.994 +07:00 [DBG] Connection id "0HNCGGV8D0EE8" started.
2025-05-11 19:33:58.995 +07:00 [DBG] Connection id "0HNCGGV8D0EE9" accepted.
2025-05-11 19:33:58.997 +07:00 [DBG] Connection id "0HNCGGV8D0EE7" received FIN.
2025-05-11 19:33:58.998 +07:00 [DBG] Connection id "0HNCGGV8D0EE8" received FIN.
2025-05-11 19:33:58.998 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:58.998 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:58.997 +07:00 [DBG] Connection id "0HNCGGV8D0EE9" started.
2025-05-11 19:33:59.000 +07:00 [DBG] Connection id "0HNCGGV8D0EEA" accepted.
2025-05-11 19:33:59.002 +07:00 [DBG] Connection id "0HNCGGV8D0EE8" stopped.
2025-05-11 19:33:59.004 +07:00 [DBG] Connection id "0HNCGGV8D0EEA" started.
2025-05-11 19:33:59.006 +07:00 [DBG] Connection id "0HNCGGV8D0EE9" received FIN.
2025-05-11 19:33:59.005 +07:00 [DBG] Connection id "0HNCGGV8D0EE8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:59.007 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:59.009 +07:00 [DBG] Connection id "0HNCGGV8D0EEA" received FIN.
2025-05-11 19:33:59.003 +07:00 [DBG] Connection id "0HNCGGV8D0EE7" stopped.
2025-05-11 19:33:59.010 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:59.011 +07:00 [DBG] Connection id "0HNCGGV8D0EE9" stopped.
2025-05-11 19:33:59.012 +07:00 [DBG] Connection id "0HNCGGV8D0EE7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:59.014 +07:00 [DBG] Connection id "0HNCGGV8D0EEA" stopped.
2025-05-11 19:33:59.014 +07:00 [DBG] Connection id "0HNCGGV8D0EE9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:59.016 +07:00 [DBG] Connection id "0HNCGGV8D0EEA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:59.192 +07:00 [DBG] Connection id "0HNCGGV8D0EEB" accepted.
2025-05-11 19:33:59.194 +07:00 [DBG] Connection id "0HNCGGV8D0EEB" started.
2025-05-11 19:33:59.194 +07:00 [DBG] Connection id "0HNCGGV8D0EEC" accepted.
2025-05-11 19:33:59.196 +07:00 [DBG] Connection id "0HNCGGV8D0EEC" started.
2025-05-11 19:33:59.196 +07:00 [DBG] Connection id "0HNCGGV8D0EED" accepted.
2025-05-11 19:33:59.197 +07:00 [DBG] Connection id "0HNCGGV8D0EED" started.
2025-05-11 19:33:59.198 +07:00 [DBG] Connection id "0HNCGGV8D0EEB" received FIN.
2025-05-11 19:33:59.199 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:59.202 +07:00 [DBG] Connection id "0HNCGGV8D0EED" received FIN.
2025-05-11 19:33:59.200 +07:00 [DBG] Connection id "0HNCGGV8D0EEE" accepted.
2025-05-11 19:33:59.199 +07:00 [DBG] Connection id "0HNCGGV8D0EEC" received FIN.
2025-05-11 19:33:59.203 +07:00 [DBG] Connection id "0HNCGGV8D0EEC" stopped.
2025-05-11 19:33:59.204 +07:00 [DBG] Connection id "0HNCGGV8D0EEE" started.
2025-05-11 19:33:59.202 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:59.199 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:59.205 +07:00 [DBG] Connection id "0HNCGGV8D0EEC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:59.213 +07:00 [DBG] Connection id "0HNCGGV8D0EED" stopped.
2025-05-11 19:33:59.214 +07:00 [DBG] Connection id "0HNCGGV8D0EEE" received FIN.
2025-05-11 19:33:59.214 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:59.217 +07:00 [DBG] Connection id "0HNCGGV8D0EEB" stopped.
2025-05-11 19:33:59.219 +07:00 [DBG] Connection id "0HNCGGV8D0EED" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:59.221 +07:00 [DBG] Connection id "0HNCGGV8D0EEE" stopped.
2025-05-11 19:33:59.221 +07:00 [DBG] Connection id "0HNCGGV8D0EEB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:59.223 +07:00 [DBG] Connection id "0HNCGGV8D0EEE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:59.555 +07:00 [DBG] Connection id "0HNCGGV8D0EEF" accepted.
2025-05-11 19:33:59.557 +07:00 [DBG] Connection id "0HNCGGV8D0EEF" started.
2025-05-11 19:33:59.557 +07:00 [DBG] Connection id "0HNCGGV8D0EEG" accepted.
2025-05-11 19:33:59.558 +07:00 [DBG] Connection id "0HNCGGV8D0EEG" started.
2025-05-11 19:33:59.559 +07:00 [DBG] Connection id "0HNCGGV8D0EEH" accepted.
2025-05-11 19:33:59.560 +07:00 [DBG] Connection id "0HNCGGV8D0EEF" received FIN.
2025-05-11 19:33:59.561 +07:00 [DBG] Connection id "0HNCGGV8D0EEH" started.
2025-05-11 19:33:59.562 +07:00 [DBG] Connection id "0HNCGGV8D0EEG" received FIN.
2025-05-11 19:33:59.563 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:59.565 +07:00 [DBG] Connection id "0HNCGGV8D0EEH" received FIN.
2025-05-11 19:33:59.564 +07:00 [DBG] Connection id "0HNCGGV8D0EEI" accepted.
2025-05-11 19:33:59.561 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:59.566 +07:00 [DBG] Connection id "0HNCGGV8D0EEG" stopped.
2025-05-11 19:33:59.566 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:59.567 +07:00 [DBG] Connection id "0HNCGGV8D0EEI" started.
2025-05-11 19:33:59.569 +07:00 [DBG] Connection id "0HNCGGV8D0EEF" stopped.
2025-05-11 19:33:59.569 +07:00 [DBG] Connection id "0HNCGGV8D0EEG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:59.571 +07:00 [DBG] Connection id "0HNCGGV8D0EEH" stopped.
2025-05-11 19:33:59.572 +07:00 [DBG] Connection id "0HNCGGV8D0EEF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:59.574 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:59.574 +07:00 [DBG] Connection id "0HNCGGV8D0EEI" received FIN.
2025-05-11 19:33:59.574 +07:00 [DBG] Connection id "0HNCGGV8D0EEH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:59.578 +07:00 [DBG] Connection id "0HNCGGV8D0EEI" stopped.
2025-05-11 19:33:59.581 +07:00 [DBG] Connection id "0HNCGGV8D0EEI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:59.767 +07:00 [DBG] Connection id "0HNCGGV8D0EEJ" accepted.
2025-05-11 19:33:59.768 +07:00 [DBG] Connection id "0HNCGGV8D0EEJ" started.
2025-05-11 19:33:59.769 +07:00 [DBG] Connection id "0HNCGGV8D0EEK" accepted.
2025-05-11 19:33:59.770 +07:00 [DBG] Connection id "0HNCGGV8D0EEK" started.
2025-05-11 19:33:59.771 +07:00 [DBG] Connection id "0HNCGGV8D0EEL" accepted.
2025-05-11 19:33:59.772 +07:00 [DBG] Connection id "0HNCGGV8D0EEJ" received FIN.
2025-05-11 19:33:59.773 +07:00 [DBG] Connection id "0HNCGGV8D0EEL" started.
2025-05-11 19:33:59.775 +07:00 [DBG] Connection id "0HNCGGV8D0EEK" received FIN.
2025-05-11 19:33:59.773 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:59.777 +07:00 [DBG] Connection id "0HNCGGV8D0EEM" accepted.
2025-05-11 19:33:59.778 +07:00 [DBG] Connection id "0HNCGGV8D0EEL" received FIN.
2025-05-11 19:33:59.779 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:59.775 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:59.780 +07:00 [DBG] Connection id "0HNCGGV8D0EEJ" stopped.
2025-05-11 19:33:59.780 +07:00 [DBG] Connection id "0HNCGGV8D0EEM" started.
2025-05-11 19:33:59.783 +07:00 [DBG] Connection id "0HNCGGV8D0EEL" stopped.
2025-05-11 19:33:59.785 +07:00 [DBG] Connection id "0HNCGGV8D0EEK" stopped.
2025-05-11 19:33:59.785 +07:00 [DBG] Connection id "0HNCGGV8D0EEJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:59.788 +07:00 [DBG] Connection id "0HNCGGV8D0EEL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:59.792 +07:00 [DBG] Connection id "0HNCGGV8D0EEM" received FIN.
2025-05-11 19:33:59.789 +07:00 [DBG] Connection id "0HNCGGV8D0EEK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:33:59.795 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:33:59.799 +07:00 [DBG] Connection id "0HNCGGV8D0EEM" stopped.
2025-05-11 19:33:59.801 +07:00 [DBG] Connection id "0HNCGGV8D0EEM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:34:00.143 +07:00 [DBG] Connection id "0HNCGGV8D0EEN" accepted.
2025-05-11 19:34:00.144 +07:00 [DBG] Connection id "0HNCGGV8D0EEN" started.
2025-05-11 19:34:00.145 +07:00 [DBG] Connection id "0HNCGGV8D0EEO" accepted.
2025-05-11 19:34:00.146 +07:00 [DBG] Connection id "0HNCGGV8D0EEO" started.
2025-05-11 19:34:00.146 +07:00 [DBG] Connection id "0HNCGGV8D0EEP" accepted.
2025-05-11 19:34:00.148 +07:00 [DBG] Connection id "0HNCGGV8D0EEP" started.
2025-05-11 19:34:00.149 +07:00 [DBG] Connection id "0HNCGGV8D0EEO" received FIN.
2025-05-11 19:34:00.148 +07:00 [DBG] Connection id "0HNCGGV8D0EEN" received FIN.
2025-05-11 19:34:00.149 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:34:00.151 +07:00 [DBG] Connection id "0HNCGGV8D0EEP" received FIN.
2025-05-11 19:34:00.150 +07:00 [DBG] Connection id "0HNCGGV8D0EEQ" accepted.
2025-05-11 19:34:00.149 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:34:00.154 +07:00 [DBG] Connection id "0HNCGGV8D0EEQ" started.
2025-05-11 19:34:00.153 +07:00 [DBG] Connection id "0HNCGGV8D0EEO" stopped.
2025-05-11 19:34:00.152 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:34:00.158 +07:00 [DBG] Connection id "0HNCGGV8D0EEQ" received FIN.
2025-05-11 19:34:00.157 +07:00 [DBG] Connection id "0HNCGGV8D0EEO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:34:00.155 +07:00 [DBG] Connection id "0HNCGGV8D0EEN" stopped.
2025-05-11 19:34:00.159 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:34:00.160 +07:00 [DBG] Connection id "0HNCGGV8D0EEP" stopped.
2025-05-11 19:34:00.161 +07:00 [DBG] Connection id "0HNCGGV8D0EEN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:34:00.163 +07:00 [DBG] Connection id "0HNCGGV8D0EEQ" stopped.
2025-05-11 19:34:00.164 +07:00 [DBG] Connection id "0HNCGGV8D0EEP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:34:00.166 +07:00 [DBG] Connection id "0HNCGGV8D0EEQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:35:34.035 +07:00 [DBG] Connection id "0HNCGGV8D0EER" accepted.
2025-05-11 19:35:34.042 +07:00 [DBG] Connection id "0HNCGGV8D0EER" started.
2025-05-11 19:35:34.044 +07:00 [DBG] Connection id "0HNCGGV8D0EES" accepted.
2025-05-11 19:35:34.050 +07:00 [DBG] Connection id "0HNCGGV8D0EES" started.
2025-05-11 19:35:34.050 +07:00 [DBG] Connection id "0HNCGGV8D0EET" accepted.
2025-05-11 19:35:34.054 +07:00 [DBG] Connection id "0HNCGGV8D0EER" received FIN.
2025-05-11 19:35:34.066 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:35:34.096 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:35:34.091 +07:00 [DBG] Connection id "0HNCGGV8D0EEU" accepted.
2025-05-11 19:35:34.066 +07:00 [DBG] Connection id "0HNCGGV8D0EET" started.
2025-05-11 19:35:34.101 +07:00 [DBG] Connection id "0HNCGGV8D0EES" stopped.
2025-05-11 19:35:34.099 +07:00 [DBG] Connection id "0HNCGGV8D0EER" stopped.
2025-05-11 19:35:34.067 +07:00 [DBG] Connection id "0HNCGGV8D0EES" received FIN.
2025-05-11 19:35:34.104 +07:00 [DBG] Connection id "0HNCGGV8D0EES" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:35:34.105 +07:00 [DBG] Connection id "0HNCGGV8D0EET" received FIN.
2025-05-11 19:35:34.105 +07:00 [DBG] Connection id "0HNCGGV8D0EER" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:35:34.102 +07:00 [DBG] Connection id "0HNCGGV8D0EEU" started.
2025-05-11 19:35:34.106 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:35:34.112 +07:00 [DBG] Connection id "0HNCGGV8D0EEU" received FIN.
2025-05-11 19:35:34.112 +07:00 [DBG] Connection id "0HNCGGV8D0EET" stopped.
2025-05-11 19:35:34.113 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:35:34.114 +07:00 [DBG] Connection id "0HNCGGV8D0EET" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:35:34.117 +07:00 [DBG] Connection id "0HNCGGV8D0EEU" stopped.
2025-05-11 19:35:34.118 +07:00 [DBG] Connection id "0HNCGGV8D0EEU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:31.183 +07:00 [DBG] Connection id "0HNCGGV8D0EEV" accepted.
2025-05-11 19:36:31.188 +07:00 [DBG] Connection id "0HNCGGV8D0EEV" started.
2025-05-11 19:36:31.191 +07:00 [DBG] Connection id "0HNCGGV8D0EF0" accepted.
2025-05-11 19:36:31.195 +07:00 [DBG] Connection id "0HNCGGV8D0EEV" received FIN.
2025-05-11 19:36:31.196 +07:00 [DBG] Connection id "0HNCGGV8D0EF0" started.
2025-05-11 19:36:31.197 +07:00 [DBG] Connection id "0HNCGGV8D0EF1" accepted.
2025-05-11 19:36:31.201 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:31.235 +07:00 [DBG] Connection id "0HNCGGV8D0EF1" started.
2025-05-11 19:36:31.237 +07:00 [DBG] Connection id "0HNCGGV8D0EF2" accepted.
2025-05-11 19:36:31.240 +07:00 [DBG] Connection id "0HNCGGV8D0EEV" stopped.
2025-05-11 19:36:31.235 +07:00 [DBG] Connection id "0HNCGGV8D0EF0" received FIN.
2025-05-11 19:36:31.236 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:31.243 +07:00 [DBG] Connection id "0HNCGGV8D0EEV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:31.245 +07:00 [DBG] Connection id "0HNCGGV8D0EF1" received FIN.
2025-05-11 19:36:31.243 +07:00 [DBG] Connection id "0HNCGGV8D0EF2" started.
2025-05-11 19:36:31.249 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:31.250 +07:00 [DBG] Connection id "0HNCGGV8D0EF0" stopped.
2025-05-11 19:36:31.253 +07:00 [DBG] Connection id "0HNCGGV8D0EF1" stopped.
2025-05-11 19:36:31.254 +07:00 [DBG] Connection id "0HNCGGV8D0EF2" received FIN.
2025-05-11 19:36:31.254 +07:00 [DBG] Connection id "0HNCGGV8D0EF1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:31.254 +07:00 [DBG] Connection id "0HNCGGV8D0EF0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:31.254 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:31.258 +07:00 [DBG] Connection id "0HNCGGV8D0EF2" stopped.
2025-05-11 19:36:31.259 +07:00 [DBG] Connection id "0HNCGGV8D0EF2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:31.960 +07:00 [DBG] Connection id "0HNCGGV8D0EF3" accepted.
2025-05-11 19:36:31.961 +07:00 [DBG] Connection id "0HNCGGV8D0EF3" started.
2025-05-11 19:36:31.962 +07:00 [DBG] Connection id "0HNCGGV8D0EF4" accepted.
2025-05-11 19:36:31.963 +07:00 [DBG] Connection id "0HNCGGV8D0EF4" started.
2025-05-11 19:36:31.963 +07:00 [DBG] Connection id "0HNCGGV8D0EF5" accepted.
2025-05-11 19:36:31.964 +07:00 [DBG] Connection id "0HNCGGV8D0EF5" started.
2025-05-11 19:36:31.966 +07:00 [DBG] Connection id "0HNCGGV8D0EF4" received FIN.
2025-05-11 19:36:31.966 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:31.966 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:31.969 +07:00 [DBG] Connection id "0HNCGGV8D0EF3" stopped.
2025-05-11 19:36:31.967 +07:00 [DBG] Connection id "0HNCGGV8D0EF6" accepted.
2025-05-11 19:36:31.970 +07:00 [DBG] Connection id "0HNCGGV8D0EF4" stopped.
2025-05-11 19:36:31.971 +07:00 [DBG] Connection id "0HNCGGV8D0EF6" started.
2025-05-11 19:36:31.970 +07:00 [DBG] Connection id "0HNCGGV8D0EF3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:31.968 +07:00 [DBG] Connection id "0HNCGGV8D0EF5" received FIN.
2025-05-11 19:36:31.971 +07:00 [DBG] Connection id "0HNCGGV8D0EF4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:31.974 +07:00 [DBG] Connection id "0HNCGGV8D0EF6" received FIN.
2025-05-11 19:36:31.969 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:31.965 +07:00 [DBG] Connection id "0HNCGGV8D0EF3" received FIN.
2025-05-11 19:36:31.974 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:31.977 +07:00 [DBG] Connection id "0HNCGGV8D0EF5" stopped.
2025-05-11 19:36:31.979 +07:00 [DBG] Connection id "0HNCGGV8D0EF6" stopped.
2025-05-11 19:36:31.979 +07:00 [DBG] Connection id "0HNCGGV8D0EF5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:31.980 +07:00 [DBG] Connection id "0HNCGGV8D0EF6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:32.417 +07:00 [DBG] Connection id "0HNCGGV8D0EF7" accepted.
2025-05-11 19:36:32.418 +07:00 [DBG] Connection id "0HNCGGV8D0EF7" started.
2025-05-11 19:36:32.419 +07:00 [DBG] Connection id "0HNCGGV8D0EF8" accepted.
2025-05-11 19:36:32.420 +07:00 [DBG] Connection id "0HNCGGV8D0EF8" started.
2025-05-11 19:36:32.421 +07:00 [DBG] Connection id "0HNCGGV8D0EF9" accepted.
2025-05-11 19:36:32.422 +07:00 [DBG] Connection id "0HNCGGV8D0EF7" received FIN.
2025-05-11 19:36:32.424 +07:00 [DBG] Connection id "0HNCGGV8D0EF8" received FIN.
2025-05-11 19:36:32.423 +07:00 [DBG] Connection id "0HNCGGV8D0EF9" started.
2025-05-11 19:36:32.423 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:32.425 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:32.429 +07:00 [DBG] Connection id "0HNCGGV8D0EF9" received FIN.
2025-05-11 19:36:32.428 +07:00 [DBG] Connection id "0HNCGGV8D0EF7" stopped.
2025-05-11 19:36:32.425 +07:00 [DBG] Connection id "0HNCGGV8D0EFA" accepted.
2025-05-11 19:36:32.429 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:32.431 +07:00 [DBG] Connection id "0HNCGGV8D0EF7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:32.431 +07:00 [DBG] Connection id "0HNCGGV8D0EFA" started.
2025-05-11 19:36:32.430 +07:00 [DBG] Connection id "0HNCGGV8D0EF8" stopped.
2025-05-11 19:36:32.434 +07:00 [DBG] Connection id "0HNCGGV8D0EF9" stopped.
2025-05-11 19:36:32.436 +07:00 [DBG] Connection id "0HNCGGV8D0EF8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:32.437 +07:00 [DBG] Connection id "0HNCGGV8D0EF9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:32.439 +07:00 [DBG] Connection id "0HNCGGV8D0EFA" received FIN.
2025-05-11 19:36:32.439 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:32.442 +07:00 [DBG] Connection id "0HNCGGV8D0EFA" stopped.
2025-05-11 19:36:32.443 +07:00 [DBG] Connection id "0HNCGGV8D0EFA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:32.616 +07:00 [DBG] Connection id "0HNCGGV8D0EFB" accepted.
2025-05-11 19:36:32.617 +07:00 [DBG] Connection id "0HNCGGV8D0EFB" started.
2025-05-11 19:36:32.617 +07:00 [DBG] Connection id "0HNCGGV8D0EFC" accepted.
2025-05-11 19:36:32.619 +07:00 [DBG] Connection id "0HNCGGV8D0EFC" started.
2025-05-11 19:36:32.620 +07:00 [DBG] Connection id "0HNCGGV8D0EFD" accepted.
2025-05-11 19:36:32.621 +07:00 [DBG] Connection id "0HNCGGV8D0EFB" received FIN.
2025-05-11 19:36:32.622 +07:00 [DBG] Connection id "0HNCGGV8D0EFD" started.
2025-05-11 19:36:32.622 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:32.636 +07:00 [DBG] Connection id "0HNCGGV8D0EFD" received FIN.
2025-05-11 19:36:32.635 +07:00 [DBG] Connection id "0HNCGGV8D0EFE" accepted.
2025-05-11 19:36:32.623 +07:00 [DBG] Connection id "0HNCGGV8D0EFC" received FIN.
2025-05-11 19:36:32.638 +07:00 [DBG] Connection id "0HNCGGV8D0EFE" started.
2025-05-11 19:36:32.637 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:32.637 +07:00 [DBG] Connection id "0HNCGGV8D0EFB" stopped.
2025-05-11 19:36:32.644 +07:00 [DBG] Connection id "0HNCGGV8D0EFE" received FIN.
2025-05-11 19:36:32.645 +07:00 [DBG] Connection id "0HNCGGV8D0EFD" stopped.
2025-05-11 19:36:32.645 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:32.645 +07:00 [DBG] Connection id "0HNCGGV8D0EFB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:32.623 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:36:32.648 +07:00 [DBG] Connection id "0HNCGGV8D0EFD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:32.650 +07:00 [DBG] Connection id "0HNCGGV8D0EFE" stopped.
2025-05-11 19:36:32.655 +07:00 [DBG] Connection id "0HNCGGV8D0EFC" stopped.
2025-05-11 19:36:32.657 +07:00 [DBG] Connection id "0HNCGGV8D0EFE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:36:32.659 +07:00 [DBG] Connection id "0HNCGGV8D0EFC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:34.387 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-11 19:37:34.480 +07:00 [DBG] Hosting starting
2025-05-11 19:37:34.502 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-11 19:37:34.511 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-227fa330-dced-4a64-a1c8-04d8b60f3e99.xml'.
2025-05-11 19:37:34.517 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2025-05-11 19:37:34.518 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2025-05-11 19:37:34.519 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-bea7c23c-cd46-482f-bde2-174e951603a6.xml'.
2025-05-11 19:37:34.525 +07:00 [DBG] Found key {227fa330-dced-4a64-a1c8-04d8b60f3e99}.
2025-05-11 19:37:34.528 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2025-05-11 19:37:34.529 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2025-05-11 19:37:34.530 +07:00 [DBG] Found key {bea7c23c-cd46-482f-bde2-174e951603a6}.
2025-05-11 19:37:34.535 +07:00 [DBG] Considering key {227fa330-dced-4a64-a1c8-04d8b60f3e99} with expiration date 2025-06-05 10:07:06Z as default key.
2025-05-11 19:37:34.538 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-11 19:37:34.540 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-11 19:37:34.541 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-11 19:37:34.545 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-11 19:37:34.547 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-11 19:37:34.548 +07:00 [DBG] Using key {227fa330-dced-4a64-a1c8-04d8b60f3e99} as the default key.
2025-05-11 19:37:34.549 +07:00 [DBG] Key ring with default key {227fa330-dced-4a64-a1c8-04d8b60f3e99} was loaded during application startup.
2025-05-11 19:37:34.682 +07:00 [INF] Now listening on: https://localhost:7169
2025-05-11 19:37:34.682 +07:00 [INF] Now listening on: http://localhost:5169
2025-05-11 19:37:34.683 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2025-05-11 19:37:34.683 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-05-11 19:37:34.684 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-05-11 19:37:34.684 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-05-11 19:37:34.726 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-11 19:37:34.727 +07:00 [INF] Hosting environment: Development
2025-05-11 19:37:34.728 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\api\CityInfo.API
2025-05-11 19:37:34.729 +07:00 [DBG] Hosting started
2025-05-11 19:37:38.554 +07:00 [DBG] Connection id "0HNCGH2EKR3PM" accepted.
2025-05-11 19:37:38.555 +07:00 [DBG] Connection id "0HNCGH2EKR3PM" started.
2025-05-11 19:37:38.556 +07:00 [DBG] Connection id "0HNCGH2EKR3PN" accepted.
2025-05-11 19:37:38.557 +07:00 [DBG] Connection id "0HNCGH2EKR3PN" started.
2025-05-11 19:37:38.605 +07:00 [DBG] Connection id "0HNCGH2EKR3PM" received FIN.
2025-05-11 19:37:38.605 +07:00 [DBG] Connection id "0HNCGH2EKR3PN" received FIN.
2025-05-11 19:37:38.618 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:38.618 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:38.644 +07:00 [DBG] Connection id "0HNCGH2EKR3PN" stopped.
2025-05-11 19:37:38.644 +07:00 [DBG] Connection id "0HNCGH2EKR3PM" stopped.
2025-05-11 19:37:38.646 +07:00 [DBG] Connection id "0HNCGH2EKR3PM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:38.646 +07:00 [DBG] Connection id "0HNCGH2EKR3PN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:41.452 +07:00 [DBG] Connection id "0HNCGH2EKR3PO" accepted.
2025-05-11 19:37:41.454 +07:00 [DBG] Connection id "0HNCGH2EKR3PO" started.
2025-05-11 19:37:41.456 +07:00 [DBG] Connection id "0HNCGH2EKR3PP" accepted.
2025-05-11 19:37:41.457 +07:00 [DBG] Connection id "0HNCGH2EKR3PP" started.
2025-05-11 19:37:41.459 +07:00 [DBG] Connection id "0HNCGH2EKR3PO" received FIN.
2025-05-11 19:37:41.461 +07:00 [DBG] Connection id "0HNCGH2EKR3PP" received FIN.
2025-05-11 19:37:41.461 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:41.462 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:41.466 +07:00 [DBG] Connection id "0HNCGH2EKR3PO" stopped.
2025-05-11 19:37:41.469 +07:00 [DBG] Connection id "0HNCGH2EKR3PP" stopped.
2025-05-11 19:37:41.469 +07:00 [DBG] Connection id "0HNCGH2EKR3PO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:41.470 +07:00 [DBG] Connection id "0HNCGH2EKR3PP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:49.625 +07:00 [DBG] Connection id "0HNCGH2EKR3PQ" accepted.
2025-05-11 19:37:49.629 +07:00 [DBG] Connection id "0HNCGH2EKR3PQ" started.
2025-05-11 19:37:49.630 +07:00 [DBG] Connection id "0HNCGH2EKR3PR" accepted.
2025-05-11 19:37:49.632 +07:00 [DBG] Connection id "0HNCGH2EKR3PR" started.
2025-05-11 19:37:49.632 +07:00 [DBG] Connection id "0HNCGH2EKR3PS" accepted.
2025-05-11 19:37:49.634 +07:00 [DBG] Connection id "0HNCGH2EKR3PQ" received FIN.
2025-05-11 19:37:49.635 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:49.634 +07:00 [DBG] Connection id "0HNCGH2EKR3PS" started.
2025-05-11 19:37:49.636 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:49.636 +07:00 [DBG] Connection id "0HNCGH2EKR3PR" received FIN.
2025-05-11 19:37:49.637 +07:00 [DBG] Connection id "0HNCGH2EKR3PQ" stopped.
2025-05-11 19:37:49.639 +07:00 [DBG] Connection id "0HNCGH2EKR3PS" received FIN.
2025-05-11 19:37:49.640 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:49.638 +07:00 [DBG] Connection id "0HNCGH2EKR3PR" stopped.
2025-05-11 19:37:49.637 +07:00 [DBG] Connection id "0HNCGH2EKR3PT" accepted.
2025-05-11 19:37:49.640 +07:00 [DBG] Connection id "0HNCGH2EKR3PQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:49.645 +07:00 [DBG] Connection id "0HNCGH2EKR3PR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:49.644 +07:00 [DBG] Connection id "0HNCGH2EKR3PS" stopped.
2025-05-11 19:37:49.645 +07:00 [DBG] Connection id "0HNCGH2EKR3PT" started.
2025-05-11 19:37:49.648 +07:00 [DBG] Connection id "0HNCGH2EKR3PS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:49.652 +07:00 [DBG] Connection id "0HNCGH2EKR3PT" received FIN.
2025-05-11 19:37:49.653 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:49.664 +07:00 [DBG] Connection id "0HNCGH2EKR3PT" stopped.
2025-05-11 19:37:49.666 +07:00 [DBG] Connection id "0HNCGH2EKR3PT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:50.288 +07:00 [DBG] Connection id "0HNCGH2EKR3PU" accepted.
2025-05-11 19:37:50.290 +07:00 [DBG] Connection id "0HNCGH2EKR3PU" started.
2025-05-11 19:37:50.290 +07:00 [DBG] Connection id "0HNCGH2EKR3PV" accepted.
2025-05-11 19:37:50.291 +07:00 [DBG] Connection id "0HNCGH2EKR3PV" started.
2025-05-11 19:37:50.292 +07:00 [DBG] Connection id "0HNCGH2EKR3Q0" accepted.
2025-05-11 19:37:50.293 +07:00 [DBG] Connection id "0HNCGH2EKR3Q0" started.
2025-05-11 19:37:50.293 +07:00 [DBG] Connection id "0HNCGH2EKR3PU" received FIN.
2025-05-11 19:37:50.295 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:50.296 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:50.297 +07:00 [DBG] Connection id "0HNCGH2EKR3Q1" accepted.
2025-05-11 19:37:50.295 +07:00 [DBG] Connection id "0HNCGH2EKR3PV" received FIN.
2025-05-11 19:37:50.298 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:50.300 +07:00 [DBG] Connection id "0HNCGH2EKR3PV" stopped.
2025-05-11 19:37:50.300 +07:00 [DBG] Connection id "0HNCGH2EKR3Q1" started.
2025-05-11 19:37:50.303 +07:00 [DBG] Connection id "0HNCGH2EKR3Q0" stopped.
2025-05-11 19:37:50.298 +07:00 [DBG] Connection id "0HNCGH2EKR3PU" stopped.
2025-05-11 19:37:50.304 +07:00 [DBG] Connection id "0HNCGH2EKR3PV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:50.306 +07:00 [DBG] Connection id "0HNCGH2EKR3PU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:50.305 +07:00 [DBG] Connection id "0HNCGH2EKR3Q0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:50.307 +07:00 [DBG] Connection id "0HNCGH2EKR3Q1" received FIN.
2025-05-11 19:37:50.297 +07:00 [DBG] Connection id "0HNCGH2EKR3Q0" received FIN.
2025-05-11 19:37:50.308 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:50.315 +07:00 [DBG] Connection id "0HNCGH2EKR3Q1" stopped.
2025-05-11 19:37:50.316 +07:00 [DBG] Connection id "0HNCGH2EKR3Q1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:50.505 +07:00 [DBG] Connection id "0HNCGH2EKR3Q2" accepted.
2025-05-11 19:37:50.506 +07:00 [DBG] Connection id "0HNCGH2EKR3Q2" started.
2025-05-11 19:37:50.507 +07:00 [DBG] Connection id "0HNCGH2EKR3Q3" accepted.
2025-05-11 19:37:50.508 +07:00 [DBG] Connection id "0HNCGH2EKR3Q3" started.
2025-05-11 19:37:50.508 +07:00 [DBG] Connection id "0HNCGH2EKR3Q4" accepted.
2025-05-11 19:37:50.510 +07:00 [DBG] Connection id "0HNCGH2EKR3Q2" received FIN.
2025-05-11 19:37:50.510 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:50.510 +07:00 [DBG] Connection id "0HNCGH2EKR3Q4" started.
2025-05-11 19:37:50.512 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:50.511 +07:00 [DBG] Connection id "0HNCGH2EKR3Q3" received FIN.
2025-05-11 19:37:50.513 +07:00 [DBG] Connection id "0HNCGH2EKR3Q2" stopped.
2025-05-11 19:37:50.517 +07:00 [DBG] Connection id "0HNCGH2EKR3Q4" received FIN.
2025-05-11 19:37:50.516 +07:00 [DBG] Connection id "0HNCGH2EKR3Q3" stopped.
2025-05-11 19:37:50.524 +07:00 [DBG] Connection id "0HNCGH2EKR3Q2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:50.513 +07:00 [DBG] Connection id "0HNCGH2EKR3Q5" accepted.
2025-05-11 19:37:50.525 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:50.528 +07:00 [DBG] Connection id "0HNCGH2EKR3Q5" started.
2025-05-11 19:37:50.526 +07:00 [DBG] Connection id "0HNCGH2EKR3Q3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:50.531 +07:00 [DBG] Connection id "0HNCGH2EKR3Q4" stopped.
2025-05-11 19:37:50.533 +07:00 [DBG] Connection id "0HNCGH2EKR3Q4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:50.534 +07:00 [DBG] Connection id "0HNCGH2EKR3Q5" received FIN.
2025-05-11 19:37:50.535 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:50.539 +07:00 [DBG] Connection id "0HNCGH2EKR3Q5" stopped.
2025-05-11 19:37:50.540 +07:00 [DBG] Connection id "0HNCGH2EKR3Q5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:50.726 +07:00 [DBG] Connection id "0HNCGH2EKR3Q6" accepted.
2025-05-11 19:37:50.727 +07:00 [DBG] Connection id "0HNCGH2EKR3Q6" started.
2025-05-11 19:37:50.727 +07:00 [DBG] Connection id "0HNCGH2EKR3Q7" accepted.
2025-05-11 19:37:50.728 +07:00 [DBG] Connection id "0HNCGH2EKR3Q7" started.
2025-05-11 19:37:50.729 +07:00 [DBG] Connection id "0HNCGH2EKR3Q8" accepted.
2025-05-11 19:37:50.730 +07:00 [DBG] Connection id "0HNCGH2EKR3Q6" received FIN.
2025-05-11 19:37:50.730 +07:00 [DBG] Connection id "0HNCGH2EKR3Q8" started.
2025-05-11 19:37:50.731 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:50.732 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:50.734 +07:00 [DBG] Connection id "0HNCGH2EKR3Q6" stopped.
2025-05-11 19:37:50.732 +07:00 [DBG] Connection id "0HNCGH2EKR3Q9" accepted.
2025-05-11 19:37:50.746 +07:00 [DBG] Connection id "0HNCGH2EKR3Q7" stopped.
2025-05-11 19:37:50.747 +07:00 [DBG] Connection id "0HNCGH2EKR3Q9" started.
2025-05-11 19:37:50.745 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:50.746 +07:00 [DBG] Connection id "0HNCGH2EKR3Q6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:50.751 +07:00 [DBG] Connection id "0HNCGH2EKR3Q9" received FIN.
2025-05-11 19:37:50.751 +07:00 [DBG] Connection id "0HNCGH2EKR3Q8" stopped.
2025-05-11 19:37:50.748 +07:00 [DBG] Connection id "0HNCGH2EKR3Q7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:50.751 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:50.731 +07:00 [DBG] Connection id "0HNCGH2EKR3Q7" received FIN.
2025-05-11 19:37:50.742 +07:00 [DBG] Connection id "0HNCGH2EKR3Q8" received FIN.
2025-05-11 19:37:50.753 +07:00 [DBG] Connection id "0HNCGH2EKR3Q8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:50.755 +07:00 [DBG] Connection id "0HNCGH2EKR3Q9" stopped.
2025-05-11 19:37:50.758 +07:00 [DBG] Connection id "0HNCGH2EKR3Q9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:51.268 +07:00 [DBG] Connection id "0HNCGH2EKR3QA" accepted.
2025-05-11 19:37:51.268 +07:00 [DBG] Connection id "0HNCGH2EKR3QA" started.
2025-05-11 19:37:51.270 +07:00 [DBG] Connection id "0HNCGH2EKR3QB" accepted.
2025-05-11 19:37:51.271 +07:00 [DBG] Connection id "0HNCGH2EKR3QB" started.
2025-05-11 19:37:51.273 +07:00 [DBG] Connection id "0HNCGH2EKR3QA" received FIN.
2025-05-11 19:37:51.273 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:51.275 +07:00 [DBG] Connection id "0HNCGH2EKR3QB" received FIN.
2025-05-11 19:37:51.276 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:51.276 +07:00 [DBG] Connection id "0HNCGH2EKR3QA" stopped.
2025-05-11 19:37:51.279 +07:00 [DBG] Connection id "0HNCGH2EKR3QB" stopped.
2025-05-11 19:37:51.279 +07:00 [DBG] Connection id "0HNCGH2EKR3QA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:51.280 +07:00 [DBG] Connection id "0HNCGH2EKR3QB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:52.549 +07:00 [DBG] Connection id "0HNCGH2EKR3QC" accepted.
2025-05-11 19:37:52.550 +07:00 [DBG] Connection id "0HNCGH2EKR3QC" started.
2025-05-11 19:37:52.551 +07:00 [DBG] Connection id "0HNCGH2EKR3QD" accepted.
2025-05-11 19:37:52.552 +07:00 [DBG] Connection id "0HNCGH2EKR3QD" started.
2025-05-11 19:37:52.554 +07:00 [DBG] Connection id "0HNCGH2EKR3QC" received FIN.
2025-05-11 19:37:52.555 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:52.555 +07:00 [DBG] Connection id "0HNCGH2EKR3QD" received FIN.
2025-05-11 19:37:52.556 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:52.557 +07:00 [DBG] Connection id "0HNCGH2EKR3QC" stopped.
2025-05-11 19:37:52.559 +07:00 [DBG] Connection id "0HNCGH2EKR3QD" stopped.
2025-05-11 19:37:52.559 +07:00 [DBG] Connection id "0HNCGH2EKR3QC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:52.560 +07:00 [DBG] Connection id "0HNCGH2EKR3QD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:52.968 +07:00 [DBG] Connection id "0HNCGH2EKR3QE" accepted.
2025-05-11 19:37:52.969 +07:00 [DBG] Connection id "0HNCGH2EKR3QE" started.
2025-05-11 19:37:52.969 +07:00 [DBG] Connection id "0HNCGH2EKR3QF" accepted.
2025-05-11 19:37:52.970 +07:00 [DBG] Connection id "0HNCGH2EKR3QF" started.
2025-05-11 19:37:52.972 +07:00 [DBG] Connection id "0HNCGH2EKR3QE" received FIN.
2025-05-11 19:37:52.973 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:52.974 +07:00 [DBG] Connection id "0HNCGH2EKR3QF" received FIN.
2025-05-11 19:37:52.975 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:52.976 +07:00 [DBG] Connection id "0HNCGH2EKR3QE" stopped.
2025-05-11 19:37:52.977 +07:00 [DBG] Connection id "0HNCGH2EKR3QF" stopped.
2025-05-11 19:37:52.978 +07:00 [DBG] Connection id "0HNCGH2EKR3QE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:52.978 +07:00 [DBG] Connection id "0HNCGH2EKR3QF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:53.172 +07:00 [DBG] Connection id "0HNCGH2EKR3QG" accepted.
2025-05-11 19:37:53.173 +07:00 [DBG] Connection id "0HNCGH2EKR3QG" started.
2025-05-11 19:37:53.174 +07:00 [DBG] Connection id "0HNCGH2EKR3QH" accepted.
2025-05-11 19:37:53.176 +07:00 [DBG] Connection id "0HNCGH2EKR3QH" started.
2025-05-11 19:37:53.179 +07:00 [DBG] Connection id "0HNCGH2EKR3QG" received FIN.
2025-05-11 19:37:53.180 +07:00 [DBG] Connection id "0HNCGH2EKR3QH" received FIN.
2025-05-11 19:37:53.180 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:53.180 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:53.183 +07:00 [DBG] Connection id "0HNCGH2EKR3QG" stopped.
2025-05-11 19:37:53.184 +07:00 [DBG] Connection id "0HNCGH2EKR3QH" stopped.
2025-05-11 19:37:53.184 +07:00 [DBG] Connection id "0HNCGH2EKR3QG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:53.185 +07:00 [DBG] Connection id "0HNCGH2EKR3QH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:53.544 +07:00 [DBG] Connection id "0HNCGH2EKR3QI" accepted.
2025-05-11 19:37:53.545 +07:00 [DBG] Connection id "0HNCGH2EKR3QI" started.
2025-05-11 19:37:53.546 +07:00 [DBG] Connection id "0HNCGH2EKR3QJ" accepted.
2025-05-11 19:37:53.547 +07:00 [DBG] Connection id "0HNCGH2EKR3QJ" started.
2025-05-11 19:37:53.548 +07:00 [DBG] Connection id "0HNCGH2EKR3QI" received FIN.
2025-05-11 19:37:53.549 +07:00 [DBG] Connection id "0HNCGH2EKR3QJ" received FIN.
2025-05-11 19:37:53.549 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:53.550 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:53.552 +07:00 [DBG] Connection id "0HNCGH2EKR3QI" stopped.
2025-05-11 19:37:53.553 +07:00 [DBG] Connection id "0HNCGH2EKR3QJ" stopped.
2025-05-11 19:37:53.553 +07:00 [DBG] Connection id "0HNCGH2EKR3QI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:53.554 +07:00 [DBG] Connection id "0HNCGH2EKR3QJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:56.909 +07:00 [DBG] Connection id "0HNCGH2EKR3QK" accepted.
2025-05-11 19:37:56.910 +07:00 [DBG] Connection id "0HNCGH2EKR3QK" started.
2025-05-11 19:37:56.911 +07:00 [DBG] Connection id "0HNCGH2EKR3QL" accepted.
2025-05-11 19:37:56.913 +07:00 [DBG] Connection id "0HNCGH2EKR3QL" started.
2025-05-11 19:37:56.915 +07:00 [DBG] Connection id "0HNCGH2EKR3QK" received FIN.
2025-05-11 19:37:56.916 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:56.917 +07:00 [DBG] Connection id "0HNCGH2EKR3QL" received FIN.
2025-05-11 19:37:56.918 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:56.919 +07:00 [DBG] Connection id "0HNCGH2EKR3QK" stopped.
2025-05-11 19:37:56.923 +07:00 [DBG] Connection id "0HNCGH2EKR3QL" stopped.
2025-05-11 19:37:56.924 +07:00 [DBG] Connection id "0HNCGH2EKR3QK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:56.925 +07:00 [DBG] Connection id "0HNCGH2EKR3QL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:58.362 +07:00 [DBG] Connection id "0HNCGH2EKR3QM" accepted.
2025-05-11 19:37:58.363 +07:00 [DBG] Connection id "0HNCGH2EKR3QM" started.
2025-05-11 19:37:58.365 +07:00 [DBG] Connection id "0HNCGH2EKR3QN" accepted.
2025-05-11 19:37:58.366 +07:00 [DBG] Connection id "0HNCGH2EKR3QN" started.
2025-05-11 19:37:58.367 +07:00 [DBG] Connection id "0HNCGH2EKR3QO" accepted.
2025-05-11 19:37:58.369 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:58.371 +07:00 [DBG] Connection id "0HNCGH2EKR3QO" started.
2025-05-11 19:37:58.369 +07:00 [DBG] Connection id "0HNCGH2EKR3QM" received FIN.
2025-05-11 19:37:58.372 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:58.378 +07:00 [DBG] Connection id "0HNCGH2EKR3QO" received FIN.
2025-05-11 19:37:58.371 +07:00 [DBG] Connection id "0HNCGH2EKR3QN" received FIN.
2025-05-11 19:37:58.375 +07:00 [DBG] Connection id "0HNCGH2EKR3QP" accepted.
2025-05-11 19:37:58.375 +07:00 [DBG] Connection id "0HNCGH2EKR3QM" stopped.
2025-05-11 19:37:58.379 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:58.383 +07:00 [DBG] Connection id "0HNCGH2EKR3QP" started.
2025-05-11 19:37:58.380 +07:00 [DBG] Connection id "0HNCGH2EKR3QN" stopped.
2025-05-11 19:37:58.385 +07:00 [DBG] Connection id "0HNCGH2EKR3QM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:58.389 +07:00 [DBG] Connection id "0HNCGH2EKR3QO" stopped.
2025-05-11 19:37:58.392 +07:00 [DBG] Connection id "0HNCGH2EKR3QP" received FIN.
2025-05-11 19:37:58.392 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:37:58.390 +07:00 [DBG] Connection id "0HNCGH2EKR3QN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:58.393 +07:00 [DBG] Connection id "0HNCGH2EKR3QO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:37:58.397 +07:00 [DBG] Connection id "0HNCGH2EKR3QP" stopped.
2025-05-11 19:37:58.402 +07:00 [DBG] Connection id "0HNCGH2EKR3QP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:38:03.427 +07:00 [DBG] Connection id "0HNCGH2EKR3QQ" accepted.
2025-05-11 19:38:03.428 +07:00 [DBG] Connection id "0HNCGH2EKR3QQ" started.
2025-05-11 19:38:03.432 +07:00 [DBG] Connection id "0HNCGH2EKR3QR" accepted.
2025-05-11 19:38:03.433 +07:00 [DBG] Connection id "0HNCGH2EKR3QQ" received FIN.
2025-05-11 19:38:03.433 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:38:03.434 +07:00 [DBG] Connection id "0HNCGH2EKR3QR" started.
2025-05-11 19:38:03.438 +07:00 [DBG] Connection id "0HNCGH2EKR3QQ" stopped.
2025-05-11 19:38:03.440 +07:00 [DBG] Connection id "0HNCGH2EKR3QQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:38:03.441 +07:00 [DBG] Connection id "0HNCGH2EKR3QR" received FIN.
2025-05-11 19:38:03.442 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:38:03.446 +07:00 [DBG] Connection id "0HNCGH2EKR3QR" stopped.
2025-05-11 19:38:03.447 +07:00 [DBG] Connection id "0HNCGH2EKR3QR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:38:32.887 +07:00 [DBG] Connection id "0HNCGH2EKR3QS" accepted.
2025-05-11 19:38:32.895 +07:00 [DBG] Connection id "0HNCGH2EKR3QS" started.
2025-05-11 19:38:32.895 +07:00 [DBG] Connection id "0HNCGH2EKR3QT" accepted.
2025-05-11 19:38:32.903 +07:00 [DBG] Connection id "0HNCGH2EKR3QT" started.
2025-05-11 19:38:32.904 +07:00 [DBG] Connection id "0HNCGH2EKR3QS" received FIN.
2025-05-11 19:38:32.906 +07:00 [DBG] Connection id "0HNCGH2EKR3QT" received FIN.
2025-05-11 19:38:32.908 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:38:32.915 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:38:32.916 +07:00 [DBG] Connection id "0HNCGH2EKR3QS" stopped.
2025-05-11 19:38:32.917 +07:00 [DBG] Connection id "0HNCGH2EKR3QT" stopped.
2025-05-11 19:38:32.918 +07:00 [DBG] Connection id "0HNCGH2EKR3QS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:38:32.918 +07:00 [DBG] Connection id "0HNCGH2EKR3QT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:38:40.304 +07:00 [DBG] Connection id "0HNCGH2EKR3QU" accepted.
2025-05-11 19:38:40.305 +07:00 [DBG] Connection id "0HNCGH2EKR3QU" started.
2025-05-11 19:38:40.311 +07:00 [DBG] Connection id "0HNCGH2EKR3QV" accepted.
2025-05-11 19:38:40.311 +07:00 [DBG] Connection id "0HNCGH2EKR3QV" started.
2025-05-11 19:38:40.329 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5169/ - null null
2025-05-11 19:38:40.428 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-11 19:38:40.454 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:38:40.456 +07:00 [DBG] Https port '7169' loaded from configuration.
2025-05-11 19:38:40.457 +07:00 [DBG] Redirecting to 'https://localhost:7169/'.
2025-05-11 19:38:40.460 +07:00 [DBG] Connection id "0HNCGH2EKR3QU" completed keep alive response.
2025-05-11 19:38:40.462 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5169/ - 307 0 null 137.064ms
2025-05-11 19:38:40.463 +07:00 [DBG] Connection id "0HNCGH2EKR3R0" accepted.
2025-05-11 19:38:40.465 +07:00 [DBG] Connection id "0HNCGH2EKR3R0" started.
2025-05-11 19:38:40.468 +07:00 [DBG] Connection id "0HNCGH2EKR3R0" received FIN.
2025-05-11 19:38:40.469 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:38:40.471 +07:00 [DBG] Connection id "0HNCGH2EKR3R0" stopped.
2025-05-11 19:38:40.472 +07:00 [DBG] Connection id "0HNCGH2EKR3R0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:39:41.527 +07:00 [DBG] Connection id "0HNCGH2EKR3QV" received FIN.
2025-05-11 19:39:41.532 +07:00 [DBG] Connection id "0HNCGH2EKR3QV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:39:41.534 +07:00 [DBG] Connection id "0HNCGH2EKR3QV" disconnecting.
2025-05-11 19:39:41.538 +07:00 [DBG] Connection id "0HNCGH2EKR3QV" stopped.
2025-05-11 19:39:56.793 +07:00 [DBG] Connection id "0HNCGH2EKR3QU" received FIN.
2025-05-11 19:39:56.831 +07:00 [DBG] Connection id "0HNCGH2EKR3QU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:39:56.834 +07:00 [DBG] Connection id "0HNCGH2EKR3QU" disconnecting.
2025-05-11 19:39:56.836 +07:00 [DBG] Connection id "0HNCGH2EKR3QU" stopped.
2025-05-11 19:39:57.144 +07:00 [DBG] Connection id "0HNCGH2EKR3R1" accepted.
2025-05-11 19:39:57.145 +07:00 [DBG] Connection id "0HNCGH2EKR3R1" started.
2025-05-11 19:39:57.146 +07:00 [DBG] Connection id "0HNCGH2EKR3R2" accepted.
2025-05-11 19:39:57.147 +07:00 [DBG] Connection id "0HNCGH2EKR3R2" started.
2025-05-11 19:39:57.153 +07:00 [DBG] Connection id "0HNCGH2EKR3R1" received FIN.
2025-05-11 19:39:57.163 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:39:57.161 +07:00 [DBG] Connection id "0HNCGH2EKR3R2" received FIN.
2025-05-11 19:39:57.171 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:39:57.173 +07:00 [DBG] Connection id "0HNCGH2EKR3R1" stopped.
2025-05-11 19:39:57.176 +07:00 [DBG] Connection id "0HNCGH2EKR3R2" stopped.
2025-05-11 19:39:57.176 +07:00 [DBG] Connection id "0HNCGH2EKR3R1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:39:57.177 +07:00 [DBG] Connection id "0HNCGH2EKR3R2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:39:58.608 +07:00 [DBG] Connection id "0HNCGH2EKR3R3" accepted.
2025-05-11 19:39:58.610 +07:00 [DBG] Connection id "0HNCGH2EKR3R3" started.
2025-05-11 19:39:58.613 +07:00 [DBG] Connection id "0HNCGH2EKR3R3" received FIN.
2025-05-11 19:39:58.613 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:39:58.614 +07:00 [DBG] Connection id "0HNCGH2EKR3R4" accepted.
2025-05-11 19:39:58.616 +07:00 [DBG] Connection id "0HNCGH2EKR3R3" stopped.
2025-05-11 19:39:58.616 +07:00 [DBG] Connection id "0HNCGH2EKR3R4" started.
2025-05-11 19:39:58.617 +07:00 [DBG] Connection id "0HNCGH2EKR3R5" accepted.
2025-05-11 19:39:58.617 +07:00 [DBG] Connection id "0HNCGH2EKR3R3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:39:58.619 +07:00 [DBG] Connection id "0HNCGH2EKR3R5" started.
2025-05-11 19:39:58.620 +07:00 [DBG] Connection id "0HNCGH2EKR3R4" received FIN.
2025-05-11 19:39:58.621 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:39:58.624 +07:00 [DBG] Connection id "0HNCGH2EKR3R5" received FIN.
2025-05-11 19:39:58.625 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:39:58.625 +07:00 [DBG] Connection id "0HNCGH2EKR3R4" stopped.
2025-05-11 19:39:58.628 +07:00 [DBG] Connection id "0HNCGH2EKR3R5" stopped.
2025-05-11 19:39:58.628 +07:00 [DBG] Connection id "0HNCGH2EKR3R4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:39:58.629 +07:00 [DBG] Connection id "0HNCGH2EKR3R5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:40:01.897 +07:00 [DBG] Connection id "0HNCGH2EKR3R6" accepted.
2025-05-11 19:40:01.898 +07:00 [DBG] Connection id "0HNCGH2EKR3R6" started.
2025-05-11 19:40:01.901 +07:00 [DBG] Connection id "0HNCGH2EKR3R6" received FIN.
2025-05-11 19:40:01.901 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:40:01.902 +07:00 [DBG] Connection id "0HNCGH2EKR3R7" accepted.
2025-05-11 19:40:01.903 +07:00 [DBG] Connection id "0HNCGH2EKR3R6" stopped.
2025-05-11 19:40:01.904 +07:00 [DBG] Connection id "0HNCGH2EKR3R7" started.
2025-05-11 19:40:01.904 +07:00 [DBG] Connection id "0HNCGH2EKR3R8" accepted.
2025-05-11 19:40:01.905 +07:00 [DBG] Connection id "0HNCGH2EKR3R6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:40:01.906 +07:00 [DBG] Connection id "0HNCGH2EKR3R8" started.
2025-05-11 19:40:01.908 +07:00 [DBG] Connection id "0HNCGH2EKR3R7" received FIN.
2025-05-11 19:40:01.909 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:40:01.911 +07:00 [DBG] Connection id "0HNCGH2EKR3R8" received FIN.
2025-05-11 19:40:01.912 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:40:01.912 +07:00 [DBG] Connection id "0HNCGH2EKR3R7" stopped.
2025-05-11 19:40:01.914 +07:00 [DBG] Connection id "0HNCGH2EKR3R8" stopped.
2025-05-11 19:40:01.915 +07:00 [DBG] Connection id "0HNCGH2EKR3R7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:40:01.915 +07:00 [DBG] Connection id "0HNCGH2EKR3R8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:40:02.628 +07:00 [DBG] Connection id "0HNCGH2EKR3R9" accepted.
2025-05-11 19:40:02.630 +07:00 [DBG] Connection id "0HNCGH2EKR3R9" started.
2025-05-11 19:40:02.630 +07:00 [DBG] Connection id "0HNCGH2EKR3RA" accepted.
2025-05-11 19:40:02.632 +07:00 [DBG] Connection id "0HNCGH2EKR3RA" started.
2025-05-11 19:40:02.634 +07:00 [DBG] Connection id "0HNCGH2EKR3R9" received FIN.
2025-05-11 19:40:02.634 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:40:02.635 +07:00 [DBG] Connection id "0HNCGH2EKR3RA" received FIN.
2025-05-11 19:40:02.636 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:40:02.638 +07:00 [DBG] Connection id "0HNCGH2EKR3R9" stopped.
2025-05-11 19:40:02.641 +07:00 [DBG] Connection id "0HNCGH2EKR3RA" stopped.
2025-05-11 19:40:02.641 +07:00 [DBG] Connection id "0HNCGH2EKR3R9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:40:02.642 +07:00 [DBG] Connection id "0HNCGH2EKR3RA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:40:03.771 +07:00 [DBG] Connection id "0HNCGH2EKR3RB" accepted.
2025-05-11 19:40:03.772 +07:00 [DBG] Connection id "0HNCGH2EKR3RB" started.
2025-05-11 19:40:03.775 +07:00 [DBG] Connection id "0HNCGH2EKR3RB" received FIN.
2025-05-11 19:40:03.775 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:40:03.776 +07:00 [DBG] Connection id "0HNCGH2EKR3RC" accepted.
2025-05-11 19:40:03.778 +07:00 [DBG] Connection id "0HNCGH2EKR3RB" stopped.
2025-05-11 19:40:03.779 +07:00 [DBG] Connection id "0HNCGH2EKR3RC" started.
2025-05-11 19:40:03.779 +07:00 [DBG] Connection id "0HNCGH2EKR3RD" accepted.
2025-05-11 19:40:03.780 +07:00 [DBG] Connection id "0HNCGH2EKR3RB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:40:03.784 +07:00 [DBG] Connection id "0HNCGH2EKR3RC" received FIN.
2025-05-11 19:40:03.782 +07:00 [DBG] Connection id "0HNCGH2EKR3RD" started.
2025-05-11 19:40:03.784 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:40:03.789 +07:00 [DBG] Connection id "0HNCGH2EKR3RC" stopped.
2025-05-11 19:40:03.790 +07:00 [DBG] Connection id "0HNCGH2EKR3RD" received FIN.
2025-05-11 19:40:03.791 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:40:03.791 +07:00 [DBG] Connection id "0HNCGH2EKR3RC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:40:03.795 +07:00 [DBG] Connection id "0HNCGH2EKR3RD" stopped.
2025-05-11 19:40:03.796 +07:00 [DBG] Connection id "0HNCGH2EKR3RD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:40:07.937 +07:00 [DBG] Connection id "0HNCGH2EKR3RE" accepted.
2025-05-11 19:40:07.938 +07:00 [DBG] Connection id "0HNCGH2EKR3RE" started.
2025-05-11 19:40:07.941 +07:00 [DBG] Connection id "0HNCGH2EKR3RE" received FIN.
2025-05-11 19:40:07.942 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:40:07.944 +07:00 [DBG] Connection id "0HNCGH2EKR3RF" accepted.
2025-05-11 19:40:07.945 +07:00 [DBG] Connection id "0HNCGH2EKR3RE" stopped.
2025-05-11 19:40:07.945 +07:00 [DBG] Connection id "0HNCGH2EKR3RF" started.
2025-05-11 19:40:07.945 +07:00 [DBG] Connection id "0HNCGH2EKR3RG" accepted.
2025-05-11 19:40:07.946 +07:00 [DBG] Connection id "0HNCGH2EKR3RE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:40:07.947 +07:00 [DBG] Connection id "0HNCGH2EKR3RG" started.
2025-05-11 19:40:07.949 +07:00 [DBG] Connection id "0HNCGH2EKR3RF" received FIN.
2025-05-11 19:40:07.950 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:40:07.952 +07:00 [DBG] Connection id "0HNCGH2EKR3RG" received FIN.
2025-05-11 19:40:07.952 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:40:07.953 +07:00 [DBG] Connection id "0HNCGH2EKR3RF" stopped.
2025-05-11 19:40:07.954 +07:00 [DBG] Connection id "0HNCGH2EKR3RG" stopped.
2025-05-11 19:40:07.955 +07:00 [DBG] Connection id "0HNCGH2EKR3RF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:40:07.955 +07:00 [DBG] Connection id "0HNCGH2EKR3RG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:41:13.444 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-11 19:41:13.538 +07:00 [DBG] Hosting starting
2025-05-11 19:41:13.563 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-11 19:41:13.571 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-227fa330-dced-4a64-a1c8-04d8b60f3e99.xml'.
2025-05-11 19:41:13.575 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2025-05-11 19:41:13.577 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2025-05-11 19:41:13.577 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-bea7c23c-cd46-482f-bde2-174e951603a6.xml'.
2025-05-11 19:41:13.581 +07:00 [DBG] Found key {227fa330-dced-4a64-a1c8-04d8b60f3e99}.
2025-05-11 19:41:13.584 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2025-05-11 19:41:13.585 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2025-05-11 19:41:13.586 +07:00 [DBG] Found key {bea7c23c-cd46-482f-bde2-174e951603a6}.
2025-05-11 19:41:13.590 +07:00 [DBG] Considering key {227fa330-dced-4a64-a1c8-04d8b60f3e99} with expiration date 2025-06-05 10:07:06Z as default key.
2025-05-11 19:41:13.593 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-11 19:41:13.594 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-11 19:41:13.596 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-11 19:41:13.599 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-11 19:41:13.600 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-11 19:41:13.602 +07:00 [DBG] Using key {227fa330-dced-4a64-a1c8-04d8b60f3e99} as the default key.
2025-05-11 19:41:13.603 +07:00 [DBG] Key ring with default key {227fa330-dced-4a64-a1c8-04d8b60f3e99} was loaded during application startup.
2025-05-11 19:41:13.725 +07:00 [INF] Now listening on: https://localhost:7169
2025-05-11 19:41:13.726 +07:00 [INF] Now listening on: http://localhost:5169
2025-05-11 19:41:13.727 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2025-05-11 19:41:13.727 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-05-11 19:41:13.728 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-05-11 19:41:13.729 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-05-11 19:41:13.769 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-11 19:41:13.770 +07:00 [INF] Hosting environment: Development
2025-05-11 19:41:13.771 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\api\CityInfo.API
2025-05-11 19:41:13.771 +07:00 [DBG] Hosting started
2025-05-11 19:41:17.068 +07:00 [DBG] Connection id "0HNCGH4FOOAKB" accepted.
2025-05-11 19:41:17.070 +07:00 [DBG] Connection id "0HNCGH4FOOAKB" started.
2025-05-11 19:41:17.070 +07:00 [DBG] Connection id "0HNCGH4FOOAKC" accepted.
2025-05-11 19:41:17.071 +07:00 [DBG] Connection id "0HNCGH4FOOAKC" started.
2025-05-11 19:41:17.117 +07:00 [DBG] Connection id "0HNCGH4FOOAKC" received FIN.
2025-05-11 19:41:17.117 +07:00 [DBG] Connection id "0HNCGH4FOOAKB" received FIN.
2025-05-11 19:41:17.130 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:41:17.130 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:41:17.157 +07:00 [DBG] Connection id "0HNCGH4FOOAKB" stopped.
2025-05-11 19:41:17.157 +07:00 [DBG] Connection id "0HNCGH4FOOAKC" stopped.
2025-05-11 19:41:17.160 +07:00 [DBG] Connection id "0HNCGH4FOOAKB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:41:17.160 +07:00 [DBG] Connection id "0HNCGH4FOOAKC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:41:38.569 +07:00 [DBG] Connection id "0HNCGH4FOOAKD" accepted.
2025-05-11 19:41:38.570 +07:00 [DBG] Connection id "0HNCGH4FOOAKD" started.
2025-05-11 19:41:38.577 +07:00 [DBG] Connection id "0HNCGH4FOOAKE" accepted.
2025-05-11 19:41:38.578 +07:00 [DBG] Connection id "0HNCGH4FOOAKE" started.
2025-05-11 19:41:38.580 +07:00 [DBG] Connection id "0HNCGH4FOOAKD" received FIN.
2025-05-11 19:41:38.582 +07:00 [DBG] Connection id "0HNCGH4FOOAKE" received FIN.
2025-05-11 19:41:38.586 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:41:38.591 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:41:38.593 +07:00 [DBG] Connection id "0HNCGH4FOOAKD" stopped.
2025-05-11 19:41:38.594 +07:00 [DBG] Connection id "0HNCGH4FOOAKE" stopped.
2025-05-11 19:41:38.595 +07:00 [DBG] Connection id "0HNCGH4FOOAKD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:41:38.596 +07:00 [DBG] Connection id "0HNCGH4FOOAKE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:45:17.619 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-11 19:45:17.706 +07:00 [DBG] Hosting starting
2025-05-11 19:45:17.729 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-11 19:45:17.737 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-227fa330-dced-4a64-a1c8-04d8b60f3e99.xml'.
2025-05-11 19:45:17.741 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2025-05-11 19:45:17.742 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2025-05-11 19:45:17.743 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-bea7c23c-cd46-482f-bde2-174e951603a6.xml'.
2025-05-11 19:45:17.746 +07:00 [DBG] Found key {227fa330-dced-4a64-a1c8-04d8b60f3e99}.
2025-05-11 19:45:17.749 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2025-05-11 19:45:17.749 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2025-05-11 19:45:17.750 +07:00 [DBG] Found key {bea7c23c-cd46-482f-bde2-174e951603a6}.
2025-05-11 19:45:17.754 +07:00 [DBG] Considering key {227fa330-dced-4a64-a1c8-04d8b60f3e99} with expiration date 2025-06-05 10:07:06Z as default key.
2025-05-11 19:45:17.757 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-11 19:45:17.758 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-11 19:45:17.760 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-11 19:45:17.763 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-11 19:45:17.765 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-11 19:45:17.767 +07:00 [DBG] Using key {227fa330-dced-4a64-a1c8-04d8b60f3e99} as the default key.
2025-05-11 19:45:17.768 +07:00 [DBG] Key ring with default key {227fa330-dced-4a64-a1c8-04d8b60f3e99} was loaded during application startup.
2025-05-11 19:45:17.896 +07:00 [INF] Now listening on: https://localhost:7169
2025-05-11 19:45:17.897 +07:00 [INF] Now listening on: http://localhost:5169
2025-05-11 19:45:17.897 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2025-05-11 19:45:17.898 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-05-11 19:45:17.898 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-05-11 19:45:17.899 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-05-11 19:45:17.940 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-11 19:45:17.942 +07:00 [INF] Hosting environment: Development
2025-05-11 19:45:17.942 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\api\CityInfo.API
2025-05-11 19:45:17.943 +07:00 [DBG] Hosting started
2025-05-11 19:45:20.609 +07:00 [DBG] Connection id "0HNCGH6OBB7J1" accepted.
2025-05-11 19:45:20.611 +07:00 [DBG] Connection id "0HNCGH6OBB7J1" started.
2025-05-11 19:45:20.611 +07:00 [DBG] Connection id "0HNCGH6OBB7J2" accepted.
2025-05-11 19:45:20.612 +07:00 [DBG] Connection id "0HNCGH6OBB7J2" started.
2025-05-11 19:45:20.653 +07:00 [DBG] Connection id "0HNCGH6OBB7J2" received FIN.
2025-05-11 19:45:20.653 +07:00 [DBG] Connection id "0HNCGH6OBB7J1" received FIN.
2025-05-11 19:45:20.672 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:45:20.672 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:45:20.702 +07:00 [DBG] Connection id "0HNCGH6OBB7J2" stopped.
2025-05-11 19:45:20.702 +07:00 [DBG] Connection id "0HNCGH6OBB7J1" stopped.
2025-05-11 19:45:20.703 +07:00 [DBG] Connection id "0HNCGH6OBB7J2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:45:20.703 +07:00 [DBG] Connection id "0HNCGH6OBB7J1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:52:37.347 +07:00 [DBG] Connection id "0HNCGH6OBB7J3" accepted.
2025-05-11 19:52:37.353 +07:00 [DBG] Connection id "0HNCGH6OBB7J3" started.
2025-05-11 19:52:37.372 +07:00 [DBG] Connection 0HNCGH6OBB7J3 established using the following protocol: "Tls13"
2025-05-11 19:52:37.416 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2025-05-11 19:52:37.497 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-11 19:52:37.524 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:52:37.544 +07:00 [DBG] No candidates found for the request path '/'
2025-05-11 19:52:37.545 +07:00 [DBG] Request did not match any endpoints
2025-05-11 19:52:37.592 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:52:37.597 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 185.6315ms
2025-05-11 19:52:37.600 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2025-05-11 19:52:40.392 +07:00 [DBG] Connection id "0HNCGH6OBB7J3" received FIN.
2025-05-11 19:52:40.396 +07:00 [DBG] The connection queue processing loop for 0HNCGH6OBB7J3 completed.
2025-05-11 19:52:40.398 +07:00 [DBG] Connection id "0HNCGH6OBB7J3" is closed. The last processed stream ID was 1.
2025-05-11 19:52:40.399 +07:00 [DBG] Connection id "0HNCGH6OBB7J3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:52:40.415 +07:00 [DBG] Connection id "0HNCGH6OBB7J3" stopped.
2025-05-11 19:52:56.474 +07:00 [DBG] Connection id "0HNCGH6OBB7J4" accepted.
2025-05-11 19:52:56.475 +07:00 [DBG] Connection id "0HNCGH6OBB7J4" started.
2025-05-11 19:52:56.477 +07:00 [DBG] Connection id "0HNCGH6OBB7J5" accepted.
2025-05-11 19:52:56.486 +07:00 [DBG] Connection id "0HNCGH6OBB7J5" started.
2025-05-11 19:52:56.498 +07:00 [DBG] Connection id "0HNCGH6OBB7J5" received FIN.
2025-05-11 19:52:56.499 +07:00 [DBG] Connection 0HNCGH6OBB7J5 established using the following protocol: "Tls13"
2025-05-11 19:52:56.499 +07:00 [DBG] Connection 0HNCGH6OBB7J4 established using the following protocol: "Tls13"
2025-05-11 19:52:56.504 +07:00 [DBG] Connection id "0HNCGH6OBB7J5" is closed. The last processed stream ID was 0.
2025-05-11 19:52:56.506 +07:00 [DBG] Connection id "0HNCGH6OBB7J5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:52:56.510 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2025-05-11 19:52:56.510 +07:00 [DBG] The connection queue processing loop for 0HNCGH6OBB7J5 completed.
2025-05-11 19:52:56.520 +07:00 [DBG] Connection id "0HNCGH6OBB7J5" stopped.
2025-05-11 19:52:56.527 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:52:56.529 +07:00 [DBG] No candidates found for the request path '/'
2025-05-11 19:52:56.530 +07:00 [DBG] Request did not match any endpoints
2025-05-11 19:52:56.532 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:52:56.534 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 25.1627ms
2025-05-11 19:52:56.538 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2025-05-11 19:53:03.538 +07:00 [DBG] Connection id "0HNCGH6OBB7J6" accepted.
2025-05-11 19:53:03.546 +07:00 [DBG] Connection id "0HNCGH6OBB7J6" started.
2025-05-11 19:53:03.547 +07:00 [DBG] Connection id "0HNCGH6OBB7J7" accepted.
2025-05-11 19:53:03.552 +07:00 [DBG] Connection id "0HNCGH6OBB7J7" started.
2025-05-11 19:53:03.596 +07:00 [DBG] Connection id "0HNCGH6OBB7J7" received FIN.
2025-05-11 19:53:03.596 +07:00 [DBG] Connection 0HNCGH6OBB7J6 established using the following protocol: "Tls13"
2025-05-11 19:53:03.596 +07:00 [DBG] Connection 0HNCGH6OBB7J7 established using the following protocol: "Tls13"
2025-05-11 19:53:03.606 +07:00 [DBG] Connection id "0HNCGH6OBB7J7" is closed. The last processed stream ID was 0.
2025-05-11 19:53:03.607 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2025-05-11 19:53:03.608 +07:00 [DBG] Connection id "0HNCGH6OBB7J7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:53:03.613 +07:00 [DBG] The connection queue processing loop for 0HNCGH6OBB7J7 completed.
2025-05-11 19:53:03.616 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:53:03.616 +07:00 [DBG] Connection id "0HNCGH6OBB7J7" stopped.
2025-05-11 19:53:03.617 +07:00 [DBG] No candidates found for the request path '/'
2025-05-11 19:53:03.618 +07:00 [DBG] Request did not match any endpoints
2025-05-11 19:53:03.621 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:53:03.622 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 15.7122ms
2025-05-11 19:53:03.624 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2025-05-11 19:53:22.836 +07:00 [DBG] Connection id "0HNCGH6OBB7J4" received FIN.
2025-05-11 19:53:22.839 +07:00 [DBG] Connection id "0HNCGH6OBB7J4" is closed. The last processed stream ID was 1.
2025-05-11 19:53:22.840 +07:00 [DBG] The connection queue processing loop for 0HNCGH6OBB7J4 completed.
2025-05-11 19:53:22.844 +07:00 [DBG] Connection id "0HNCGH6OBB7J4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:53:22.861 +07:00 [DBG] Connection id "0HNCGH6OBB7J4" stopped.
2025-05-11 19:54:02.743 +07:00 [DBG] Connection id "0HNCGH6OBB7J8" accepted.
2025-05-11 19:54:02.749 +07:00 [DBG] Connection id "0HNCGH6OBB7J8" started.
2025-05-11 19:54:02.750 +07:00 [DBG] Connection id "0HNCGH6OBB7J9" accepted.
2025-05-11 19:54:02.778 +07:00 [DBG] Connection id "0HNCGH6OBB7J9" started.
2025-05-11 19:54:02.782 +07:00 [DBG] Connection id "0HNCGH6OBB7J9" received FIN.
2025-05-11 19:54:02.783 +07:00 [DBG] Connection 0HNCGH6OBB7J9 established using the following protocol: "Tls13"
2025-05-11 19:54:02.783 +07:00 [DBG] Connection 0HNCGH6OBB7J8 established using the following protocol: "Tls13"
2025-05-11 19:54:02.788 +07:00 [DBG] Connection id "0HNCGH6OBB7J9" is closed. The last processed stream ID was 0.
2025-05-11 19:54:02.790 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger - null null
2025-05-11 19:54:02.790 +07:00 [DBG] Connection id "0HNCGH6OBB7J9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:54:02.796 +07:00 [DBG] The connection queue processing loop for 0HNCGH6OBB7J9 completed.
2025-05-11 19:54:02.798 +07:00 [DBG] Connection id "0HNCGH6OBB7J9" stopped.
2025-05-11 19:54:02.799 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger - 301 0 null 9.5482ms
2025-05-11 19:54:02.802 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2025-05-11 19:54:02.839 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-05-11 19:54:02.841 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-05-11 19:54:02.858 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-05-11 19:54:02.859 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-05-11 19:54:02.859 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 57.2409ms
2025-05-11 19:54:02.866 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui.css - null null
2025-05-11 19:54:02.867 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - null null
2025-05-11 19:54:02.868 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2025-05-11 19:54:02.868 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2025-05-11 19:54:02.868 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - null null
2025-05-11 19:54:02.908 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 40.4959ms
2025-05-11 19:54:02.930 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-05-11 19:54:02.932 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-05-11 19:54:02.932 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui.css - 200 143943 text/css 66.1956ms
2025-05-11 19:54:02.934 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 66.6227ms
2025-05-11 19:54:02.954 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-05-11 19:54:02.955 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 88.5212ms
2025-05-11 19:54:02.978 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 109.8586ms
2025-05-11 19:54:03.156 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2025-05-11 19:54:03.213 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/favicon-32x32.png - null null
2025-05-11 19:54:03.218 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-05-11 19:54:03.219 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/favicon-32x32.png - 200 628 image/png 5.8124ms
2025-05-11 19:54:03.322 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 166.9633ms
2025-05-11 19:54:14.258 +07:00 [DBG] Connection id "0HNCGH6OBB7JA" accepted.
2025-05-11 19:54:14.259 +07:00 [DBG] Connection id "0HNCGH6OBB7JA" started.
2025-05-11 19:54:14.260 +07:00 [DBG] Connection id "0HNCGH6OBB7JB" accepted.
2025-05-11 19:54:14.261 +07:00 [DBG] Connection id "0HNCGH6OBB7JB" started.
2025-05-11 19:54:14.262 +07:00 [DBG] Connection id "0HNCGH6OBB7JC" accepted.
2025-05-11 19:54:14.264 +07:00 [DBG] Connection id "0HNCGH6OBB7JC" started.
2025-05-11 19:54:14.264 +07:00 [DBG] Connection id "0HNCGH6OBB7JB" received FIN.
2025-05-11 19:54:14.265 +07:00 [DBG] Connection 0HNCGH6OBB7JA established using the following protocol: "Tls13"
2025-05-11 19:54:14.264 +07:00 [DBG] Connection id "0HNCGH6OBB7JC" received FIN.
2025-05-11 19:54:14.268 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 19:54:14.268 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 19:54:14.267 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:54:14.268 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 19:54:14.269 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-05-11 19:54:14.272 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:54:14.273 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:54:14.274 +07:00 [DBG] Connection id "0HNCGH6OBB7JB" stopped.
2025-05-11 19:54:14.275 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:54:14.277 +07:00 [DBG] Connection id "0HNCGH6OBB7JC" stopped.
2025-05-11 19:54:14.278 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:54:14.278 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:54:14.279 +07:00 [DBG] Connection id "0HNCGH6OBB7JB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:54:14.280 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:54:14.280 +07:00 [DBG] Connection id "0HNCGH6OBB7JC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 19:54:14.282 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:54:14.282 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:54:14.283 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:54:14.290 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 19:54:14.290 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 19:54:14.290 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 19:54:14.295 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 19:54:14.295 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 19:54:14.295 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 19:54:14.304 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:54:14.304 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:54:14.305 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 19:54:14.306 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:54:14.307 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:54:14.307 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:54:14.309 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:54:14.309 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:54:14.309 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 19:54:14.338 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 19:54:14.338 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 19:54:14.338 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 19:54:14.341 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:54:14.341 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:54:14.342 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:54:14.343 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:54:14.344 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:54:14.345 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:54:14.346 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:14.346 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:14.347 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:14.349 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:54:14.350 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:54:14.351 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:54:14.353 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:14.354 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:14.355 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:14.358 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:54:14.358 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:54:14.359 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:54:14.492 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-11 19:54:14.492 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-11 19:54:14.492 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-11 19:54:14.510 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:54:14.511 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:54:14.512 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:54:14.515 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 19:54:14.515 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 19:54:14.515 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 19:54:14.517 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 19:54:14.517 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 19:54:14.517 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 19:54:14.519 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:54:14.519 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 19:54:14.520 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:54:14.521 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:54:14.521 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:54:14.522 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:54:14.523 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 19:54:14.524 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:54:14.525 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 19:54:14.526 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 19:54:14.528 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 19:54:14.528 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 19:54:14.528 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 19:54:14.531 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:54:14.532 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 19:54:14.533 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:14.534 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:14.535 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:14.541 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:54:14.542 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:14.543 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 19:54:14.544 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 19:54:14.545 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:54:14.546 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:54:14.547 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 19:54:14.548 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 19:54:14.549 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:54:14.549 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 19:54:14.550 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:54:14.551 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:54:14.552 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:54:14.553 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:54:15.049 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:54:15.049 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:54:15.049 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:54:15.096 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Where(p => p.Time.Year < __n_0)'
2025-05-11 19:54:15.096 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Where(ap => ap.AppointmentConfirmed == "Finished")
    .OrderByDescending(ap => ap.AppointmentTime)
    .Take(__p_0)
    .Select(ap => new AppointmentModel{ 
        AppointmentId = ap.AppointmentId, 
        AppointmentTime = ap.AppointmentTime, 
        AppointmentStatus = ap.AppointmentStatus, 
        AppointmentComment = ap.AppointmentComment, 
        AppointmentConfirmed = ap.AppointmentConfirmed, 
        PatientStatus = ap.Patient.Status, 
        PatientId = ap.PatientId, 
        DoctorId = ap.DoctorId, 
        Gender = ap.Patient.Gender, 
        Avatar = ap.Patient.Avatar, 
        FullName = ap.Patient.FullName, 
        Date = ap.Patient.Date, 
        Diseases = ap.Patient.Diseases, 
        Age = DateTime.Now.Year - ap.Patient.Date.Year - DateTime.Now < ap.Patient.Date.AddYears(DateTime.Now.Year - ap.Patient.Date.Year) ? 1 : 0 
    }
    )'
2025-05-11 19:54:15.096 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .OrderBy(pt => pt.AppointmentTime)
    .Skip(__p_0)
    .Take(__p_1)
    .Select(ap => new AppointmentModel{ 
        AppointmentId = ap.AppointmentId, 
        AppointmentTime = ap.AppointmentTime, 
        AppointmentStatus = ap.AppointmentStatus, 
        AppointmentComment = ap.AppointmentComment, 
        AppointmentConfirmed = ap.AppointmentConfirmed, 
        PatientStatus = ap.Patient.Status, 
        PatientId = ap.PatientId, 
        DoctorId = ap.DoctorId, 
        Gender = ap.Patient.Gender, 
        Avatar = ap.Patient.Avatar, 
        FullName = ap.Patient.FullName, 
        Date = ap.Patient.Date, 
        Diseases = ap.Patient.Diseases, 
        Age = DateTime.Now.Year - ap.Patient.Date.Year - DateTime.Now < ap.Patient.Date.AddYears(DateTime.Now.Year - ap.Patient.Date.Year) ? 1 : 0 
    }
    )'
2025-05-11 19:54:15.248 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AppointmentModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            AppointmentId -> 0
            AppointmentTime -> 1
            AppointmentStatus -> 2
            AppointmentComment -> 3
            AppointmentConfirmed -> 4
            PatientStatus -> 5
            PatientId -> 6
            DoctorId -> 7
            Gender -> 8
            Avatar -> 9
            FullName -> 10
            Date -> 11
            Diseases -> 12
            Age -> 13
        SELECT t.AppointmentId, t.AppointmentTime, t.AppointmentStatus, t.AppointmentComment, t.AppointmentConfirmed, p.Status AS PatientStatus, t.PatientId, t.DoctorId, p.Gender, p.Avatar, p.FullName, p.Date, p.Diseases, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM 
        (
            SELECT a.AppointmentId, a.AppointmentComment, a.AppointmentConfirmed, a.AppointmentStatus, a.AppointmentTime, a.DoctorId, a.PatientId
            FROM Appointment AS a
            ORDER BY a.AppointmentTime ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        INNER JOIN Patient AS p ON t.PatientId == p.PatientId
        ORDER BY t.AppointmentTime ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppointmentModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2025-05-11 19:54:15.248 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AppointmentModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            AppointmentId -> 0
            AppointmentTime -> 1
            AppointmentStatus -> 2
            AppointmentComment -> 3
            AppointmentConfirmed -> 4
            PatientStatus -> 5
            PatientId -> 6
            DoctorId -> 7
            Gender -> 8
            Avatar -> 9
            FullName -> 10
            Date -> 11
            Diseases -> 12
            Age -> 13
        SELECT t.AppointmentId, t.AppointmentTime, t.AppointmentStatus, t.AppointmentComment, t.AppointmentConfirmed, p.Status AS PatientStatus, t.PatientId, t.DoctorId, p.Gender, p.Avatar, p.FullName, p.Date, p.Diseases, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM 
        (
            SELECT TOP(@__p_0) a.AppointmentId, a.AppointmentComment, a.AppointmentConfirmed, a.AppointmentStatus, a.AppointmentTime, a.DoctorId, a.PatientId
            FROM Appointment AS a
            WHERE a.AppointmentConfirmed == N'Finished'
            ORDER BY a.AppointmentTime DESC
        ) AS t
        INNER JOIN Patient AS p ON t.PatientId == p.PatientId
        ORDER BY t.AppointmentTime DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppointmentModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2025-05-11 19:54:15.256 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10], [Property: Patient.Time (DateTime) Required, 11] }
        SELECT p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status, p.Time
        FROM Patient AS p
        WHERE DATEPART(year, p.Time) < @__n_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2025-05-11 19:54:15.274 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:54:15.274 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:54:15.274 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:54:15.293 +07:00 [DBG] Created DbConnection. (18ms).
2025-05-11 19:54:15.293 +07:00 [DBG] Created DbConnection. (18ms).
2025-05-11 19:54:15.293 +07:00 [DBG] Created DbConnection. (18ms).
2025-05-11 19:54:15.296 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.296 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.296 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.589 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.590 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.593 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.593 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:54:15.593 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:54:15.594 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:54:15.597 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-05-11 19:54:15.597 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-05-11 19:54:15.597 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:54:15.605 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-05-11 19:54:15.605 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-05-11 19:54:15.605 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-05-11 19:54:15.612 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 19:54:15.612 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 19:54:15.612 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:54:15.678 +07:00 [INF] Executed DbCommand (67ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 19:54:15.678 +07:00 [INF] Executed DbCommand (65ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 19:54:15.678 +07:00 [INF] Executed DbCommand (66ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:54:15.691 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.691 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.698 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 14ms reading results.
2025-05-11 19:54:15.698 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 15ms reading results.
2025-05-11 19:54:15.701 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.701 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.708 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (6ms).
2025-05-11 19:54:15.708 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (6ms).
2025-05-11 19:54:15.713 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:54:15.713 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:54:15.713 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.716 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:54:15.716 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:54:15.717 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:54:15.718 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:54:15.718 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:54:15.719 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:54:15.720 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:54:15.720 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:54:15.721 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:54:15.722 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:54:15.745 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.746 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.747 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.747 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.748 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.750 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.750 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.751 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.752 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.753 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.754 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.755 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.755 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.756 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.757 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.758 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.759 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.760 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.761 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.761 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.762 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.763 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.764 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.765 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.766 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.766 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.767 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.768 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.769 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.770 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.771 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.772 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.773 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.773 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.774 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.775 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.776 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.776 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.777 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.778 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.779 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.780 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.781 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.782 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 99ms reading results.
2025-05-11 19:54:15.782 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.783 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:54:15.785 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Where(p => p.Time.Year == __n_0)'
2025-05-11 19:54:15.788 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10], [Property: Patient.Time (DateTime) Required, 11] }
        SELECT p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status, p.Time
        FROM Patient AS p
        WHERE DATEPART(year, p.Time) == @__n_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2025-05-11 19:54:15.792 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.793 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.794 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:54:15.795 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:54:15.796 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:54:15.797 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:54:15.801 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:54:15.802 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.803 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.804 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.805 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.806 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.807 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.808 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.808 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.809 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.810 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.811 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2025-05-11 19:54:15.812 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.814 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 19:54:15.814 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 1452.1124ms
2025-05-11 19:54:15.814 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 1456.0981ms
2025-05-11 19:54:15.815 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:54:15.816 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 19:54:15.816 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Count()'
2025-05-11 19:54:15.818 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:54:15.818 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:54:15.822 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.822 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.825 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 19:54:15.825 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 19:54:15.827 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 1558.9553ms
2025-05-11 19:54:15.827 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4322 application/json; charset=utf-8 1559.2526ms
2025-05-11 19:54:15.839 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT COUNT(*)
        FROM Patient AS p), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .Single()'
2025-05-11 19:54:15.843 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.844 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.846 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:54:15.847 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:54:15.849 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 19:54:15.850 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:54:15.856 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:54:15.858 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.860 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 19:54:15.862 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.864 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 19:54:15.866 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:54:15.869 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:54:15.870 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:54:15.871 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:54:15.871 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:54:15.872 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 19:54:15.878 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 1521.9086ms
2025-05-11 19:54:15.880 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:54:15.881 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:54:15.881 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 19:54:15.882 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.884 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:54:15.885 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 19:54:15.886 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:54:15.887 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 1619.2644ms
2025-05-11 19:54:15.888 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:54:15.891 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 19:54:15.892 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 19:54:15.894 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:54:15.895 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:54:15.896 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:54:15.898 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 19:54:15.899 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:54:15.900 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:54:15.901 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:15.903 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:54:15.904 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:15.905 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:54:15.907 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:54:15.909 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 19:54:15.910 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 19:54:15.911 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:54:15.912 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:54:15.912 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 19:54:15.913 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 19:54:15.963 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:54:15.970 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:54:15.972 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 19:54:15.973 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.974 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:15.975 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:54:15.978 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:54:15.980 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 19:54:15.981 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:54:15.983 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:54:15.985 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.986 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.988 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.989 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.990 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.991 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.993 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.994 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.995 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.996 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.997 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.997 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:15.998 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.000 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.001 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.003 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.004 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.005 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.007 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.008 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.009 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.010 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.011 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.012 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.013 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.014 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.015 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.016 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.017 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.017 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.018 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.019 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.021 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.022 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.023 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.025 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.027 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.028 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.030 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.031 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.033 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.035 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.037 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.039 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:16.040 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 55ms reading results.
2025-05-11 19:54:16.042 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:16.043 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 19:54:16.044 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:16.045 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:16.046 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:54:16.046 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:54:16.047 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:54:16.048 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:54:16.050 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:54:16.052 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.053 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.054 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.055 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.056 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.057 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.058 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.059 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.059 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:16.060 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:16.061 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 9ms reading results.
2025-05-11 19:54:16.062 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:16.063 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:54:16.064 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:16.065 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:16.066 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:54:16.066 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:54:16.067 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:54:16.068 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:54:16.070 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:54:16.072 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:16.073 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 19:54:16.074 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:16.075 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 19:54:16.076 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:54:16.078 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:54:16.079 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:54:16.080 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:54:16.080 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:54:16.081 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 19:54:16.083 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 177.3402ms
2025-05-11 19:54:16.084 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:54:16.085 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:54:16.086 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:16.087 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 19:54:16.088 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 207.2052ms
2025-05-11 19:54:22.499 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/66478ee6-481e-41c7-2bb6-08dcf012f04b - null null
2025-05-11 19:54:22.501 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:54:22.502 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:54:22.503 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:54:22.503 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/66478ee6-481e-41c7-2bb6-08dcf012f04b'
2025-05-11 19:54:22.504 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/66478ee6-481e-41c7-2bb6-08dcf012f04b'
2025-05-11 19:54:22.505 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2025-05-11 19:54:22.506 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:54:22.507 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2025-05-11 19:54:22.509 +07:00 [INF] Route matched with {action = "GetById", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 19:54:22.510 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:54:22.511 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:54:22.512 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:22.513 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:54:22.514 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:22.515 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:54:22.518 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:54:22.519 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2025-05-11 19:54:22.520 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2025-05-11 19:54:22.522 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2025-05-11 19:54:22.523 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2025-05-11 19:54:22.524 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2025-05-11 19:54:22.525 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2025-05-11 19:54:22.529 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:54:22.533 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(pt => pt.Patient)
    .SingleOrDefault(ap => ap.AppointmentId == __id_0)'
2025-05-11 19:54:22.537 +07:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-05-11 19:54:22.548 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.AppointmentComment (string) Required, 1], [Property: Appointment.AppointmentConfirmed (string) Required, 2], [Property: Appointment.AppointmentStatus (string) Required MaxLength(50), 3], [Property: Appointment.AppointmentTime (DateTime) Required, 4], [Property: Appointment.DoctorId (Guid) Required FK Index, 5], [Property: Appointment.PatientId (Guid) Required FK Index, 6], [Property: Appointment.PatientStatus (string) Required, 7] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Patient.Avatar (string) Required MaxLength(255), 9], [Property: Patient.Date (DateTime) Required, 10], [Property: Patient.Diseases (string) Required MaxLength(500), 11], [Property: Patient.Email (string) Required MaxLength(100), 12], [Property: Patient.FullName (string) Required MaxLength(100), 13], [Property: Patient.Gender (string) Required, 14], [Property: Patient.Location (string) Required MaxLength(255), 15], [Property: Patient.PaymentId (Guid) Required FK Index, 16], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 17], [Property: Patient.Status (string) Required, 18], [Property: Patient.Time (DateTime) Required, 19] }
        SELECT TOP(2) a.AppointmentId, a.AppointmentComment, a.AppointmentConfirmed, a.AppointmentStatus, a.AppointmentTime, a.DoctorId, a.PatientId, a.PatientStatus, p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status, p.Time
        FROM Appointment AS a
        INNER JOIN Patient AS p ON a.PatientId == p.PatientId
        WHERE a.AppointmentId == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2025-05-11 19:54:22.550 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:54:22.551 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 19:54:22.551 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.552 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.553 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:54:22.553 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:54:22.554 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:54:22.555 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [a].[PatientStatus], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2025-05-11 19:54:22.559 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [a].[PatientStatus], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2025-05-11 19:54:22.563 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:22.577 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:22.582 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:22.583 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.584 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 23ms reading results.
2025-05-11 19:54:22.585 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.586 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:54:22.587 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:54:22.589 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:54:22.589 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:54:22.590 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:54:22.590 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:54:22.591 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModel'.
2025-05-11 19:54:22.592 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API) in 77.1268ms
2025-05-11 19:54:22.594 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2025-05-11 19:54:22.595 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:54:22.595 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.596 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 19:54:22.597 +07:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7169/api/Appointment/66478ee6-481e-41c7-2bb6-08dcf012f04b - null null
2025-05-11 19:54:22.597 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/66478ee6-481e-41c7-2bb6-08dcf012f04b - 200 614 application/json; charset=utf-8 98.0825ms
2025-05-11 19:54:22.599 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:54:22.601 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:54:22.601 +07:00 [DBG] The request is a preflight request.
2025-05-11 19:54:22.602 +07:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7169/api/Appointment/66478ee6-481e-41c7-2bb6-08dcf012f04b - 204 null null 5.0659ms
2025-05-11 19:54:22.604 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7169/api/Appointment/66478ee6-481e-41c7-2bb6-08dcf012f04b - application/json 615
2025-05-11 19:54:22.606 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:54:22.606 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:54:22.607 +07:00 [DBG] PUT requests are not supported
2025-05-11 19:54:22.608 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/66478ee6-481e-41c7-2bb6-08dcf012f04b'
2025-05-11 19:54:22.608 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/66478ee6-481e-41c7-2bb6-08dcf012f04b'
2025-05-11 19:54:22.609 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2025-05-11 19:54:22.610 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:54:22.611 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2025-05-11 19:54:22.612 +07:00 [INF] Route matched with {action = "Update", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Update(System.Guid, CityInfo.API.Models.AppointmentVM) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 19:54:22.614 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:54:22.614 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:54:22.615 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:22.616 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:54:22.617 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:22.618 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:54:22.619 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:54:22.620 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2025-05-11 19:54:22.621 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2025-05-11 19:54:22.621 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2025-05-11 19:54:22.622 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2025-05-11 19:54:22.623 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2025-05-11 19:54:22.623 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2025-05-11 19:54:22.624 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' ...
2025-05-11 19:54:22.625 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' using the name '' in request data ...
2025-05-11 19:54:22.627 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2025-05-11 19:54:22.628 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2025-05-11 19:54:22.633 +07:00 [DBG] Connection id "0HNCGH6OBB7JA", Request id "0HNCGH6OBB7JA:0000000D": started reading request body.
2025-05-11 19:54:22.634 +07:00 [DBG] Connection id "0HNCGH6OBB7JA", Request id "0HNCGH6OBB7JA:0000000D": done reading request body.
2025-05-11 19:54:22.660 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2025-05-11 19:54:22.661 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2025-05-11 19:54:22.662 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' ...
2025-05-11 19:54:22.668 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2025-05-11 19:54:22.671 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:54:22.672 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .SingleOrDefault(ap => ap.AppointmentId == __appointment_AppointmentId_0)'
2025-05-11 19:54:22.676 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.AppointmentComment (string) Required, 1], [Property: Appointment.AppointmentConfirmed (string) Required, 2], [Property: Appointment.AppointmentStatus (string) Required MaxLength(50), 3], [Property: Appointment.AppointmentTime (DateTime) Required, 4], [Property: Appointment.DoctorId (Guid) Required FK Index, 5], [Property: Appointment.PatientId (Guid) Required FK Index, 6], [Property: Appointment.PatientStatus (string) Required, 7] }
        SELECT TOP(2) a.AppointmentId, a.AppointmentComment, a.AppointmentConfirmed, a.AppointmentStatus, a.AppointmentTime, a.DoctorId, a.PatientId, a.PatientStatus
        FROM Appointment AS a
        WHERE a.AppointmentId == @__appointment_AppointmentId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2025-05-11 19:54:22.677 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:54:22.677 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 19:54:22.678 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.678 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.679 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:54:22.680 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:54:22.681 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:54:22.681 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_AppointmentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [a].[PatientStatus]
FROM [Appointment] AS [a]
WHERE [a].[AppointmentId] = @__appointment_AppointmentId_0
2025-05-11 19:54:22.684 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__appointment_AppointmentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [a].[PatientStatus]
FROM [Appointment] AS [a]
WHERE [a].[AppointmentId] = @__appointment_AppointmentId_0
2025-05-11 19:54:22.685 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:22.686 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.687 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 19:54:22.688 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.688 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:54:22.691 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2025-05-11 19:54:22.693 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2025-05-11 19:54:22.703 +07:00 [DBG] The unchanged property 'Appointment.AppointmentStatus' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-11 19:54:22.709 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:22.715 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2025-05-11 19:54:22.759 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.761 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.763 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:54:22.763 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:54:22.765 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:54:22.765 +07:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointment] SET [AppointmentStatus] = @p0
OUTPUT 1
WHERE [AppointmentId] = @p1;
2025-05-11 19:54:22.772 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointment] SET [AppointmentStatus] = @p0
OUTPUT 1
WHERE [AppointmentId] = @p1;
2025-05-11 19:54:22.775 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.776 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 19:54:22.778 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.778 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:54:22.782 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:54:22.784 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2025-05-11 19:54:22.785 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-05-11 19:54:22.786 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API) in 167.5474ms
2025-05-11 19:54:22.787 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2025-05-11 19:54:22.787 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:54:22.788 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.789 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 19:54:22.790 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7169/api/Appointment/66478ee6-481e-41c7-2bb6-08dcf012f04b - 204 null null 185.8526ms
2025-05-11 19:54:22.794 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 19:54:22.795 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:54:22.796 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:54:22.796 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:54:22.797 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 19:54:22.798 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 19:54:22.799 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 19:54:22.800 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:54:22.800 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 19:54:22.801 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 19:54:22.802 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:54:22.803 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:54:22.804 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:22.805 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:54:22.806 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:22.807 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:54:22.808 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:54:22.809 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 19:54:22.809 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 19:54:22.810 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 19:54:22.811 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:54:22.812 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:54:22.813 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 19:54:22.814 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 19:54:22.815 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:54:22.816 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 19:54:22.816 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:22.817 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:22.818 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:22.819 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:54:22.820 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:22.820 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 19:54:22.821 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 19:54:22.822 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:54:22.823 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:54:22.824 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 19:54:22.824 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 19:54:22.825 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:54:22.826 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 19:54:22.827 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:54:22.828 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:54:22.829 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:54:22.829 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:54:22.831 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:54:22.834 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:54:22.835 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 19:54:22.835 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.836 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.837 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:54:22.838 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:54:22.838 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:54:22.839 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 19:54:22.842 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 19:54:22.843 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.844 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 19:54:22.845 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.846 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:54:22.847 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:54:22.848 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:54:22.849 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:54:22.849 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:54:22.850 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:54:22.851 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:54:22.855 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.7888ms
2025-05-11 19:54:22.856 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 19:54:22.856 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:54:22.857 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:22.858 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 19:54:22.859 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 65.8434ms
2025-05-11 19:54:28.488 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 19:54:28.489 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 19:54:28.491 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:54:28.494 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:54:28.494 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:54:28.495 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:54:28.495 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:54:28.497 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:54:28.498 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 19:54:28.498 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 19:54:28.500 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 19:54:28.500 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 19:54:28.502 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:54:28.503 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:54:28.504 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:54:28.504 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:54:28.505 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:54:28.505 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:54:28.509 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 19:54:28.509 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 19:54:28.510 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:54:28.512 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:54:28.514 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:54:28.515 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:54:28.516 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:28.517 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:28.518 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:54:28.520 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:54:28.522 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:28.522 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:54:28.524 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:54:28.525 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:54:28.527 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:54:28.527 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:54:28.528 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 19:54:28.529 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 19:54:28.530 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 19:54:28.531 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 19:54:28.532 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:54:28.533 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:54:28.533 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:54:28.534 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:54:28.535 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 19:54:28.536 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 19:54:28.537 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 19:54:28.538 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 19:54:28.539 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:54:28.540 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:54:28.541 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 19:54:28.542 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 19:54:28.542 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:28.543 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:28.544 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:28.545 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:28.546 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:28.547 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:28.548 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:54:28.549 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:54:28.550 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:28.551 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 19:54:28.551 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 19:54:28.552 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 19:54:28.553 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 19:54:28.554 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 19:54:28.555 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:54:28.556 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:54:28.557 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:54:28.558 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:54:28.559 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 19:54:28.560 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 19:54:28.561 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 19:54:28.561 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 19:54:28.562 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:54:28.563 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:54:28.564 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 19:54:28.564 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 19:54:28.565 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:54:28.566 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:54:28.567 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:54:28.568 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:54:28.568 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:54:28.569 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:54:28.570 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:54:28.571 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:54:28.574 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:54:28.574 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:54:28.576 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(pt => pt.Payment)
    .OrderBy(pt => pt.FullName)
    .Select(pt => new PatientVM{ 
        PatientId = pt.PatientId, 
        Status = pt.Status, 
        Gender = pt.Gender, 
        Avatar = pt.Avatar, 
        FullName = pt.FullName, 
        Date = pt.Date, 
        Time = pt.Time, 
        Location = pt.Location, 
        Email = pt.Email, 
        PhoneNumber = pt.PhoneNumber, 
        Diseases = pt.Diseases, 
        PaymentId = pt.PaymentId, 
        PaymentName = pt.Payment.PaymentName, 
        Age = DateTime.Now.Year - pt.Date.Year - DateTime.Now < pt.Date.AddYears(DateTime.Now.Year - pt.Date.Year) ? 1 : 0 
    }
    )'
2025-05-11 19:54:28.576 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(pt => pt.Payment)
    .OrderBy(pt => pt.FullName)
    .Skip(__p_0)
    .Take(__p_1)
    .Select(pt => new PatientVM{ 
        PatientId = pt.PatientId, 
        Status = pt.Status, 
        Gender = pt.Gender, 
        Avatar = pt.Avatar, 
        FullName = pt.FullName, 
        Date = pt.Date, 
        Time = pt.Time, 
        Location = pt.Location, 
        Email = pt.Email, 
        PhoneNumber = pt.PhoneNumber, 
        Diseases = pt.Diseases, 
        PaymentId = pt.PaymentId, 
        PaymentName = pt.Payment.PaymentName, 
        Age = DateTime.Now.Year - pt.Date.Year - DateTime.Now < pt.Date.AddYears(DateTime.Now.Year - pt.Date.Year) ? 1 : 0 
    }
    )'
2025-05-11 19:54:28.582 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PatientVM>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            PatientId -> 0
            Status -> 1
            Gender -> 2
            Avatar -> 3
            FullName -> 4
            Date -> 5
            Time -> 6
            Location -> 7
            Email -> 8
            PhoneNumber -> 9
            Diseases -> 10
            PaymentId -> 11
            PaymentName -> 12
            Age -> 13
        SELECT p.PatientId, p.Status, p.Gender, p.Avatar, p.FullName, p.Date, p.Time, p.Location, p.Email, p.PhoneNumber, p.Diseases, p.PaymentId, p0.PaymentName, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM Patient AS p
        INNER JOIN Payment AS p0 ON p.PaymentId == p0.PaymentId
        ORDER BY p.FullName ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PatientVM>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2025-05-11 19:54:28.582 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PatientVM>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            PatientId -> 0
            Status -> 1
            Gender -> 2
            Avatar -> 3
            FullName -> 4
            Date -> 5
            Time -> 6
            Location -> 7
            Email -> 8
            PhoneNumber -> 9
            Diseases -> 10
            PaymentId -> 11
            PaymentName -> 12
            Age -> 13
        SELECT t.PatientId, t.Status, t.Gender, t.Avatar, t.FullName, t.Date, t.Time, t.Location, t.Email, t.PhoneNumber, t.Diseases, t.PaymentId, p0.PaymentName, (DATEPART(year, GETDATE()) - DATEPART(year, t.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, t.Date) AS int), t.Date) THEN 1
            ELSE 0
        END AS Age
        FROM 
        (
            SELECT p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status, p.Time
            FROM Patient AS p
            ORDER BY p.FullName ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        INNER JOIN Payment AS p0 ON t.PaymentId == p0.PaymentId
        ORDER BY t.FullName ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PatientVM>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2025-05-11 19:54:28.584 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:54:28.584 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:54:28.585 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 19:54:28.585 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 19:54:28.585 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:28.586 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:28.587 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:28.588 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:28.588 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:54:28.589 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:54:28.590 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:54:28.591 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:54:28.592 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 19:54:28.593 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 19:54:28.593 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 19:54:28.594 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 19:54:28.602 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 19:54:28.602 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 19:54:28.605 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:28.605 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:28.606 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 19:54:28.606 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 19:54:28.607 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:28.608 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:28.609 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 19:54:28.609 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 19:54:28.610 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:54:28.611 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:54:28.612 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:54:28.615 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:54:28.615 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:54:28.616 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:54:28.616 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:54:28.616 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:54:28.617 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:54:28.617 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:54:28.618 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:54:28.619 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:54:28.623 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 99.7999ms
2025-05-11 19:54:28.625 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:54:28.626 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:54:28.627 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:28.628 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 19:54:28.628 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 103.449ms
2025-05-11 19:54:28.629 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 139.9513ms
2025-05-11 19:54:28.630 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:54:28.632 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:54:28.633 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:54:28.634 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 19:54:28.635 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 146.79ms
2025-05-11 19:57:42.096 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 19:57:42.097 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 19:57:42.108 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:57:42.109 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:57:42.110 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:57:42.110 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:57:42.111 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:57:42.111 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:57:42.112 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 19:57:42.112 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 19:57:42.113 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 19:57:42.114 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 19:57:42.115 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:57:42.115 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:57:42.116 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:57:42.116 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:57:42.117 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:57:42.118 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:57:42.118 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 19:57:42.119 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 19:57:42.120 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:57:42.121 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:57:42.122 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:57:42.123 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:57:42.124 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:42.124 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:42.125 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:57:42.127 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:57:42.128 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:42.129 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:42.130 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:57:42.131 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:57:42.132 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:57:42.133 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:57:42.134 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 19:57:42.136 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 19:57:42.137 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 19:57:42.139 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 19:57:42.140 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:57:42.146 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:57:42.147 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:57:42.150 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:57:42.151 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 19:57:42.152 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 19:57:42.152 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 19:57:42.153 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 19:57:42.154 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:57:42.155 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:57:42.155 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 19:57:42.156 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 19:57:42.157 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:42.158 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:42.159 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:42.159 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:42.160 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:42.161 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:42.162 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:57:42.162 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:57:42.163 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:42.164 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:42.165 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 19:57:42.166 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 19:57:42.166 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 19:57:42.167 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 19:57:42.168 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:57:42.169 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:57:42.169 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:57:42.170 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:57:42.171 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 19:57:42.172 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 19:57:42.172 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 19:57:42.173 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 19:57:42.174 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:57:42.174 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:57:42.175 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 19:57:42.176 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 19:57:42.177 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:57:42.178 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:57:42.179 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:57:42.179 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:57:42.180 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:57:42.181 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:57:42.181 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:57:42.182 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:57:42.185 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:57:42.185 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:57:42.187 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:57:42.187 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:57:42.187 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 19:57:42.188 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 19:57:42.188 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:42.189 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:42.190 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:42.190 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:42.191 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:57:42.192 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:57:42.192 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:57:42.193 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:57:42.194 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:57:42.194 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:57:42.195 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 19:57:42.196 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 19:57:42.203 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 19:57:42.203 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 19:57:42.205 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:42.206 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:42.207 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 19:57:42.207 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 19:57:42.208 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:42.209 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:42.210 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 19:57:42.211 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 19:57:42.212 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:57:42.213 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:57:42.214 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:57:42.215 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:57:42.215 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:57:42.216 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:57:42.216 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:57:42.217 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:57:42.217 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:57:42.217 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:57:42.218 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:57:42.219 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:57:42.220 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 89.0389ms
2025-05-11 19:57:42.225 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:57:42.228 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:57:42.231 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:42.232 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 19:57:42.233 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 135.8493ms
2025-05-11 19:57:42.233 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 103.5426ms
2025-05-11 19:57:42.236 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:57:42.237 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:57:42.238 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:42.239 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 19:57:42.240 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 143.7927ms
2025-05-11 19:57:48.219 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 19:57:48.219 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 19:57:48.222 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:57:48.224 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:57:48.225 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:57:48.226 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:57:48.228 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:57:48.229 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:57:48.229 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 19:57:48.230 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 19:57:48.232 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 19:57:48.231 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 19:57:48.234 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:57:48.236 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:57:48.236 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:57:48.238 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:57:48.239 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:57:48.240 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:57:48.241 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 19:57:48.243 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 19:57:48.245 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:57:48.248 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:57:48.249 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:57:48.250 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:57:48.251 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:48.252 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:48.254 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:57:48.257 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:48.256 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:57:48.263 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:57:48.264 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:48.266 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:57:48.277 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:57:48.278 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 19:57:48.282 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:57:48.282 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 19:57:48.284 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 19:57:48.285 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:57:48.290 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 19:57:48.290 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:57:48.292 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:57:48.293 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 19:57:48.294 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:57:48.294 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 19:57:48.296 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 19:57:48.296 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:57:48.297 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 19:57:48.298 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 19:57:48.299 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:57:48.300 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:48.301 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 19:57:48.302 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:48.303 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:48.304 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:48.305 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:48.305 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:57:48.306 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:48.307 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:48.308 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:57:48.309 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 19:57:48.309 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:48.310 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 19:57:48.311 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 19:57:48.312 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:57:48.312 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 19:57:48.313 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:57:48.314 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:57:48.315 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 19:57:48.315 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:57:48.316 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 19:57:48.317 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 19:57:48.317 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:57:48.318 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 19:57:48.319 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 19:57:48.320 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:57:48.320 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:57:48.321 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 19:57:48.322 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:57:48.323 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:57:48.324 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:57:48.324 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:57:48.325 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:57:48.326 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:57:48.327 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:57:48.327 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:57:48.329 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:57:48.330 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 19:57:48.330 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:57:48.330 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:48.332 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:57:48.332 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:48.332 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 19:57:48.333 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:57:48.334 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:48.334 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:57:48.335 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:48.336 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:57:48.337 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:57:48.337 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 19:57:48.338 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:57:48.339 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:57:48.339 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 19:57:48.340 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 19:57:48.342 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:48.343 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 19:57:48.343 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 19:57:48.344 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:48.345 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:48.346 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 19:57:48.346 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 19:57:48.347 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:57:48.348 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:48.349 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:57:48.350 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 19:57:48.350 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:57:48.351 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:57:48.352 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:57:48.353 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:57:48.353 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:57:48.354 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:57:48.355 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:57:48.355 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:57:48.356 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:57:48.359 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:57:48.359 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 96.4353ms
2025-05-11 19:57:48.397 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 120.3396ms
2025-05-11 19:57:48.398 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:57:48.399 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 19:57:48.401 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:57:48.401 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:57:48.402 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:48.403 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:48.404 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 19:57:48.404 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 19:57:48.405 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 186.9553ms
2025-05-11 19:57:48.406 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 187.4327ms
2025-05-11 19:57:49.584 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 19:57:49.586 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 19:57:49.586 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 19:57:49.587 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:57:49.588 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:57:49.590 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:57:49.591 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:57:49.592 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:57:49.593 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:57:49.594 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:57:49.594 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:57:49.595 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:57:49.596 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 19:57:49.596 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 19:57:49.597 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 19:57:49.598 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 19:57:49.599 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 19:57:49.600 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 19:57:49.601 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 19:57:49.602 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:57:49.603 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:57:49.604 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:57:49.605 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:57:49.606 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:57:49.607 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 19:57:49.608 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:57:49.609 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:57:49.611 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 19:57:49.612 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 19:57:49.613 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 19:57:49.614 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:57:49.615 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:57:49.616 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:57:49.617 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:57:49.617 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:57:49.618 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:57:49.619 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:49.620 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:49.621 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:49.623 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:57:49.625 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:57:49.626 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:57:49.628 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:49.629 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:49.630 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:49.631 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:57:49.632 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:57:49.633 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:57:49.634 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:57:49.634 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:57:49.635 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:57:49.636 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 19:57:49.637 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 19:57:49.638 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 19:57:49.639 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 19:57:49.639 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 19:57:49.640 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 19:57:49.641 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 19:57:49.642 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:57:49.642 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:57:49.643 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:57:49.644 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:57:49.645 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:57:49.645 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:57:49.646 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 19:57:49.647 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 19:57:49.647 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 19:57:49.648 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 19:57:49.649 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 19:57:49.650 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 19:57:49.651 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:57:49.651 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:57:49.652 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:57:49.654 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:57:49.654 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:57:49.655 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 19:57:49.655 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 19:57:49.655 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 19:57:49.656 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:49.657 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.658 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.658 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:49.659 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.660 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.660 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:49.662 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:57:49.662 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:57:49.663 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:57:49.663 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:57:49.664 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:57:49.665 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 19:57:49.665 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 19:57:49.666 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 19:57:49.666 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 19:57:49.667 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 19:57:49.668 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:57:49.669 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 19:57:49.672 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:57:49.672 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:57:49.672 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:57:49.674 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.674 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 19:57:49.674 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 19:57:49.675 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.676 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.677 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 19:57:49.678 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.678 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 19:57:49.679 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:57:49.680 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.680 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.681 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 19:57:49.682 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.682 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 19:57:49.683 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:57:49.684 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.685 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:57:49.686 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:57:49.686 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.687 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:57:49.688 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:57:49.689 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.689 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:57:49.690 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:57:49.691 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.691 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:57:49.693 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:57:49.693 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.693 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:57:49.694 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:57:49.695 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.695 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:57:49.696 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 19:57:49.696 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.697 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 65.4423ms
2025-05-11 19:57:49.698 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.698 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.699 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:57:49.700 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.700 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.701 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:57:49.701 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:57:49.702 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.703 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.703 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:57:49.704 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.705 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 19:57:49.706 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 19:57:49.706 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.707 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 121.1598ms
2025-05-11 19:57:49.708 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 19:57:49.709 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.713 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.714 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.715 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.716 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.716 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 19:57:49.717 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.718 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.719 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.719 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 19:57:49.720 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.721 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.722 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.722 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 19:57:49.723 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.724 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:57:49.725 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.727 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:57:49.728 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.728 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:57:49.729 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.729 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:57:49.730 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.731 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:57:49.732 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.733 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:57:49.734 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.737 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 105.5347ms
2025-05-11 19:57:49.737 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.738 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 19:57:49.739 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.740 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:57:49.741 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.741 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.742 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.743 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 19:57:49.744 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.745 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 161.1664ms
2025-05-11 19:57:49.745 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.748 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.749 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.749 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.750 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.751 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.753 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 78ms reading results.
2025-05-11 19:57:49.754 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.755 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 19:57:49.756 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.757 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.758 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:57:49.758 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:57:49.759 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:57:49.760 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:57:49.763 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:57:49.765 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.766 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.767 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.769 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.771 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.772 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.773 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.775 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.776 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.777 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.778 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 13ms reading results.
2025-05-11 19:57:49.780 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.780 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:57:49.782 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.783 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.785 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:57:49.786 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:57:49.787 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:57:49.788 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:57:49.790 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:57:49.791 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.791 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 19:57:49.792 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.793 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:57:49.794 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:57:49.795 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:57:49.796 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:57:49.796 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:57:49.797 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:57:49.798 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 19:57:49.798 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 165.6326ms
2025-05-11 19:57:49.799 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:57:49.800 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 19:57:49.801 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:57:49.803 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:57:49.803 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.804 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:57:49.805 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 19:57:49.805 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:57:49.807 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 220.6056ms
2025-05-11 19:57:49.807 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 19:57:49.810 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 19:57:49.811 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:57:49.811 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:57:49.812 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:57:49.812 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 19:57:49.813 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:57:49.814 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:57:49.815 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:49.817 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:57:49.818 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:57:49.819 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:57:49.820 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:57:49.821 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 19:57:49.822 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 19:57:49.822 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:57:49.823 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:57:49.824 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 19:57:49.825 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 19:57:49.826 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:57:49.827 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:57:49.828 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 19:57:49.828 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.829 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.830 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:57:49.831 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:57:49.832 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:57:49.832 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:57:49.834 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:57:49.835 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.836 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.837 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.837 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.838 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.839 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.839 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.840 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.841 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.842 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.843 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.843 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.844 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.845 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.846 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.846 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.847 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.848 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.849 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.850 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.851 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.851 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.852 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.853 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.854 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.855 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.855 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.856 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.857 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.858 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.858 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.859 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.860 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.861 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.861 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.863 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.863 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.864 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.865 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.866 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.866 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.867 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.868 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.869 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.869 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 34ms reading results.
2025-05-11 19:57:49.870 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.871 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:57:49.872 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.873 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.874 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:57:49.874 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:57:49.875 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:57:49.876 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:57:49.878 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:57:49.879 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.879 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.880 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.881 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.881 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.882 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.883 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.884 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.885 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:57:49.885 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.886 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 19:57:49.887 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.888 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:57:49.889 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.890 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.890 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:57:49.891 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:57:49.892 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:57:49.893 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:57:49.894 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:57:49.895 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.896 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 19:57:49.896 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.897 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:57:49.898 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:57:49.900 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:57:49.900 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:57:49.901 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:57:49.901 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:57:49.902 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 19:57:49.903 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 83.869ms
2025-05-11 19:57:49.904 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:57:49.905 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:57:49.906 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:57:49.907 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 19:57:49.907 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 107.602ms
2025-05-11 19:58:02.300 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/8 - null null
2025-05-11 19:58:02.302 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:58:02.303 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:58:02.303 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:58:02.304 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/8'
2025-05-11 19:58:02.305 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/8'
2025-05-11 19:58:02.306 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:58:02.307 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:58:02.307 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:58:02.308 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 19:58:02.309 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:58:02.310 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:58:02.311 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:58:02.312 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:58:02.313 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:58:02.314 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:58:02.315 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:58:02.316 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 19:58:02.317 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 19:58:02.317 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:58:02.318 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:58:02.319 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 19:58:02.320 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 19:58:02.321 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:58:02.324 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:58:02.324 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 19:58:02.325 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:58:02.326 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:58:02.328 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:58:02.328 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:58:02.329 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:58:02.330 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 19:58:02.337 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 19:58:02.338 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:58:02.339 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 19:58:02.340 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:58:02.340 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:58:02.341 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:58:02.343 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:58:02.343 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:58:02.344 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:58:02.344 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:58:02.345 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:58:02.346 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 32.3153ms
2025-05-11 19:58:02.348 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:58:02.348 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:58:02.349 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:58:02.350 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 19:58:02.351 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/8 - 200 4956 application/json; charset=utf-8 51.1612ms
2025-05-11 19:58:06.266 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 19:58:06.268 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:58:06.269 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:58:06.269 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:58:06.270 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 19:58:06.271 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 19:58:06.272 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:58:06.273 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:58:06.273 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:58:06.274 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 19:58:06.275 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:58:06.275 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:58:06.276 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:58:06.277 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:58:06.278 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:58:06.279 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:58:06.279 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:58:06.280 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 19:58:06.281 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 19:58:06.281 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:58:06.282 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:58:06.283 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 19:58:06.284 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 19:58:06.285 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:58:06.287 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:58:06.288 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 19:58:06.288 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:58:06.289 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:58:06.290 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:58:06.291 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:58:06.292 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:58:06.293 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 19:58:06.298 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 19:58:06.299 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:58:06.300 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 19:58:06.300 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:58:06.301 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:58:06.302 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:58:06.304 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:58:06.305 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:58:06.305 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:58:06.305 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:58:06.306 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:58:06.307 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 28.6468ms
2025-05-11 19:58:06.308 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:58:06.309 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:58:06.309 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:58:06.310 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 19:58:06.311 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 44.9467ms
2025-05-11 19:59:03.712 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 19:59:03.712 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 19:59:03.712 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 19:59:03.720 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:59:03.722 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:59:03.724 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:59:03.724 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:59:03.725 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:59:03.726 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:59:03.726 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:59:03.726 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:59:03.728 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:59:03.728 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 19:59:03.729 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 19:59:03.730 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 19:59:03.730 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 19:59:03.731 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 19:59:03.732 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 19:59:03.733 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 19:59:03.733 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:59:03.734 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:59:03.735 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:59:03.736 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:59:03.736 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:59:03.737 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 19:59:03.738 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:59:03.738 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:59:03.739 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 19:59:03.740 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 19:59:03.740 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 19:59:03.741 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:59:03.743 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:59:03.745 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:59:03.745 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:59:03.746 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:59:03.748 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:59:03.749 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:03.750 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:03.751 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:03.756 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:59:03.754 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:59:03.753 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:59:03.757 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:03.758 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:03.759 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:03.760 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:59:03.761 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:59:03.763 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:59:03.764 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:59:03.765 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:59:03.765 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:59:03.766 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 19:59:03.767 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 19:59:03.767 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 19:59:03.768 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 19:59:03.769 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 19:59:03.769 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 19:59:03.770 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:03.771 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:03.772 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 19:59:03.773 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:03.774 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:03.775 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:59:03.775 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 19:59:03.776 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 19:59:03.776 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:59:03.777 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:03.778 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:03.779 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 19:59:03.780 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:59:03.781 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:59:03.781 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 19:59:03.782 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:59:03.784 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:59:03.785 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:59:03.785 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 19:59:03.786 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 19:59:03.786 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 19:59:03.787 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.788 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.789 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 19:59:03.790 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.790 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.791 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:59:03.792 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:03.793 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:03.793 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:59:03.794 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:59:03.795 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:59:03.795 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:59:03.796 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 19:59:03.797 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 19:59:03.797 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 19:59:03.798 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:59:03.799 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 19:59:03.800 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 19:59:03.803 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 19:59:03.804 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:59:03.804 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:59:03.805 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:59:03.807 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.807 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 19:59:03.807 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 19:59:03.808 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.809 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.810 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 19:59:03.810 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.811 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 19:59:03.811 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:59:03.812 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.814 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.815 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 19:59:03.815 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.816 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 19:59:03.817 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:59:03.817 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.818 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:59:03.819 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:59:03.820 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.821 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:59:03.822 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:59:03.822 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.823 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:59:03.823 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:59:03.824 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.824 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:59:03.826 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:59:03.826 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.827 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:59:03.828 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:59:03.829 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.829 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:59:03.830 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 19:59:03.831 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 69.835ms
2025-05-11 19:59:03.831 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.830 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.837 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:59:03.838 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.838 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.839 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:59:03.840 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:03.841 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.841 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.842 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:59:03.843 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.843 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 19:59:03.844 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 19:59:03.845 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.846 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 133.8133ms
2025-05-11 19:59:03.847 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 19:59:03.848 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.852 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.854 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.855 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.856 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.857 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 19:59:03.857 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.858 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.859 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.859 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 19:59:03.860 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.862 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.862 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.863 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 19:59:03.863 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.864 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:59:03.865 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.866 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:59:03.866 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.867 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:59:03.868 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.868 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:59:03.869 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.869 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:59:03.870 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.871 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:59:03.871 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.873 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 110.8444ms
2025-05-11 19:59:03.874 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.875 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 19:59:03.876 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.876 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:59:03.877 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.878 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.878 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.879 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 19:59:03.880 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.881 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 169.6809ms
2025-05-11 19:59:03.881 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.884 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.885 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.886 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.887 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.888 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.889 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.890 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 83ms reading results.
2025-05-11 19:59:03.892 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.893 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 19:59:03.895 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.898 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.899 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:03.900 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:59:03.901 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:59:03.903 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:59:03.907 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:59:03.909 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.911 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.911 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.912 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.913 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.914 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.915 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.916 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.917 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.918 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.918 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 9ms reading results.
2025-05-11 19:59:03.919 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.920 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:59:03.921 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.922 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.924 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:03.924 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:59:03.925 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:59:03.927 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:59:03.930 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:59:03.932 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.932 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 19:59:03.933 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.934 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:59:03.935 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:59:03.936 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:59:03.936 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:59:03.937 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:59:03.938 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:59:03.939 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 19:59:03.940 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 179.4371ms
2025-05-11 19:59:03.940 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:59:03.941 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 19:59:03.941 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:59:03.943 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:59:03.944 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.944 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:59:03.945 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 19:59:03.946 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:59:03.947 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 234.7025ms
2025-05-11 19:59:03.947 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 19:59:03.950 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 19:59:03.951 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:59:03.952 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:59:03.953 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:59:03.954 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 19:59:03.955 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:59:03.956 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:59:03.957 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:03.959 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:59:03.960 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:03.961 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:59:03.962 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:59:03.962 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 19:59:03.963 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 19:59:03.964 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:03.965 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:03.966 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 19:59:03.966 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:03.967 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:59:03.968 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:59:03.969 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 19:59:03.970 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.971 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:03.972 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:03.973 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:59:03.974 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:59:03.975 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:59:03.976 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:59:03.977 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.979 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.980 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.981 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.981 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.982 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.983 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.983 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.984 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.985 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.986 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.987 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.988 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.989 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.989 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.990 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.991 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.992 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.993 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.994 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.994 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.995 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.996 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.996 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.997 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.998 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:03.998 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.000 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.001 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.002 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.003 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.004 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.004 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.005 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.006 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.007 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.008 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.009 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.010 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.010 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.011 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.012 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.013 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.014 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:04.015 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 37ms reading results.
2025-05-11 19:59:04.016 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:04.017 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:59:04.018 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:04.019 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:04.020 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:04.022 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:59:04.022 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:59:04.023 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:59:04.025 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:59:04.026 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.027 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.029 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.029 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.031 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.032 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.032 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.033 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.034 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:04.035 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:04.035 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 9ms reading results.
2025-05-11 19:59:04.036 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:04.037 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:59:04.038 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:04.038 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:04.039 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:04.040 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:59:04.041 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:59:04.042 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:59:04.043 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:59:04.045 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:04.046 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 19:59:04.047 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:04.048 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:59:04.049 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:59:04.050 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:59:04.051 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:59:04.051 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:59:04.052 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:59:04.052 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 19:59:04.053 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 92.4895ms
2025-05-11 19:59:04.054 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:59:04.055 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:59:04.056 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:04.057 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 19:59:04.057 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 116.473ms
2025-05-11 19:59:11.550 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 19:59:11.551 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 19:59:11.551 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 19:59:11.553 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:59:11.556 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:59:11.558 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:59:11.559 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:59:11.560 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:59:11.560 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:59:11.561 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:59:11.561 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:59:11.563 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:59:11.564 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 19:59:11.565 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 19:59:11.566 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 19:59:11.567 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 19:59:11.568 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 19:59:11.569 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 19:59:11.571 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 19:59:11.572 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:59:11.573 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:59:11.573 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:59:11.574 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:59:11.575 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:59:11.576 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 19:59:11.577 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:59:11.577 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:59:11.583 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 19:59:11.584 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 19:59:11.584 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 19:59:11.591 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:59:11.597 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:59:11.595 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:59:11.592 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:59:11.599 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:11.603 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:59:11.601 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:59:11.600 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:59:11.604 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:11.605 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:11.606 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:11.608 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:59:11.609 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:59:11.611 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:59:11.612 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:59:11.613 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:11.614 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:11.615 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 19:59:11.617 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:59:11.618 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:59:11.619 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 19:59:11.621 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:59:11.622 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 19:59:11.623 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 19:59:11.623 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 19:59:11.625 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 19:59:11.626 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:59:11.626 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 19:59:11.628 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 19:59:11.629 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 19:59:11.630 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:11.631 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:11.632 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 19:59:11.633 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:11.634 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:11.635 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 19:59:11.635 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 19:59:11.636 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 19:59:11.637 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:59:11.638 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:11.639 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:11.640 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 19:59:11.641 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:59:11.642 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:59:11.642 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 19:59:11.644 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:59:11.646 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:59:11.646 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:59:11.647 +07:00 [DBG] Created DbConnection. (3ms).
2025-05-11 19:59:11.648 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 19:59:11.649 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 19:59:11.649 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.650 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.651 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 19:59:11.652 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.653 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.654 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 19:59:11.655 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:11.656 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:11.656 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 19:59:11.657 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:59:11.658 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:59:11.659 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 19:59:11.660 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-11 19:59:11.661 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-11 19:59:11.662 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:59:11.663 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:59:11.663 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 19:59:11.664 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 19:59:11.667 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 19:59:11.668 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 19:59:11.668 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:59:11.669 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:59:11.670 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.670 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 19:59:11.670 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 19:59:11.671 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.672 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.673 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:59:11.674 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.675 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 19:59:11.676 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:59:11.676 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.677 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.678 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 19:59:11.678 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.679 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 19:59:11.680 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 19:59:11.681 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.682 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:59:11.683 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:59:11.683 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.685 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:59:11.686 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:59:11.686 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.687 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:59:11.688 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 19:59:11.688 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.689 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:59:11.689 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.690 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.691 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:59:11.691 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.692 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.693 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:59:11.694 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:11.695 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.696 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:59:11.696 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 77.2165ms
2025-05-11 19:59:11.697 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.698 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 19:59:11.698 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 19:59:11.699 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.700 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 19:59:11.700 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:59:11.701 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.703 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.704 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.704 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 19:59:11.705 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.706 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 154.9317ms
2025-05-11 19:59:11.707 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 19:59:11.707 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.710 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.711 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.712 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 19:59:11.712 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.714 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.715 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.716 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 19:59:11.717 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.718 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:59:11.718 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.720 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:59:11.720 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.721 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:59:11.722 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.723 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:59:11.723 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.724 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:59:11.725 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.725 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 19:59:11.726 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.727 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 119.5646ms
2025-05-11 19:59:11.728 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.730 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 19:59:11.730 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.731 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:59:11.732 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.732 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.733 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.733 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 19:59:11.734 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.736 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.735 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 184.2426ms
2025-05-11 19:59:11.738 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.740 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.741 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.743 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.744 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.745 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.746 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.747 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.748 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.749 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.752 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 81ms reading results.
2025-05-11 19:59:11.753 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.754 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 19:59:11.756 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.757 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.758 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:11.759 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:59:11.760 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:59:11.760 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:59:11.765 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:59:11.767 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.768 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.769 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.770 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.771 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.772 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.773 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.774 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.774 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.775 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.776 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 9ms reading results.
2025-05-11 19:59:11.778 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.779 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 19:59:11.780 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.781 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.782 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:11.783 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:59:11.785 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 19:59:11.786 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:59:11.789 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:59:11.791 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.792 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 19:59:11.793 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.794 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:59:11.795 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:59:11.797 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:59:11.797 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:59:11.798 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:59:11.799 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:59:11.800 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 19:59:11.801 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 184.1184ms
2025-05-11 19:59:11.802 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:59:11.803 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 19:59:11.803 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:59:11.806 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 19:59:11.806 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.807 +07:00 [INF] CORS policy execution successful.
2025-05-11 19:59:11.808 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 19:59:11.808 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 19:59:11.809 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 258.3347ms
2025-05-11 19:59:11.810 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 19:59:11.813 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 19:59:11.815 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:59:11.816 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 19:59:11.816 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:59:11.817 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 19:59:11.818 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 19:59:11.819 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 19:59:11.820 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:11.822 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 19:59:11.822 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 19:59:11.823 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:59:11.824 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 19:59:11.825 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 19:59:11.826 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 19:59:11.827 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:11.827 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:11.828 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 19:59:11.829 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 19:59:11.830 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 19:59:11.832 +07:00 [DBG] Creating DbConnection.
2025-05-11 19:59:11.832 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 19:59:11.833 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.834 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.834 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:11.835 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:59:11.836 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:59:11.837 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:59:11.839 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 19:59:11.840 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.841 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.842 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.843 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.843 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.844 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.845 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.846 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.847 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.848 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.849 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.849 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.850 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.851 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.852 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.853 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.854 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.855 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.855 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.856 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.857 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.858 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.858 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.859 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.860 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.861 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.862 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.862 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.863 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.864 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.865 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.866 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.867 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.868 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.869 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.869 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.870 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.871 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.872 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.873 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.873 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.874 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.875 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.876 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.876 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 36ms reading results.
2025-05-11 19:59:11.877 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.878 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:59:11.879 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.880 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.880 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:11.881 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:59:11.881 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:59:11.882 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:59:11.884 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 19:59:11.885 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.886 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.886 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.887 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.888 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.888 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.889 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.890 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.891 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 19:59:11.891 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.892 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 19:59:11.893 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.893 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:59:11.894 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.895 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.896 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 19:59:11.896 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 19:59:11.897 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 19:59:11.898 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:59:11.899 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 19:59:11.900 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.901 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 19:59:11.902 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.903 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 19:59:11.904 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 19:59:11.905 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 19:59:11.905 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 19:59:11.906 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 19:59:11.906 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 19:59:11.907 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 19:59:11.908 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 84.5127ms
2025-05-11 19:59:11.909 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 19:59:11.909 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 19:59:11.910 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 19:59:11.911 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 19:59:11.912 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 109.1441ms
2025-05-11 20:00:08.357 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:00:08.358 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:00:08.357 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:00:08.371 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:00:08.372 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:00:08.375 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:00:08.375 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:00:08.376 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:00:08.377 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:00:08.377 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:00:08.378 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:00:08.378 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:00:08.379 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:00:08.379 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:00:08.381 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:00:08.381 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:00:08.382 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:00:08.383 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:00:08.384 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:00:08.385 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:00:08.386 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:00:08.387 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:00:08.388 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:00:08.389 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:00:08.389 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:00:08.390 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:00:08.390 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:00:08.391 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:00:08.392 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:00:08.393 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:00:08.394 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:00:08.395 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:00:08.396 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:00:08.397 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:00:08.398 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:00:08.399 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:00:08.400 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:00:08.401 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:00:08.402 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:00:08.404 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:00:08.405 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:00:08.406 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:00:08.407 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:00:08.421 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:00:08.422 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:00:08.424 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:00:08.425 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:00:08.427 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:00:08.428 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:00:08.429 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:00:08.431 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:00:08.431 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:00:08.432 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:00:08.433 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:00:08.434 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:00:08.434 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:00:08.436 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:00:08.437 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:00:08.438 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:00:08.440 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:00:08.441 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:00:08.442 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:00:08.443 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:00:08.444 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:00:08.444 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:00:08.445 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:00:08.446 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:00:08.447 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:00:08.447 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:00:08.448 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:00:08.450 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:00:08.451 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:00:08.451 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:00:08.454 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:00:08.455 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:00:08.455 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:00:08.456 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:00:08.456 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:00:08.457 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:00:08.458 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.458 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.459 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:00:08.460 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.461 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.461 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:00:08.462 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:00:08.463 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:00:08.464 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:00:08.464 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:00:08.465 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:00:08.466 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:00:08.466 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:00:08.467 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:00:08.468 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:00:08.469 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:00:08.471 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:00:08.471 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:00:08.474 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:00:08.475 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:00:08.476 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:00:08.476 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:00:08.478 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.479 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:00:08.480 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:00:08.480 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.481 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:00:08.482 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.483 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.484 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:00:08.485 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2025-05-11 20:00:08.486 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.487 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:00:08.488 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.489 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.490 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:00:08.490 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:00:08.491 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.492 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:00:08.493 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:00:08.494 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.495 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:00:08.496 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:00:08.497 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.498 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:00:08.499 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:00:08.500 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.501 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:00:08.502 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:00:08.502 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.503 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:00:08.503 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:00:08.504 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.505 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:00:08.506 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.507 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.509 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.508 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 81.2964ms
2025-05-11 20:00:08.534 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.535 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:00:08.536 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:00:08.536 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.537 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:00:08.538 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:00:08.538 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.539 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:00:08.540 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.541 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.541 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:00:08.542 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:00:08.543 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.545 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 187.7489ms
2025-05-11 20:00:08.546 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.550 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.550 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:00:08.551 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.552 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.553 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.554 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:00:08.555 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.556 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.557 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.558 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:00:08.559 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.559 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:00:08.560 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.562 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:00:08.564 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.564 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:00:08.565 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.566 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:00:08.566 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.567 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:00:08.568 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.569 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:00:08.570 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.573 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.573 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 149.6084ms
2025-05-11 20:00:08.578 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.581 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:00:08.582 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.583 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:00:08.583 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.584 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.585 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.586 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:00:08.586 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.587 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 230.2212ms
2025-05-11 20:00:08.588 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.591 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.592 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.593 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.594 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.596 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.597 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.598 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.598 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 120ms reading results.
2025-05-11 20:00:08.599 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.600 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:00:08.601 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.603 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.604 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:00:08.604 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:00:08.605 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:00:08.606 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:00:08.611 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:00:08.612 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.613 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.614 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.614 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.615 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.620 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.620 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.621 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.622 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.626 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.628 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 15ms reading results.
2025-05-11 20:00:08.629 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.631 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:00:08.634 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.635 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.636 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:00:08.637 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:00:08.638 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:00:08.639 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:00:08.643 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:00:08.691 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.698 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 20:00:08.701 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.706 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2025-05-11 20:00:08.711 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:00:08.718 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:00:08.719 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:00:08.720 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:00:08.722 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:00:08.723 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:00:08.725 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 300.5075ms
2025-05-11 20:00:08.727 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:00:08.728 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:00:08.729 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:00:08.731 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:00:08.745 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.747 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:00:08.752 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:00:08.751 +07:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-05-11 20:00:08.757 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:00:08.760 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 401.8362ms
2025-05-11 20:00:08.761 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:00:08.770 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:00:08.774 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:00:08.775 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:00:08.775 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:00:08.778 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:00:08.780 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:00:08.788 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:00:08.800 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:00:08.807 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:00:08.819 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:00:08.824 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:00:08.848 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:00:08.852 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:00:08.853 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:00:08.854 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:00:08.856 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:00:08.857 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:00:08.870 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:00:08.877 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:00:08.878 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:00:08.888 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.893 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.895 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:00:08.896 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:00:08.898 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:00:08.899 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:00:08.903 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:00:08.905 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.906 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.907 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.908 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.909 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.910 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.911 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.912 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.913 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.914 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.916 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.917 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.918 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.919 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.920 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.922 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.923 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.924 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.925 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.926 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.926 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.927 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.928 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.928 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.929 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.930 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.931 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.932 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.934 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.935 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.936 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.937 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.938 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.938 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.939 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.940 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.941 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.942 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.943 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.944 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.944 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.945 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.946 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.947 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.949 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 43ms reading results.
2025-05-11 20:00:08.950 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.951 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:00:08.953 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.954 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.955 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:00:08.956 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:00:08.957 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:00:08.958 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:00:08.960 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:00:08.961 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.962 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.965 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.966 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.967 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.968 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.969 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.970 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.971 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:00:08.972 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.974 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 12ms reading results.
2025-05-11 20:00:08.975 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.976 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:00:08.977 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.979 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.981 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:00:08.981 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:00:08.982 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:00:08.983 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:00:08.986 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:00:08.988 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.989 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:00:08.990 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:08.990 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:00:08.999 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:00:09.010 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:00:09.011 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:00:09.013 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:00:09.013 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:00:09.014 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:00:09.016 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 197.4053ms
2025-05-11 20:00:09.018 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:00:09.022 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:00:09.025 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:00:09.027 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:00:09.029 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 300.548ms
2025-05-11 20:01:23.124 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:01:23.125 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:01:23.125 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:01:23.139 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:01:23.142 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:01:23.143 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:01:23.144 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:01:23.145 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:01:23.146 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:01:23.147 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:01:23.148 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:01:23.148 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:01:23.150 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:01:23.150 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:01:23.151 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:01:23.152 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:01:23.153 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:01:23.154 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:01:23.155 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:01:23.157 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:01:23.158 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:01:23.159 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:01:23.160 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:01:23.161 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:01:23.162 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:01:23.162 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:01:23.163 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:01:23.164 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:01:23.165 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:01:23.165 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:01:23.167 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:01:23.168 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:01:23.169 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:01:23.170 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:01:23.171 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:01:23.172 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:01:23.174 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:23.175 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:23.176 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:23.177 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:01:23.179 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:01:23.180 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:01:23.181 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:23.182 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:23.184 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:23.185 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:01:23.187 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:01:23.188 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:01:23.189 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:01:23.190 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:01:23.192 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:01:23.192 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:01:23.193 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:01:23.194 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:01:23.195 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:01:23.195 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:01:23.196 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:01:23.197 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:01:23.198 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:23.199 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:23.200 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:01:23.201 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:23.202 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:23.203 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:01:23.203 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:01:23.204 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:01:23.205 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:01:23.206 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:23.207 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:23.207 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:01:23.209 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:01:23.209 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:01:23.209 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:01:23.211 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:01:23.212 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:01:23.212 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:01:23.213 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:01:23.213 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:01:23.214 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:23.215 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.215 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.216 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:23.217 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.218 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.219 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:23.220 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:23.221 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:23.222 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:01:23.222 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:01:23.223 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:01:23.223 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:23.224 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:01:23.225 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:01:23.226 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:01:23.227 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:01:23.228 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:01:23.228 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:01:23.232 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:01:23.233 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:01:23.234 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:01:23.234 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:01:23.235 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.236 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:01:23.236 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:01:23.237 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.238 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.238 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:01:23.239 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.240 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:01:23.241 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:01:23.242 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.243 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.243 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:01:23.244 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.245 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:01:23.245 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:01:23.247 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.248 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:01:23.249 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:01:23.250 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.251 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:01:23.252 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:01:23.253 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.254 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:01:23.256 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.256 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:01:23.256 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:01:23.257 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.259 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:01:23.259 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:01:23.261 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.264 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:01:23.265 +07:00 [DBG] Created DbConnection. (5ms).
2025-05-11 20:01:23.266 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.268 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 81.6367ms
2025-05-11 20:01:23.268 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.274 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.276 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:01:23.277 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.278 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.278 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:01:23.279 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:23.280 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.280 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.282 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:01:23.283 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.284 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-11 20:01:23.285 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-11 20:01:23.285 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.286 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 161.2764ms
2025-05-11 20:01:23.287 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:01:23.288 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.293 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.296 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.299 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.300 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.301 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.301 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:01:23.302 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.304 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.304 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.305 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:01:23.306 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.307 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.307 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.308 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:01:23.309 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.310 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:01:23.311 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.312 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:01:23.313 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.313 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:01:23.314 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.314 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:01:23.315 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.316 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:01:23.316 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.317 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:01:23.318 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.320 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 134.4804ms
2025-05-11 20:01:23.320 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.321 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:01:23.322 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.322 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:01:23.323 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.324 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.325 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.325 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:01:23.326 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.327 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 205.9458ms
2025-05-11 20:01:23.327 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.330 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.331 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.332 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.333 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.333 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 98ms reading results.
2025-05-11 20:01:23.334 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.335 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:01:23.337 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.340 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.341 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:23.342 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:01:23.342 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:01:23.343 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:01:23.348 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:01:23.350 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.351 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.352 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.353 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.354 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.355 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.355 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.356 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.357 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.358 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.359 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2025-05-11 20:01:23.360 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.361 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:01:23.362 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.363 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.364 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:23.365 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:01:23.366 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:01:23.367 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:01:23.369 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:01:23.370 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.372 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:01:23.373 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.374 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:01:23.375 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:01:23.376 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:01:23.377 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:01:23.377 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:01:23.377 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:01:23.378 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:01:23.379 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 191.0878ms
2025-05-11 20:01:23.380 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:01:23.381 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:01:23.381 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:01:23.383 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:01:23.384 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.385 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:01:23.386 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:01:23.387 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:01:23.388 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 263.9063ms
2025-05-11 20:01:23.389 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:01:23.393 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:01:23.394 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:01:23.395 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:01:23.396 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:01:23.396 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:01:23.397 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:01:23.398 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:01:23.400 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:23.401 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:01:23.403 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:23.404 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:01:23.407 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:01:23.410 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:01:23.411 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:01:23.414 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:23.415 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:23.416 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:01:23.417 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:23.420 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:01:23.422 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:01:23.423 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:01:23.423 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.425 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.425 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:23.426 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:01:23.427 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:01:23.429 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:01:23.430 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:01:23.432 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.433 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.434 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.435 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.436 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.438 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.439 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.440 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.440 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.441 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.442 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.443 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.444 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.445 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.445 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.446 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.447 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.448 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.449 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.450 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.450 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.451 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.452 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.453 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.454 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.455 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.457 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.458 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.459 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.460 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.460 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.461 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.462 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.463 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.464 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.465 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.466 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.467 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.467 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.469 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.470 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.471 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.472 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.473 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.474 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 42ms reading results.
2025-05-11 20:01:23.476 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.476 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:01:23.477 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.478 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.479 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:23.479 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:01:23.480 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:01:23.481 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:01:23.483 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:01:23.485 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.486 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.487 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.488 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.488 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.490 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.491 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.491 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.492 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:23.493 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.494 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2025-05-11 20:01:23.495 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.495 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:01:23.496 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.497 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.498 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:23.499 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:01:23.500 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:01:23.501 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:01:23.502 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:01:23.504 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.504 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:01:23.505 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.506 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:01:23.507 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:01:23.508 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:01:23.508 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:01:23.509 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:01:23.509 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:01:23.509 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:01:23.511 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 106.4468ms
2025-05-11 20:01:23.512 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:01:23.512 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:01:23.513 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:23.514 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:01:23.515 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 134.6207ms
2025-05-11 20:01:49.066 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:01:49.069 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:01:49.069 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:01:49.070 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:01:49.071 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:01:49.072 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:01:49.074 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:01:49.075 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:01:49.077 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:01:49.078 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:01:49.079 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:01:49.081 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:01:49.080 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:01:49.082 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:01:49.082 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:01:49.083 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:01:49.084 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:01:49.086 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:01:49.087 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:01:49.089 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:01:49.090 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:49.090 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:01:49.092 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:01:49.093 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:01:49.095 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:49.097 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:01:49.099 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:01:49.101 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:01:49.103 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:01:49.104 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:49.105 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:01:49.107 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:01:49.108 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:01:49.109 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:49.110 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:01:49.112 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:01:49.113 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:01:49.114 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:01:49.115 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:01:49.116 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:01:49.117 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:01:49.118 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:01:49.119 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:01:49.120 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:01:49.121 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:01:49.122 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:01:49.123 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:49.124 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:01:49.125 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:49.125 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:01:49.126 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:49.127 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:01:49.128 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:01:49.129 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:01:49.130 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:49.131 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:49.131 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:01:49.132 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:49.133 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:01:49.134 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:49.135 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:01:49.136 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:01:49.137 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:01:49.137 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:49.138 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:01:49.139 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:01:49.140 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:01:49.141 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:01:49.142 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:01:49.143 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:01:49.144 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:01:49.145 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:01:49.145 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:01:49.146 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:01:49.147 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:01:49.148 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:01:49.148 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:01:49.149 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:01:49.150 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:01:49.151 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:01:49.152 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:01:49.153 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:01:49.154 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:01:49.154 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:01:49.155 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:01:49.156 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:01:49.156 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:49.157 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:01:49.158 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:49.160 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:01:49.160 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:49.163 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:01:49.163 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:01:49.165 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:01:49.166 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:01:49.167 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:01:49.168 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:49.170 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:49.171 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:49.172 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:01:49.173 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:01:49.174 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:01:49.175 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:01:49.177 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:49.178 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:01:49.178 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:49.179 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:01:49.179 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:01:49.180 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:49.181 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:01:49.182 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:01:49.184 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:01:49.184 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:49.185 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:01:49.186 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:01:49.186 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:01:49.187 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:01:49.187 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:01:49.189 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:01:49.189 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:01:49.190 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:01:49.191 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:01:49.193 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:01:49.198 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:01:49.198 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 98.8723ms
2025-05-11 20:01:49.199 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 86.4682ms
2025-05-11 20:01:49.199 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:01:49.200 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:01:49.201 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:01:49.201 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:01:49.202 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:49.202 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:49.203 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:01:49.204 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:01:49.204 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 138.465ms
2025-05-11 20:01:49.205 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 131.934ms
2025-05-11 20:01:56.128 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:01:56.130 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:01:56.130 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:01:56.130 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:01:56.133 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:01:56.135 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:01:56.135 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:01:56.136 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:01:56.137 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:01:56.138 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:01:56.138 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:01:56.139 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:01:56.139 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:01:56.140 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:01:56.140 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:01:56.142 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:01:56.142 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:01:56.143 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:01:56.144 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:01:56.145 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:01:56.146 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:01:56.147 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:01:56.148 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:01:56.149 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:01:56.150 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:01:56.151 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:01:56.152 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:01:56.152 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:01:56.153 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:01:56.153 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:01:56.154 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:01:56.156 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:01:56.157 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:01:56.158 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:01:56.159 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:01:56.160 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:01:56.161 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:56.162 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:56.163 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:56.165 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:01:56.166 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:01:56.168 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:01:56.169 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:56.170 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:56.170 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:56.172 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:01:56.173 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:01:56.174 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:01:56.175 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:01:56.175 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:01:56.176 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:01:56.177 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:01:56.177 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:01:56.178 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:01:56.179 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:01:56.180 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:01:56.180 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:01:56.181 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:01:56.182 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:56.183 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:56.184 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:01:56.185 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:56.185 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:56.186 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:01:56.187 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:01:56.188 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:01:56.188 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:01:56.189 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:56.190 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:56.191 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:01:56.192 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:01:56.193 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:01:56.193 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:01:56.194 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:01:56.196 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:01:56.197 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:01:56.197 +07:00 [DBG] Created DbConnection. (3ms).
2025-05-11 20:01:56.198 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:01:56.199 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:56.199 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.200 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.201 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:56.201 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.202 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.202 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:56.203 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:56.204 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:56.204 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:01:56.205 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:01:56.206 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:01:56.206 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:01:56.207 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:01:56.207 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:01:56.208 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:01:56.209 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:01:56.209 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:01:56.210 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:01:56.214 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:01:56.214 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:01:56.215 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.215 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:01:56.216 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:01:56.216 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.217 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:01:56.218 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.219 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.219 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:01:56.220 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:01:56.220 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.221 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:01:56.222 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.222 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.223 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:01:56.224 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:01:56.224 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.226 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:01:56.227 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:01:56.228 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.228 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:01:56.230 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:01:56.230 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.231 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:01:56.231 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:01:56.232 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.233 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:01:56.233 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:01:56.234 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.235 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:01:56.235 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:01:56.236 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.236 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:01:56.238 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:01:56.238 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.239 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:01:56.239 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 65.1308ms
2025-05-11 20:01:56.241 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.242 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.242 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:01:56.243 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.244 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.244 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:01:56.245 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.246 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:56.246 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.247 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.248 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:01:56.248 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:01:56.249 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.250 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:01:56.250 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 120.6115ms
2025-05-11 20:01:56.251 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.252 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:01:56.254 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.256 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.257 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.258 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.259 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.259 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:01:56.260 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.261 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.262 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.263 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:01:56.264 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.265 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.265 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.266 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:01:56.267 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.268 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:01:56.269 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.270 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:01:56.271 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.272 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:01:56.272 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.273 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:01:56.274 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.274 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:01:56.275 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.275 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:01:56.276 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.278 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 106.1004ms
2025-05-11 20:01:56.278 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.279 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:01:56.280 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.280 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:01:56.281 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.282 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.282 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.283 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:01:56.283 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.284 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 156.6569ms
2025-05-11 20:01:56.285 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.287 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.288 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.289 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.290 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.290 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 75ms reading results.
2025-05-11 20:01:56.291 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.292 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:01:56.293 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.294 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.295 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:56.295 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:01:56.296 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:01:56.296 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:01:56.299 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:01:56.300 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.301 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.301 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.302 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.303 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.304 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.304 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.305 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.306 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.306 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.307 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 20:01:56.308 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.309 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:01:56.310 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.310 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.311 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:56.312 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:01:56.312 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:01:56.313 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:01:56.315 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:01:56.316 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.316 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:01:56.317 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.318 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:01:56.319 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:01:56.320 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:01:56.321 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:01:56.321 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:01:56.322 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:01:56.322 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:01:56.323 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 150.5189ms
2025-05-11 20:01:56.324 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:01:56.325 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:01:56.325 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:01:56.326 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:01:56.327 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.328 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:01:56.328 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:01:56.329 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:01:56.330 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 200.1295ms
2025-05-11 20:01:56.331 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:01:56.333 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:01:56.334 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:01:56.334 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:01:56.335 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:01:56.336 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:01:56.337 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:01:56.338 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:01:56.338 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:56.339 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:01:56.340 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:01:56.341 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:01:56.341 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:01:56.342 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:01:56.343 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:01:56.344 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:56.345 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:56.345 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:01:56.346 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:01:56.347 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:01:56.349 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:01:56.349 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:01:56.350 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.351 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.352 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:56.353 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:01:56.353 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:01:56.354 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:01:56.356 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:01:56.357 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.358 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.359 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.360 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.360 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.361 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.362 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.362 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.363 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.364 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.365 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.366 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.367 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.368 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.368 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.369 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.370 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.371 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.371 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.372 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.373 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.373 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.374 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.375 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.375 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.376 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.376 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.377 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.378 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.379 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.379 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.380 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.381 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.382 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.383 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.384 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.385 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.385 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.386 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.386 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.387 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.388 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.388 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.389 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.390 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 32ms reading results.
2025-05-11 20:01:56.391 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.392 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:01:56.393 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.394 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.395 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:56.395 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:01:56.396 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:01:56.397 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:01:56.399 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:01:56.400 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.401 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.402 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.402 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.403 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.404 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.404 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.405 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.406 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:01:56.407 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.408 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 20:01:56.409 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.409 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:01:56.410 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.411 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.412 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:01:56.413 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:01:56.414 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:01:56.414 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:01:56.416 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:01:56.417 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.418 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:01:56.418 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.419 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:01:56.421 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:01:56.422 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:01:56.422 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:01:56.423 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:01:56.423 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:01:56.424 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:01:56.425 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 83.933ms
2025-05-11 20:01:56.426 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:01:56.427 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:01:56.427 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:01:56.428 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:01:56.429 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 104.8991ms
2025-05-11 20:02:06.895 +07:00 [DBG] Connection id "0HNCGH6OBB7J8" received FIN.
2025-05-11 20:02:06.899 +07:00 [DBG] Connection id "0HNCGH6OBB7J6" received FIN.
2025-05-11 20:02:06.900 +07:00 [DBG] Connection id "0HNCGH6OBB7JA" received FIN.
2025-05-11 20:02:06.904 +07:00 [DBG] Connection id "0HNCGH6OBB7J8" is closed. The last processed stream ID was 17.
2025-05-11 20:02:06.904 +07:00 [DBG] The connection queue processing loop for 0HNCGH6OBB7J8 completed.
2025-05-11 20:02:06.905 +07:00 [DBG] Connection id "0HNCGH6OBB7J6" is closed. The last processed stream ID was 1.
2025-05-11 20:02:06.905 +07:00 [DBG] The connection queue processing loop for 0HNCGH6OBB7J6 completed.
2025-05-11 20:02:06.907 +07:00 [DBG] Connection id "0HNCGH6OBB7JA" is closed. The last processed stream ID was 83.
2025-05-11 20:02:06.907 +07:00 [DBG] The connection queue processing loop for 0HNCGH6OBB7JA completed.
2025-05-11 20:02:06.908 +07:00 [DBG] Connection id "0HNCGH6OBB7J8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 20:02:06.910 +07:00 [DBG] Connection id "0HNCGH6OBB7J6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 20:02:06.912 +07:00 [DBG] Connection id "0HNCGH6OBB7JA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 20:02:06.915 +07:00 [DBG] Connection id "0HNCGH6OBB7J8" stopped.
2025-05-11 20:02:06.919 +07:00 [DBG] Connection id "0HNCGH6OBB7J6" stopped.
2025-05-11 20:02:06.924 +07:00 [DBG] Connection id "0HNCGH6OBB7JA" stopped.
2025-05-11 20:02:30.562 +07:00 [DBG] Connection id "0HNCGH6OBB7JD" accepted.
2025-05-11 20:02:30.570 +07:00 [DBG] Connection id "0HNCGH6OBB7JD" started.
2025-05-11 20:02:30.574 +07:00 [DBG] Connection 0HNCGH6OBB7JD established using the following protocol: "Tls13"
2025-05-11 20:02:30.577 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:02:30.577 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:02:30.588 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:30.590 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:30.591 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:30.591 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:30.592 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:30.593 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:30.593 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:02:30.594 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:02:30.594 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:02:30.595 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:02:30.596 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:30.597 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:30.598 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:30.599 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:30.599 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:30.600 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:30.601 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:02:30.601 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:02:30.603 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:30.604 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:30.605 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:30.606 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:30.607 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:30.608 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:30.609 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:30.611 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:30.612 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:30.613 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:30.614 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:30.615 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:30.616 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:30.617 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:30.618 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:02:30.619 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:02:30.619 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:02:30.620 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:02:30.621 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:30.622 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:30.623 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:30.624 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:30.625 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:02:30.626 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:02:30.627 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:02:30.628 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:02:30.629 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:30.629 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:30.630 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:02:30.631 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:02:30.632 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:30.633 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:30.634 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:30.634 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:30.635 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:30.636 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:30.637 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:30.638 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:30.638 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:30.639 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:30.640 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:30.641 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:30.642 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:02:30.643 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:02:30.643 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:30.644 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:30.645 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:30.646 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:30.647 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:30.648 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:30.648 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:30.649 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:30.650 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:30.651 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:30.651 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:02:30.652 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:02:30.653 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:30.654 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:30.655 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:30.655 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:30.656 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:30.657 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:30.658 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:30.658 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:30.659 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:30.660 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:30.661 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:30.662 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:02:30.662 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:30.663 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:30.663 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:02:30.664 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:30.664 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:30.665 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:30.666 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:30.666 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:30.667 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:30.668 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:02:30.668 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:30.669 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:02:30.670 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:02:30.672 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:02:30.676 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:02:30.676 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:02:30.677 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:30.678 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:30.679 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:02:30.679 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:02:30.680 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:30.681 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:30.682 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:02:30.683 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:02:30.683 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:30.684 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:30.686 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:30.687 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:30.688 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:30.688 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:30.689 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:30.690 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:30.690 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:30.691 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:30.692 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:02:30.692 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:02:30.696 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 80.8693ms
2025-05-11 20:02:30.696 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 82.2087ms
2025-05-11 20:02:30.698 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:30.699 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:30.699 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:30.700 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:30.701 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:30.701 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:30.702 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:02:30.703 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:02:30.704 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 127.3129ms
2025-05-11 20:02:30.705 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 128.8524ms
2025-05-11 20:02:31.384 +07:00 [DBG] Connection id "0HNCGH6OBB7JD" received FIN.
2025-05-11 20:02:31.406 +07:00 [DBG] Connection id "0HNCGH6OBB7JD" is closed. The last processed stream ID was 3.
2025-05-11 20:02:31.406 +07:00 [DBG] The connection queue processing loop for 0HNCGH6OBB7JD completed.
2025-05-11 20:02:31.407 +07:00 [DBG] Connection id "0HNCGH6OBB7JD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 20:02:31.416 +07:00 [DBG] Connection id "0HNCGH6OBB7JD" stopped.
2025-05-11 20:02:31.613 +07:00 [DBG] Connection id "0HNCGH6OBB7JE" accepted.
2025-05-11 20:02:31.614 +07:00 [DBG] Connection id "0HNCGH6OBB7JE" started.
2025-05-11 20:02:31.619 +07:00 [DBG] Connection 0HNCGH6OBB7JE established using the following protocol: "Tls13"
2025-05-11 20:02:31.622 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:02:31.622 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:02:31.622 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:02:31.629 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:31.632 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:31.634 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:31.635 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:31.635 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:31.636 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:31.637 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:31.637 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:31.638 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:31.639 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:02:31.639 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:02:31.640 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:02:31.641 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:02:31.642 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:02:31.642 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:02:31.643 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:31.644 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:02:31.644 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:02:31.645 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:31.646 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:31.646 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:31.647 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:31.648 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:02:31.649 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:02:31.650 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:02:31.650 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:02:31.651 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:02:31.652 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:31.653 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:31.654 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:31.655 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:31.656 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:31.657 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:31.658 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:31.659 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:31.659 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:31.661 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:31.662 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:31.663 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:31.664 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:31.665 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:31.666 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:31.667 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:31.668 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:02:31.669 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:02:31.670 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:31.671 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:02:31.672 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:02:31.672 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:31.673 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:31.674 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:02:31.674 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:02:31.675 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:02:31.676 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:02:31.677 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:31.678 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:31.679 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:02:31.679 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:31.680 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:31.681 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:31.682 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:31.683 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:31.684 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:31.685 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:31.686 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:31.686 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:02:31.688 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:31.688 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:31.688 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:02:31.690 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:31.691 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:31.691 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:31.692 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:02:31.692 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:02:31.693 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:02:31.693 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.694 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.695 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:31.696 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.696 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.697 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:31.698 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:31.698 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:31.699 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:31.700 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:31.700 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:31.701 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:31.702 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:02:31.702 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:02:31.703 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:31.704 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:02:31.704 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:02:31.705 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:31.708 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:02:31.708 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:02:31.709 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.710 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:31.710 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.711 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:02:31.711 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:31.712 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.713 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.714 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:31.714 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.715 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:02:31.716 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:31.716 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.717 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.718 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:31.719 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.719 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:02:31.720 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:02:31.721 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.722 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:31.722 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:31.723 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.725 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:31.725 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:31.726 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.726 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:31.727 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:31.728 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.728 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:31.729 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:31.730 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.730 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:31.731 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:31.732 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.732 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:02:31.734 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:31.734 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.735 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 66.4972ms
2025-05-11 20:02:31.735 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:02:31.736 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.737 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:02:31.737 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.738 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.739 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:31.739 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.740 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.741 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.741 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:31.742 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.743 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:02:31.744 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:02:31.745 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.745 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 123.9348ms
2025-05-11 20:02:31.746 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:02:31.747 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.749 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:02:31.750 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.751 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.752 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.753 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.754 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.754 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:02:31.754 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.755 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.756 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.757 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:02:31.758 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.759 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.760 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.761 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:02:31.761 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.762 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:31.763 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.764 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:31.765 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.766 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:31.767 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.767 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:31.768 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.769 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:31.769 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.770 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:02:31.771 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.773 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 103.7558ms
2025-05-11 20:02:31.774 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.775 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:02:31.775 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.776 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:31.777 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.777 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.778 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.779 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:02:31.779 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.780 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 158.98ms
2025-05-11 20:02:31.781 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.784 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.784 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.785 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.786 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 77ms reading results.
2025-05-11 20:02:31.787 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.788 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:31.789 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.790 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.791 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:31.792 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:31.792 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:31.793 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:02:31.797 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:02:31.798 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.799 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.799 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.800 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.801 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.802 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.802 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.803 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.803 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.804 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.805 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 20:02:31.806 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.806 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:31.807 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.808 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.808 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:31.809 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:31.809 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:31.810 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:02:31.812 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:02:31.813 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.813 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:02:31.814 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.815 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:31.816 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:31.817 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:31.817 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:31.818 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:31.818 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:31.819 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:02:31.820 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 152.3744ms
2025-05-11 20:02:31.820 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:31.821 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:02:31.822 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:31.823 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:31.824 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.824 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:31.825 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:02:31.826 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:31.826 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 205.071ms
2025-05-11 20:02:31.827 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:02:31.829 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:02:31.830 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:31.831 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:31.831 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:31.832 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:02:31.833 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:31.833 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:31.834 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:31.836 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:31.837 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:31.838 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:31.839 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:31.840 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:31.841 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:02:31.842 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:31.843 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:31.845 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:31.845 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:31.846 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:31.848 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:31.848 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:02:31.849 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.850 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.850 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:31.851 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:31.852 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:31.853 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:02:31.854 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:02:31.855 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.856 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.857 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.858 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.859 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.859 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.860 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.861 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.862 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.863 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.864 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.864 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.865 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.866 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.868 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.868 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.869 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.870 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.871 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.871 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.872 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.873 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.874 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.874 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.875 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.876 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.877 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.878 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.878 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.879 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.879 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.880 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.881 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.881 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.882 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.883 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.884 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.885 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.886 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.886 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.887 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.888 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.889 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.890 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.890 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 34ms reading results.
2025-05-11 20:02:31.891 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.892 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:31.893 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.894 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.894 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:31.895 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:31.896 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:31.897 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:02:31.899 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:02:31.900 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.901 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.901 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.902 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.903 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.904 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.905 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.905 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.906 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:31.907 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.908 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 20:02:31.909 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.909 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:31.910 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.911 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.912 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:31.913 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:31.914 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:31.914 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:02:31.916 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:02:31.917 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.917 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:02:31.918 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.919 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:31.920 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:31.921 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:31.922 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:31.922 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:31.923 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:31.923 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:02:31.924 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 86.2771ms
2025-05-11 20:02:31.925 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:31.926 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:31.927 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:31.927 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:02:31.928 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 107.5265ms
2025-05-11 20:02:39.721 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:02:39.723 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:39.724 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:39.725 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:39.726 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:02:39.726 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:02:39.728 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:39.729 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:02:39.731 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:39.730 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:39.732 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:39.733 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:39.734 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:39.735 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:02:39.735 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:02:39.737 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:02:39.738 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:39.746 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:39.747 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:39.750 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:39.750 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:39.752 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:39.754 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:39.755 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:02:39.756 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:39.757 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:39.762 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:39.764 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:39.765 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:39.766 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:39.767 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:02:39.768 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:39.769 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:02:39.771 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:39.772 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:39.774 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:39.775 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:39.777 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:02:39.776 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:39.778 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:02:39.780 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:02:39.781 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:39.782 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:02:39.783 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:02:39.784 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:39.785 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:39.786 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:39.787 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:39.789 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:02:39.790 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:39.791 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:02:39.793 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:39.794 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:39.795 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:39.797 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:02:39.798 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:39.800 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:39.802 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:02:39.803 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:39.804 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:39.805 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:39.806 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:39.807 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:39.811 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:39.812 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:39.813 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:39.814 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:39.815 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:39.815 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:02:39.816 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:02:39.817 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:39.818 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:39.819 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:39.819 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:39.820 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:39.821 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:39.822 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:39.822 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:39.823 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:39.824 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:39.825 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:02:39.826 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:39.826 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:39.827 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:02:39.828 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:39.829 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:39.829 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:39.830 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:39.831 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:39.832 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:39.833 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:39.833 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:39.834 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:02:39.836 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:39.836 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:02:39.837 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:02:39.838 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:39.839 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:39.840 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:39.841 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:39.843 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:02:39.844 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:02:39.844 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:02:39.846 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:39.847 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:02:39.848 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:39.849 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:02:39.851 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:02:39.851 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:39.852 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:39.854 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:39.855 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:02:39.855 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:39.857 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:39.857 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:39.858 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:02:39.858 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:39.859 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:39.860 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:02:39.861 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:39.863 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:39.865 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:39.866 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 103.7521ms
2025-05-11 20:02:39.866 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:39.867 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:39.867 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:02:39.868 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:39.869 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 95.6517ms
2025-05-11 20:02:39.871 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:39.872 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:39.873 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:02:39.874 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:39.875 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 153.9262ms
2025-05-11 20:02:39.875 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:39.879 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-11 20:02:39.880 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 154.2776ms
2025-05-11 20:02:40.380 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:02:40.382 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:40.385 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:02:40.385 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:02:40.385 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:40.387 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:40.389 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:40.390 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:40.391 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:40.392 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:40.393 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:02:40.393 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:40.394 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:40.395 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:02:40.395 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:02:40.396 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:02:40.397 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:02:40.398 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:02:40.401 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:02:40.402 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:40.403 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:40.405 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:02:40.406 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:02:40.407 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:40.407 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:40.408 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:02:40.409 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:40.410 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:02:40.411 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:40.413 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:02:40.414 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:02:40.415 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:40.416 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:40.417 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:40.418 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:40.419 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:40.420 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:40.421 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:40.422 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:40.423 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:40.424 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:40.425 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:40.427 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:40.428 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:02:40.429 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:40.429 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:40.430 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:02:40.431 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:40.433 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:02:40.433 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:02:40.434 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:40.435 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:02:40.436 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:02:40.437 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:40.437 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:40.438 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:02:40.439 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:02:40.440 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:02:40.441 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:40.441 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:40.442 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:40.443 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:40.444 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:40.444 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:40.445 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:02:40.446 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:40.447 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:40.448 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:02:40.448 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:40.449 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:40.450 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:40.451 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:40.451 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:40.452 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:02:40.453 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:40.455 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:40.455 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:40.456 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:02:40.456 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:02:40.457 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:40.457 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.458 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.459 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:40.460 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.461 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.461 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:40.462 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:40.463 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:40.464 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:40.464 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:40.465 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:40.465 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:40.466 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:02:40.467 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:02:40.467 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:02:40.468 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:02:40.469 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:02:40.470 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:40.472 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:02:40.472 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:40.474 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.474 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:40.475 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.475 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:02:40.476 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:40.477 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.478 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.479 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:40.480 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.481 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:02:40.482 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:02:40.483 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.484 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.485 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:40.485 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.486 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:02:40.487 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:40.488 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.489 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:40.490 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:40.491 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.492 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:40.493 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:40.493 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.494 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:40.495 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:40.495 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.496 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:40.497 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:40.497 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.498 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:40.498 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:02:40.499 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.500 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:02:40.500 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.501 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.502 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 69.1354ms
2025-05-11 20:02:40.502 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.503 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.504 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:02:40.505 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:40.505 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.506 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:40.507 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:40.508 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.508 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.509 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:02:40.510 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.511 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:02:40.512 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:02:40.513 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.514 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 128.5197ms
2025-05-11 20:02:40.516 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.519 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.520 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:02:40.520 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.521 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.522 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.522 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:02:40.523 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.524 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.525 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.526 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:02:40.526 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.527 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:40.528 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.529 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:40.530 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.531 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:40.532 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.532 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:40.533 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.534 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:40.534 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.535 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:02:40.536 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.538 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 109.9558ms
2025-05-11 20:02:40.539 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.539 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:02:40.540 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.541 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:40.542 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.542 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.543 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.544 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:02:40.545 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.546 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 165.8757ms
2025-05-11 20:02:40.546 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.549 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.550 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.552 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.553 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.554 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.555 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.556 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.556 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 82ms reading results.
2025-05-11 20:02:40.558 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.558 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:40.559 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.560 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.561 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:40.561 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:40.562 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:40.563 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:02:40.566 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:02:40.567 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.568 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.569 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.569 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.570 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.571 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.572 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.573 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.574 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.575 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.576 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2025-05-11 20:02:40.577 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.578 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:40.579 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.580 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.581 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:40.581 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:40.583 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:02:40.584 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:02:40.587 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:02:40.588 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.589 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:02:40.590 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.591 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:40.592 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:40.593 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:40.594 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:40.594 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:40.595 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:40.595 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:02:40.596 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 165.1085ms
2025-05-11 20:02:40.597 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:40.598 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:02:40.598 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:40.600 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:40.600 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.601 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:40.602 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:02:40.603 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:40.604 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 219.1556ms
2025-05-11 20:02:40.604 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:02:40.607 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:02:40.608 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:40.609 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:40.609 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:40.610 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:02:40.611 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:40.612 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:40.613 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:40.614 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:40.615 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:40.616 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:40.617 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:40.618 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:40.619 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:02:40.620 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:40.620 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:40.621 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:40.622 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:40.623 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:40.624 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:40.625 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:02:40.625 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.626 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.627 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:40.628 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:40.628 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:40.629 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:02:40.630 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:02:40.631 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.632 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.633 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.634 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.635 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.636 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.636 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.637 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.638 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.638 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.639 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.640 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.641 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.642 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.643 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.644 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.644 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.645 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.646 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.646 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.647 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.648 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.649 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.650 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.651 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.651 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.652 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.653 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.653 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.654 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.655 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.656 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.656 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.657 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.658 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.658 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.659 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.660 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.660 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.661 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.662 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.663 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.663 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.664 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.665 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 33ms reading results.
2025-05-11 20:02:40.666 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.667 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:40.668 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.669 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.670 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:40.670 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:40.671 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:40.671 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:02:40.673 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:02:40.674 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.674 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.675 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.676 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.677 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.678 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.678 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.679 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.680 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:40.681 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.682 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 20:02:40.683 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.684 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:40.685 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.686 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.686 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:40.687 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:40.688 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:40.689 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:02:40.691 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:02:40.692 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.693 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:02:40.694 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.695 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:40.696 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:40.698 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:40.699 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:40.699 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:40.700 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:40.700 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:02:40.701 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 84.9615ms
2025-05-11 20:02:40.702 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:40.702 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:40.703 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:40.704 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:02:40.705 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 107.3469ms
2025-05-11 20:02:44.627 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:02:44.630 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:44.630 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:02:44.631 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:44.633 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:44.634 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:44.635 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:44.636 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:02:44.637 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:44.638 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:02:44.639 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:02:44.640 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:44.641 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:02:44.641 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:44.643 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:44.643 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:44.644 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:44.645 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:02:44.646 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:44.647 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:44.648 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:02:44.649 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:44.650 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:44.652 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:44.653 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:44.655 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:44.656 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:44.657 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:44.658 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:44.659 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:44.660 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:44.661 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:44.662 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:44.663 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:02:44.664 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:44.665 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:02:44.666 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:02:44.668 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:44.669 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:02:44.670 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:44.671 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:44.672 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:02:44.673 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:44.674 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:02:44.675 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:02:44.676 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:44.677 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:02:44.678 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:02:44.679 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:44.680 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:44.681 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:02:44.682 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:44.683 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:44.684 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:44.685 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:44.686 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:44.686 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:44.687 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:44.688 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:44.689 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:44.690 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:44.690 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:02:44.691 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:44.692 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:44.693 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:02:44.694 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:44.695 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:44.696 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:44.697 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:44.698 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:44.699 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:44.699 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:44.700 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:44.701 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:02:44.702 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:44.703 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:44.704 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:02:44.705 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:44.705 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:44.706 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:44.707 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:44.708 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:44.708 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:44.710 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:44.710 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:44.712 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:44.712 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:44.712 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:02:44.714 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:44.714 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:44.715 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:02:44.715 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:44.716 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:44.717 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:44.718 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:44.719 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:44.720 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:44.721 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:02:44.721 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:44.722 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:02:44.724 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:02:44.726 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:02:44.726 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:02:44.728 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:44.729 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:02:44.729 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:02:44.730 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:44.731 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:44.732 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:02:44.732 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:02:44.733 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:44.734 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:44.735 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:02:44.736 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:44.737 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:44.738 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:44.739 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:44.740 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:44.740 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:44.741 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:44.741 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:44.742 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:02:44.742 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:44.745 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:02:44.746 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 86.9779ms
2025-05-11 20:02:44.747 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 84.6565ms
2025-05-11 20:02:44.748 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:44.749 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:02:44.749 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:44.750 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:44.751 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:44.752 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:44.753 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:02:44.754 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:02:44.755 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 127.6919ms
2025-05-11 20:02:44.755 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 125.3744ms
2025-05-11 20:02:47.207 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:02:47.209 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:47.210 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:02:47.210 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:02:47.210 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:47.212 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:47.213 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:47.214 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:47.214 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:47.215 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:47.216 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:02:47.217 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:47.218 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:47.219 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:02:47.219 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:02:47.220 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:02:47.221 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:02:47.222 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:02:47.223 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:02:47.224 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:47.225 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:02:47.226 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:47.226 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:02:47.227 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:47.228 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:47.229 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:02:47.230 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:02:47.232 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:47.233 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:47.233 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:02:47.234 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:02:47.235 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:47.236 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:47.237 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:47.238 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:47.238 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:47.239 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:47.240 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:47.241 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:47.242 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:47.243 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:47.244 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:47.246 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:47.247 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:02:47.248 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:47.249 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:47.250 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:02:47.250 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:02:47.252 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:47.253 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:02:47.254 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:02:47.255 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:47.255 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:02:47.256 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:47.257 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:47.258 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:02:47.259 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:02:47.259 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:02:47.260 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:47.261 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:47.262 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:47.262 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:02:47.263 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:47.264 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:47.265 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:02:47.266 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:47.266 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:47.267 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:02:47.268 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:47.268 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:47.269 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:47.270 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:47.271 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:47.271 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:02:47.273 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:47.273 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:47.274 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:47.275 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:02:47.275 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:02:47.276 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:47.277 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.277 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.278 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:47.279 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.280 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.280 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:02:47.281 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:47.282 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:47.283 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:02:47.283 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:02:47.284 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:47.285 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:47.286 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:02:47.286 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:02:47.287 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:02:47.288 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:02:47.288 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:02:47.289 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:47.291 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:02:47.292 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:02:47.292 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:47.293 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.294 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.295 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:02:47.296 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:02:47.296 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.297 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:02:47.298 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.299 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.299 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:47.300 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:02:47.301 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.301 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:02:47.302 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:47.303 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.303 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:47.305 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:47.306 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.306 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:47.307 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:47.307 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.308 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:02:47.309 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:47.309 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.310 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:02:47.311 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:47.311 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.312 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:47.313 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:02:47.313 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.315 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:47.316 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.315 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 64.9305ms
2025-05-11 20:02:47.317 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:02:47.317 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.318 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:02:47.319 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.320 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.320 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:47.321 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.322 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.323 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.323 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:47.324 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.325 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:02:47.325 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:47.326 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.327 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 117.3357ms
2025-05-11 20:02:47.328 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:02:47.329 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.332 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:02:47.333 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.334 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:02:47.334 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.336 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.336 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.337 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:02:47.338 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.339 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.339 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.340 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:02:47.341 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.342 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:47.343 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.344 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:47.345 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.345 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:47.346 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.346 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:47.347 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.347 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:47.348 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.349 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:02:47.349 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.352 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 104.7097ms
2025-05-11 20:02:47.352 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.353 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:02:47.354 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.354 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:47.355 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.356 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.356 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.357 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:02:47.358 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.359 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 152.1891ms
2025-05-11 20:02:47.360 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.362 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.364 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.364 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.365 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.366 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.367 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.368 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.369 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.370 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.371 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 76ms reading results.
2025-05-11 20:02:47.371 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.372 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:47.373 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.374 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.375 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:47.376 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:47.377 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:47.378 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:02:47.379 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:02:47.381 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.381 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.382 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.384 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.385 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.386 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.387 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.388 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.388 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.389 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.390 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 9ms reading results.
2025-05-11 20:02:47.391 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.392 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:47.393 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.394 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.395 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:47.395 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:47.396 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:47.397 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:02:47.398 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:02:47.400 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.400 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:02:47.401 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.402 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:47.403 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:47.405 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:47.406 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:47.406 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:47.407 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:47.408 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:02:47.409 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 156.9678ms
2025-05-11 20:02:47.410 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:47.410 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:02:47.411 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:47.412 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:02:47.413 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.414 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:02:47.414 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:02:47.415 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:02:47.415 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 205.8174ms
2025-05-11 20:02:47.416 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:02:47.418 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:02:47.419 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:47.420 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:02:47.421 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:47.421 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:02:47.422 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:02:47.423 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:02:47.424 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:47.426 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:02:47.426 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:02:47.428 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:47.428 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:02:47.429 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:47.429 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:02:47.430 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:47.431 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:47.431 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:02:47.432 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:02:47.434 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:02:47.435 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:02:47.435 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:02:47.436 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.436 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.438 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:47.438 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:47.439 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:47.440 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:02:47.441 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:02:47.442 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.443 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.444 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.445 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.445 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.446 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.447 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.448 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.448 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.449 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.450 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.450 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.451 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.452 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.453 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.454 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.454 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.455 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.456 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.456 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.457 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.458 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.458 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.459 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.460 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.461 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.461 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.462 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.463 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.464 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.464 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.465 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.466 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.466 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.467 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.468 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.469 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.470 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.470 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.471 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.472 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.472 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.473 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.474 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.475 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 32ms reading results.
2025-05-11 20:02:47.475 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.476 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:47.477 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.478 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.478 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:47.479 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:47.479 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:47.480 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:02:47.481 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:02:47.483 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.483 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.484 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.485 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.486 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.486 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.487 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.488 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.488 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:02:47.489 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.490 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 20:02:47.491 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.491 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:47.492 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.493 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.494 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:02:47.494 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:02:47.495 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:02:47.496 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:02:47.497 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:02:47.498 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.499 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:02:47.500 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.500 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:02:47.501 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:02:47.503 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:02:47.503 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:02:47.503 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:02:47.504 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:02:47.504 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:02:47.505 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 77.5723ms
2025-05-11 20:02:47.506 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:02:47.506 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:02:47.507 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:02:47.508 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:02:47.509 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 98.9431ms
2025-05-11 20:02:49.795 +07:00 [DBG] Connection id "0HNCGH6OBB7JE" received FIN.
2025-05-11 20:02:49.816 +07:00 [DBG] Connection id "0HNCGH6OBB7JE" is closed. The last processed stream ID was 31.
2025-05-11 20:02:49.830 +07:00 [DBG] Connection id "0HNCGH6OBB7JE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 20:02:49.825 +07:00 [DBG] The connection queue processing loop for 0HNCGH6OBB7JE completed.
2025-05-11 20:02:49.952 +07:00 [DBG] Connection id "0HNCGH6OBB7JE" stopped.
2025-05-11 20:03:14.008 +07:00 [DBG] Connection id "0HNCGH6OBB7JF" accepted.
2025-05-11 20:03:14.013 +07:00 [DBG] Connection id "0HNCGH6OBB7JF" started.
2025-05-11 20:03:14.018 +07:00 [DBG] Connection 0HNCGH6OBB7JF established using the following protocol: "Tls13"
2025-05-11 20:03:14.026 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:03:14.027 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:03:14.026 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:03:14.033 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:03:14.035 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:03:14.038 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:03:14.039 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:03:14.039 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:03:14.040 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:03:14.040 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:03:14.041 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:03:14.041 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:03:14.042 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:03:14.043 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:03:14.043 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:03:14.044 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:03:14.045 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:03:14.046 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:03:14.047 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:03:14.049 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:03:14.050 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:03:14.051 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:03:14.052 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:03:14.052 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:03:14.053 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:03:14.054 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:03:14.054 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:03:14.055 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:03:14.056 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:03:14.056 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:03:14.057 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:03:14.059 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:03:14.060 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:03:14.061 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:03:14.062 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:03:14.063 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:03:14.064 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:14.065 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:14.066 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:14.068 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:03:14.069 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:03:14.070 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:03:14.071 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:14.072 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:14.073 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:14.074 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:03:14.075 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:03:14.076 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:14.077 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:03:14.078 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:03:14.079 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:14.080 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:03:14.081 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:03:14.081 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:03:14.082 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:03:14.083 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:03:14.084 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:03:14.085 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:03:14.086 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:14.086 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:14.087 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:03:14.088 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:14.089 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:14.089 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:03:14.090 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:03:14.091 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:03:14.091 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:03:14.092 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:14.093 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:14.093 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:03:14.095 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:03:14.095 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:03:14.096 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:03:14.097 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:03:14.098 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:03:14.099 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:03:14.099 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:03:14.100 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:03:14.101 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:14.101 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.102 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.103 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:14.104 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.104 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.105 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:14.106 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:14.106 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:14.107 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:03:14.107 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:14.108 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:14.109 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:14.109 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:03:14.110 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:03:14.111 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:03:14.112 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:03:14.112 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:03:14.113 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:03:14.117 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:14.118 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:14.118 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:03:14.119 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:03:14.120 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.120 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:03:14.121 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:14.122 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.123 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.124 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:03:14.125 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.127 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2025-05-11 20:03:14.128 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:03:14.129 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.130 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.131 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:14.132 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.133 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (3ms).
2025-05-11 20:03:14.134 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:14.136 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.137 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:03:14.138 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:03:14.139 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.141 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:03:14.142 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:14.143 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.144 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:03:14.146 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:03:14.146 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.147 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:03:14.149 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:03:14.149 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.149 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:03:14.150 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:03:14.151 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.151 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:03:14.152 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.154 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 78.7975ms
2025-05-11 20:03:14.153 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.156 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.160 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:03:14.161 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.161 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:14.162 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:03:14.163 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.163 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:14.164 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.165 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.165 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:03:14.166 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:03:14.167 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.168 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:03:14.169 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 142.0102ms
2025-05-11 20:03:14.170 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.173 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.174 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.175 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:03:14.175 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.176 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.177 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.178 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:03:14.179 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.180 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.180 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.181 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:03:14.182 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.183 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:03:14.184 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.185 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:03:14.186 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.186 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:03:14.187 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.188 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:03:14.189 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.190 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:03:14.191 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.191 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:03:14.192 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.195 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 120.9974ms
2025-05-11 20:03:14.195 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.199 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:03:14.200 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.200 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:03:14.201 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.202 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.203 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.204 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:03:14.205 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.206 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 179.872ms
2025-05-11 20:03:14.206 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.209 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.210 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.211 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.212 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.213 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.214 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.215 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.216 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.217 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 96ms reading results.
2025-05-11 20:03:14.218 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.219 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:03:14.220 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.221 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.222 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:14.223 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:03:14.224 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:14.225 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:03:14.228 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:03:14.229 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.230 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.231 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.232 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.233 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.234 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.235 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.236 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.237 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.238 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.239 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 9ms reading results.
2025-05-11 20:03:14.240 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.241 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:03:14.242 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.243 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.244 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:14.245 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:03:14.246 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:14.247 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:03:14.250 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:03:14.251 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.252 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:03:14.253 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.254 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:03:14.255 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:03:14.257 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:03:14.257 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:03:14.258 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:03:14.258 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:03:14.259 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:03:14.260 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 183.8962ms
2025-05-11 20:03:14.261 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:03:14.262 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:03:14.262 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:03:14.263 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:03:14.264 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.265 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:03:14.266 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:03:14.266 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:03:14.267 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 241.3649ms
2025-05-11 20:03:14.268 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:03:14.270 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:03:14.271 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:03:14.271 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:03:14.272 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:03:14.273 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:03:14.275 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:03:14.276 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:03:14.277 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:14.279 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:03:14.283 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:14.284 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:14.285 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:14.286 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:03:14.288 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:03:14.290 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:14.296 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:14.298 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:03:14.299 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:14.302 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:03:14.305 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:03:14.306 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:03:14.307 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.308 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.309 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:14.310 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:03:14.311 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:03:14.312 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:03:14.314 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:03:14.316 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.317 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.318 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.319 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.320 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.321 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.322 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.323 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.324 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.325 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.326 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.327 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.328 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.329 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.330 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.331 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.331 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.332 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.333 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.334 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.335 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.336 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.336 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.337 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.338 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.339 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.339 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.340 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.341 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.342 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.343 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.343 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.344 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.345 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.346 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.346 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.347 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.348 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.349 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.350 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.351 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.352 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.352 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.353 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.354 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 38ms reading results.
2025-05-11 20:03:14.355 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.356 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:03:14.358 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.359 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.360 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:14.361 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:03:14.362 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:14.363 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:03:14.364 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:03:14.366 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.366 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.367 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.368 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.368 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.369 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.370 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.371 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.371 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:14.372 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.373 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 20:03:14.374 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.375 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:03:14.376 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.377 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.378 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:14.378 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:03:14.379 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:14.380 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:03:14.381 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:03:14.383 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.384 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:03:14.384 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.385 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:03:14.386 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:03:14.387 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:03:14.388 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:03:14.388 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:03:14.389 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:03:14.390 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:03:14.391 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 106.4534ms
2025-05-11 20:03:14.392 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:03:14.392 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:03:14.393 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:14.394 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:03:14.395 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 133.2746ms
2025-05-11 20:03:16.301 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:03:16.304 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:03:16.305 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:03:16.305 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:03:16.307 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:03:16.308 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:03:16.308 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:03:16.309 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:03:16.311 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:03:16.312 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:03:16.313 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:03:16.314 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:03:16.314 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:03:16.315 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:03:16.315 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:03:16.316 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:03:16.317 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:03:16.318 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:03:16.319 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:03:16.320 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:16.321 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:03:16.322 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:03:16.323 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:03:16.324 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:16.325 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:03:16.327 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:16.328 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:03:16.329 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:16.330 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:03:16.331 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:03:16.332 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:16.333 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:03:16.335 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:03:16.336 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:03:16.337 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:16.338 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:03:16.339 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:16.340 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:03:16.342 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:16.343 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:03:16.344 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:03:16.345 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:03:16.345 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:03:16.346 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:03:16.347 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:03:16.349 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:16.350 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:03:16.351 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:16.352 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:03:16.353 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:16.354 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:03:16.354 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:03:16.355 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:03:16.356 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:16.357 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:03:16.358 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:03:16.358 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:16.359 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:03:16.360 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:16.361 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:16.362 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:16.362 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:16.363 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:03:16.364 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:03:16.365 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:16.366 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:16.366 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:03:16.367 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:03:16.368 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:03:16.369 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:03:16.370 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:16.371 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:16.372 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:16.373 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:16.374 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:03:16.375 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:03:16.376 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:16.377 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:16.377 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:03:16.379 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:03:16.379 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:03:16.380 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:03:16.381 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:16.382 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:03:16.382 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:16.383 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:16.383 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:03:16.384 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:16.385 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:16.385 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:16.387 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:03:16.387 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:16.388 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:03:16.388 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:03:16.389 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:03:16.389 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:03:16.390 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:16.392 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:16.392 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:16.393 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:03:16.394 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:16.394 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:03:16.394 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:03:16.396 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:16.398 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:03:16.399 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:16.400 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:03:16.401 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:03:16.401 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:03:16.402 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:16.403 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:03:16.404 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:03:16.404 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:03:16.405 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:16.406 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:03:16.406 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:03:16.407 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:03:16.408 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:03:16.408 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:03:16.410 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:03:16.411 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:03:16.413 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:03:16.413 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 86.3336ms
2025-05-11 20:03:16.413 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:03:16.414 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:03:16.415 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:03:16.415 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:03:16.416 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 77.3279ms
2025-05-11 20:03:16.417 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:16.418 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:03:16.418 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:03:16.419 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:03:16.420 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 119.4778ms
2025-05-11 20:03:16.421 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:16.423 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:03:16.424 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 116.2796ms
2025-05-11 20:03:26.855 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:03:26.857 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:03:26.858 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:03:26.858 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:03:26.860 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:03:26.860 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:03:26.861 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:03:26.863 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:03:26.865 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:03:26.867 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:03:26.868 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:03:26.869 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:03:26.870 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:03:26.871 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:03:26.872 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:03:26.873 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:03:26.873 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:03:26.874 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:03:26.878 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:03:26.876 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:03:26.875 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:03:26.879 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:03:26.880 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:03:26.882 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:03:26.882 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:03:26.883 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:03:26.885 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:03:26.886 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:03:26.886 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:03:26.888 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:03:26.889 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:03:26.890 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:03:26.892 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:26.894 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:03:26.896 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:03:26.898 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:03:26.900 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:03:26.902 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:03:26.904 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:26.905 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:26.907 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:26.908 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:03:26.910 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:03:26.912 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:03:26.913 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:03:26.913 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:26.915 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:26.916 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:03:26.917 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:26.918 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:03:26.919 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:03:26.920 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:26.921 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:03:26.922 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:03:26.923 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:03:26.924 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:03:26.926 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:03:26.926 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:03:26.927 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:03:26.928 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:03:26.929 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:26.930 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:26.931 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:03:26.932 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:26.933 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:26.934 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:03:26.934 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:03:26.935 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:03:26.936 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:03:26.937 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:26.939 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:26.940 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:03:26.941 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:03:26.942 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:03:26.942 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:26.944 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:03:26.946 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:03:26.946 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:26.947 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:03:26.947 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:03:26.948 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:26.949 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:26.949 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:26.950 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:03:26.951 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:26.952 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:26.954 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:26.955 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:26.955 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:26.956 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:03:26.957 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:26.957 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:26.958 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:03:26.959 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:03:26.959 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:03:26.960 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:26.961 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:03:26.962 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:03:26.962 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:26.964 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:03:26.965 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:03:26.965 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:03:26.966 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:26.968 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:26.968 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:26.969 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:26.970 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:03:26.970 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:03:26.971 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:26.972 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:26.972 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:03:26.973 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:26.974 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:03:26.975 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:26.975 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:26.976 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:03:26.977 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:26.977 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:26.978 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:03:26.979 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:03:26.980 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:26.980 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:03:26.981 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:26.982 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:26.982 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:03:26.983 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:03:26.984 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:26.984 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:03:26.986 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:03:26.986 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:26.987 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:03:26.987 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:03:26.988 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:26.989 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 70.7449ms
2025-05-11 20:03:26.990 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:26.991 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:26.991 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:03:26.992 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:26.993 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:26.993 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:03:26.994 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:26.995 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:26.996 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:26.996 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:03:26.997 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:26.998 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:03:26.998 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:03:26.999 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.000 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 139.775ms
2025-05-11 20:03:27.002 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:03:27.002 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.006 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:03:27.006 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.008 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.009 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.009 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:03:27.010 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.011 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.012 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.012 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:03:27.013 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.014 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:03:27.015 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.017 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:03:27.017 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.018 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:03:27.018 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.019 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:03:27.019 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.020 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:03:27.021 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.021 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:03:27.022 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.024 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 115.46ms
2025-05-11 20:03:27.025 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.025 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:03:27.026 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.027 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:03:27.028 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.029 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.030 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.031 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:03:27.032 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.033 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 178.9727ms
2025-05-11 20:03:27.034 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.038 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.039 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.040 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.041 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.042 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.043 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.044 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.045 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.046 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.047 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.049 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 82ms reading results.
2025-05-11 20:03:27.050 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.051 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:03:27.053 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.054 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.055 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:27.056 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:03:27.058 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:03:27.059 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:03:27.071 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:03:27.074 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.075 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.076 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.077 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.078 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.079 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.080 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.081 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.082 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.082 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.083 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 9ms reading results.
2025-05-11 20:03:27.085 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.086 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:03:27.087 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.088 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.089 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:27.089 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:03:27.090 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:27.091 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:03:27.093 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:03:27.094 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.095 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:03:27.096 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.097 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:03:27.098 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:03:27.100 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:03:27.101 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:03:27.101 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:03:27.102 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:03:27.103 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:03:27.103 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 186.5425ms
2025-05-11 20:03:27.104 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:03:27.105 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:03:27.105 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:03:27.107 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:03:27.107 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.108 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:03:27.109 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:03:27.109 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:03:27.110 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 250.1567ms
2025-05-11 20:03:27.111 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:03:27.114 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:03:27.115 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:03:27.115 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:03:27.116 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:03:27.117 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:03:27.118 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:03:27.119 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:03:27.120 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:27.121 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:03:27.122 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:27.123 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:27.124 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:27.125 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:03:27.126 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:03:27.127 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:27.128 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:27.128 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:03:27.129 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:03:27.130 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:03:27.132 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:03:27.132 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:03:27.133 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.134 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.134 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:27.135 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:03:27.136 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:27.136 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:03:27.138 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:03:27.139 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.140 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.140 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.141 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.142 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.142 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.143 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.144 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.144 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.145 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.146 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.147 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.147 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.148 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.149 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.150 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.150 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.151 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.152 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.153 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.153 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.154 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.155 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.156 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.156 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.157 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.158 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.159 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.160 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.161 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.161 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.162 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.163 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.164 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.165 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.166 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.166 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.167 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.168 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.169 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.170 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.171 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.172 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.173 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.173 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 34ms reading results.
2025-05-11 20:03:27.174 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.175 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:03:27.176 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.176 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.177 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:27.178 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:03:27.178 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:27.179 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:03:27.180 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:03:27.182 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.182 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.183 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.184 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.185 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.186 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.186 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.187 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.188 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:03:27.189 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.190 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2025-05-11 20:03:27.191 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.192 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:03:27.193 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.194 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.195 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:27.195 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:03:27.196 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:27.197 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:03:27.199 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:03:27.200 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.201 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:03:27.202 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.203 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:03:27.205 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:03:27.206 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:03:27.207 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:03:27.207 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:03:27.208 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:03:27.209 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:03:27.209 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 86.2334ms
2025-05-11 20:03:27.210 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:03:27.211 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:03:27.212 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:27.213 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:03:27.214 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 108.8372ms
2025-05-11 20:03:33.463 +07:00 [DBG] Connection id "0HNCGH6OBB7JF" received FIN.
2025-05-11 20:03:33.494 +07:00 [DBG] Connection id "0HNCGH6OBB7JF" is closed. The last processed stream ID was 19.
2025-05-11 20:03:33.494 +07:00 [DBG] The connection queue processing loop for 0HNCGH6OBB7JF completed.
2025-05-11 20:03:33.504 +07:00 [DBG] Connection id "0HNCGH6OBB7JF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 20:03:33.520 +07:00 [DBG] Connection id "0HNCGH6OBB7JF" stopped.
2025-05-11 20:03:33.717 +07:00 [DBG] Connection id "0HNCGH6OBB7JG" accepted.
2025-05-11 20:03:33.719 +07:00 [DBG] Connection id "0HNCGH6OBB7JG" started.
2025-05-11 20:03:33.724 +07:00 [DBG] Connection 0HNCGH6OBB7JG established using the following protocol: "Tls13"
2025-05-11 20:03:33.727 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:03:33.727 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:03:33.731 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:03:33.733 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:03:33.734 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:03:33.734 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:03:33.735 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:03:33.736 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:03:33.736 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:03:33.737 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:03:33.738 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:03:33.740 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:03:33.741 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:03:33.742 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:03:33.743 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:03:33.744 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:03:33.744 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:03:33.745 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:03:33.746 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:03:33.747 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:03:33.748 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:03:33.749 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:03:33.750 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:03:33.751 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:03:33.752 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:33.753 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:33.755 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:03:33.756 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:03:33.757 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:33.758 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:03:33.759 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:33.760 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:33.761 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:33.762 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:03:33.763 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:03:33.763 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:03:33.764 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:03:33.765 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:03:33.766 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:03:33.767 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:03:33.768 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:03:33.769 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:03:33.770 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:03:33.771 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:03:33.772 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:03:33.772 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:03:33.773 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:03:33.774 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:03:33.774 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:03:33.775 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:03:33.776 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:33.777 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:33.778 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:33.779 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:33.780 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:33.780 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:33.781 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:03:33.782 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:03:33.782 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:33.783 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:03:33.784 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:03:33.784 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:03:33.787 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:03:33.788 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:03:33.788 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:33.789 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:33.790 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:33.791 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:33.792 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:03:33.792 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:03:33.793 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:33.794 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:03:33.795 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:03:33.795 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:03:33.796 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:03:33.797 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:03:33.798 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:33.798 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:33.799 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:33.800 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:33.801 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:03:33.801 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:03:33.802 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:33.803 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:03:33.804 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:03:33.805 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:03:33.806 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:03:33.807 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:03:33.807 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:03:33.807 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:03:33.808 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:33.808 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:33.809 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:33.810 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:33.810 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:33.811 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:03:33.811 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:33.812 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:03:33.813 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:03:33.814 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:03:33.814 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:03:33.815 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:03:33.817 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:03:33.818 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:03:33.819 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:33.820 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:33.820 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:03:33.821 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:03:33.822 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:33.823 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:33.823 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:03:33.824 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:03:33.825 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:03:33.826 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:03:33.827 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:03:33.829 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:03:33.829 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:03:33.829 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:03:33.830 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:03:33.830 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:03:33.831 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:03:33.831 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:03:33.832 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:03:33.833 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:03:33.834 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 74.5048ms
2025-05-11 20:03:33.836 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:03:33.837 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 76.6659ms
2025-05-11 20:03:33.837 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:03:33.838 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:03:33.839 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:33.839 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:03:33.840 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:03:33.841 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:03:33.842 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 115.4395ms
2025-05-11 20:03:33.843 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:03:33.846 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 119.1422ms
2025-05-11 20:04:10.959 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:04:10.963 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:10.964 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:10.966 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:04:10.967 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:04:10.966 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:10.975 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:10.977 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:10.979 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:04:10.980 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:10.981 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:10.982 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:04:10.984 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:10.984 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:10.986 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:04:10.986 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:04:10.987 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:04:10.988 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:10.990 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:04:10.991 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:04:10.992 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:04:10.993 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:10.995 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:04:10.996 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:04:10.997 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:10.998 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:11.000 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:11.001 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:11.001 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:04:11.002 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:11.003 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:11.004 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:04:11.005 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:11.007 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:11.008 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:11.010 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:11.011 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:11.013 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:11.014 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:11.015 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:11.016 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:11.018 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:11.019 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:11.021 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:11.022 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:11.023 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:11.024 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:11.025 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:04:11.030 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:11.029 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:11.027 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:11.032 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:04:11.033 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:11.035 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:11.036 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:11.038 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:11.039 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:11.040 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:11.042 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:04:11.043 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:04:11.044 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:04:11.045 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:11.047 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:11.049 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:04:11.050 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:11.051 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:11.052 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:11.053 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:11.054 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:11.055 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:11.056 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:11.057 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:11.058 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:11.060 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:11.060 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:11.061 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:11.064 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:11.064 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:11.064 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:11.065 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:04:11.065 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:04:11.066 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:11.066 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.067 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.067 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:11.068 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.069 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.070 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:11.071 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:11.071 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:11.072 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:04:11.073 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:04:11.073 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:11.075 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:11.076 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-11 20:04:11.078 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-11 20:04:11.079 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:11.080 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:04:11.081 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:11.081 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:11.085 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:11.086 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:11.087 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:04:11.087 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:11.088 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:11.089 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:04:11.090 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.090 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:11.092 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.092 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.093 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:11.094 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:04:11.094 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.095 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:11.096 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.096 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.098 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:11.098 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:04:11.099 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.101 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:11.101 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:11.101 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.102 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:04:11.103 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:11.104 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.105 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.105 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:11.106 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.107 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.107 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:11.108 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.108 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:11.109 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:11.109 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.110 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:11.112 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:04:11.112 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.111 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:11.114 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:04:11.114 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.115 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 86.4192ms
2025-05-11 20:04:11.121 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.122 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:04:11.123 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.123 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:11.124 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:04:11.125 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.125 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.127 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.127 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.128 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:04:11.129 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:04:11.129 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.130 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 163.604ms
2025-05-11 20:04:11.131 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.133 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.136 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2025-05-11 20:04:11.137 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.137 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:11.139 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.140 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:11.141 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.141 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:11.142 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.143 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:11.143 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.144 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:11.144 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.145 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:11.146 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.148 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 130.3499ms
2025-05-11 20:04:11.149 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.150 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:04:11.150 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.151 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:11.152 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.153 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.154 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.155 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:04:11.155 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.156 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 197.831ms
2025-05-11 20:04:11.157 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.160 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.161 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.161 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.162 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.163 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.164 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.165 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.166 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.167 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.168 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.170 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.171 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.172 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.173 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 82ms reading results.
2025-05-11 20:04:11.174 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.175 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:11.176 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.177 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.178 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:11.178 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:11.179 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:11.180 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:11.183 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:11.185 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.185 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.186 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.188 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.189 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.189 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.190 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.191 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.192 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.192 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.193 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2025-05-11 20:04:11.194 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.195 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:04:11.196 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.197 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.198 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:11.199 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:11.199 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:11.200 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:11.204 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:11.206 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.207 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:04:11.208 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.209 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:11.210 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:11.212 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:11.212 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:11.213 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:11.213 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:11.214 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:04:11.215 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 187.6886ms
2025-05-11 20:04:11.216 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:11.217 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:11.217 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:04:11.218 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.221 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:04:11.220 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:11.223 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 256.9666ms
2025-05-11 20:04:11.224 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:11.227 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:11.227 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:04:11.229 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:04:11.230 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:11.232 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:11.233 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:11.233 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:11.234 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:11.237 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:11.239 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:11.240 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:11.241 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:11.243 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:11.245 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:11.246 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:11.247 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:04:11.248 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:11.249 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:11.251 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:11.252 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:11.253 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:11.255 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:11.255 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:04:11.256 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.258 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.259 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:11.260 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:11.261 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:11.262 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:11.267 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:11.268 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.269 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.270 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.271 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.272 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.273 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.274 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.275 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.275 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.276 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.277 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.279 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.280 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.281 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.282 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.282 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.283 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.284 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.285 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.286 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.287 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.287 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.288 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.289 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.289 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.290 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.291 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.292 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.293 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.294 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.294 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.295 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.296 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.296 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.297 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.298 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.299 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.300 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.300 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.301 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.302 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.303 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.303 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.304 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.305 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 36ms reading results.
2025-05-11 20:04:11.306 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.307 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:11.308 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.309 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.310 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:11.310 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:11.311 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:11.312 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:11.315 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:11.316 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.317 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.318 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.319 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.320 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.321 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.321 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.322 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.323 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:11.323 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.324 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 20:04:11.325 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.326 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:11.327 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.328 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.329 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:11.329 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:11.330 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:11.331 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:11.334 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:11.335 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.336 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:04:11.337 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.338 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:11.338 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:11.340 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:11.340 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:11.341 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:11.341 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:11.342 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:04:11.343 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 99.5559ms
2025-05-11 20:04:11.344 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:11.344 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:11.345 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:11.346 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:04:11.347 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 129.8446ms
2025-05-11 20:04:41.691 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:04:41.696 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:04:41.696 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:04:41.701 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:41.703 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:41.706 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:41.706 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:41.707 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:41.709 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:41.710 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:41.710 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:41.711 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:41.711 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:04:41.712 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:04:41.712 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:04:41.713 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:04:41.714 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:04:41.715 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:04:41.716 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:04:41.717 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:41.718 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:04:41.719 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:41.719 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:41.720 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:41.720 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:04:41.721 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:41.722 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:04:41.722 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:04:41.723 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:41.724 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:04:41.725 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:41.726 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:41.726 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:41.727 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:41.728 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:41.729 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:41.730 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:41.731 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:41.731 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:41.732 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:41.733 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:41.734 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:41.735 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:41.736 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:41.736 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:41.737 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:41.739 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:41.739 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:41.740 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:41.741 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:41.742 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:41.743 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:04:41.743 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:41.744 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:41.745 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:41.746 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:04:41.747 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:04:41.747 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:04:41.748 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:41.749 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:41.750 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:41.750 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:41.751 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:41.751 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:41.752 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:41.753 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:41.753 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:04:41.754 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:41.754 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:41.755 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:04:41.757 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:41.761 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:41.762 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:41.763 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:41.765 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:41.765 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:41.765 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:04:41.766 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:04:41.767 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:41.767 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.768 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.768 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:41.769 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.770 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.771 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:41.772 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:41.772 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:41.773 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:41.773 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:41.774 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:41.774 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:41.775 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:04:41.776 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:04:41.776 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:41.777 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:41.778 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:04:41.778 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:04:41.781 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:41.782 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:41.782 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:41.783 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.784 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:41.785 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.785 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:04:41.786 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:41.787 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.788 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.789 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:41.790 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.791 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:04:41.791 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:04:41.792 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.793 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.794 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:41.794 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.795 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:04:41.795 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:41.796 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.797 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:41.798 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:41.798 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.800 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:41.801 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:41.801 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.802 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:41.804 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:41.804 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.805 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:41.806 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:41.807 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.807 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:41.807 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:04:41.808 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.809 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:41.809 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.810 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.812 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.811 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 72.1108ms
2025-05-11 20:04:41.817 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.817 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:41.819 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:04:41.820 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.820 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:04:41.821 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:41.822 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.823 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-11 20:04:41.823 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.824 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.826 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:04:41.826 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-11 20:04:41.827 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.829 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 133.3291ms
2025-05-11 20:04:41.830 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.834 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:04:41.835 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.836 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.836 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.837 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:04:41.837 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.841 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.841 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.843 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:04:41.844 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.845 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:41.846 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.848 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:41.849 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.850 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:41.851 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.851 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:41.852 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.853 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:41.854 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.855 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:41.857 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.863 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.864 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 126.2028ms
2025-05-11 20:04:41.865 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.869 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:04:41.871 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.874 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.873 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:41.875 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.880 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.878 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.882 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.889 +07:00 [DBG] Disposed connection to database '' on server '' (11ms).
2025-05-11 20:04:41.890 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.891 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 201.5489ms
2025-05-11 20:04:41.892 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.904 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.905 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.906 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.906 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.908 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.910 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 126ms reading results.
2025-05-11 20:04:41.912 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.913 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:04:41.914 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.916 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.918 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:41.918 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:41.920 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:04:41.921 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:41.928 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:41.930 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.931 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.932 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.933 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.934 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.935 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.937 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.939 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.940 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:41.941 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.942 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 12ms reading results.
2025-05-11 20:04:41.943 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.944 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:04:41.946 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.947 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.948 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:41.949 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:41.951 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:04:41.952 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:41.955 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:41.956 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.958 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:04:41.959 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.961 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:04:41.962 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:41.964 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:41.965 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:41.965 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:41.966 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:41.967 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:04:41.968 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 229.362ms
2025-05-11 20:04:41.969 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:41.970 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:41.970 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:04:41.972 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:41.974 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:41.975 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-11 20:04:41.978 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 282.5408ms
2025-05-11 20:04:41.976 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:41.981 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:41.982 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:04:41.983 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:04:41.984 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:41.986 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:41.987 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:41.987 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:41.988 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:41.989 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:41.990 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:41.992 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:41.993 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:41.995 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:41.996 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:41.997 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:41.997 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:04:41.999 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:42.000 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:42.001 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:42.001 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:42.003 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:42.004 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:42.005 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:04:42.007 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:42.008 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:42.009 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:42.010 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:42.011 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:04:42.014 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:42.016 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:42.018 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.018 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.022 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.023 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.024 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.025 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.026 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.027 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.028 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.030 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.030 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.031 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.032 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.033 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.034 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.035 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.036 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.037 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.038 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.039 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.040 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.041 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.042 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.043 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.044 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.044 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.045 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.046 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.047 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.048 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.049 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.050 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.051 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.052 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.053 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.056 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.057 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.058 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.059 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.059 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.060 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.063 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.064 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.064 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:42.065 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 48ms reading results.
2025-05-11 20:04:42.066 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:42.067 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:42.070 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:42.071 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:42.072 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:42.073 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:42.074 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:42.075 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:42.078 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:42.079 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.080 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.081 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.082 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.084 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.085 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.086 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.087 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.089 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:42.090 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:42.091 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 11ms reading results.
2025-05-11 20:04:42.093 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:42.094 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:04:42.095 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:42.095 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:42.096 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:42.097 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:42.099 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:04:42.100 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:42.101 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:42.103 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:42.104 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:04:42.106 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:42.107 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:04:42.107 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:42.109 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:42.110 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:42.110 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:42.111 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:42.112 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:04:42.113 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 117.921ms
2025-05-11 20:04:42.114 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:42.114 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:42.115 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:42.116 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:04:42.117 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 147.4368ms
2025-05-11 20:04:43.077 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:04:43.080 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:43.080 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:43.081 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:43.082 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:04:43.083 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:04:43.084 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:04:43.086 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:43.087 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:43.089 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:43.090 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:43.091 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:43.091 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:43.092 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:04:43.093 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:43.093 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:04:43.094 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:43.095 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:43.096 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:43.097 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:43.099 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:43.100 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:43.101 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:43.103 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:43.104 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:43.105 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:43.106 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:43.107 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:43.108 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:43.109 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:43.111 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:04:43.112 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:43.113 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:04:43.114 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:43.115 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:43.118 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:43.118 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:43.119 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:43.120 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:04:43.121 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:04:43.122 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:04:43.122 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:04:43.123 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:43.124 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:43.125 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:43.127 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:43.128 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:43.128 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:04:43.129 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:43.130 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:04:43.131 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:43.132 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:43.133 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:43.134 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:43.135 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:43.137 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:43.136 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:43.139 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:04:43.139 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:43.140 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:43.141 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:43.142 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:43.142 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:43.143 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:43.143 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:43.144 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:43.145 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:43.146 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:43.147 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:04:43.147 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:04:43.148 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:43.149 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:43.150 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:43.151 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:43.152 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:43.153 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:43.154 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:43.155 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:43.155 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:43.157 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:43.160 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:04:43.162 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:43.163 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:43.163 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:04:43.165 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:43.167 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:43.169 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:43.170 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:43.170 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:43.171 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:43.174 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:04:43.175 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:43.176 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:04:43.178 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:43.178 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:04:43.178 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:04:43.181 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:43.183 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:43.184 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:43.184 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:43.185 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:43.186 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:04:43.186 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:04:43.188 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:43.190 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:04:43.190 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:43.191 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:43.192 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:43.193 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:04:43.194 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:43.195 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:43.196 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:43.197 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:04:43.197 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:43.198 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:43.199 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:43.200 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:04:43.201 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:43.202 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:43.209 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:43.212 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 105.7321ms
2025-05-11 20:04:43.212 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:43.212 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:43.213 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:43.214 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:43.215 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:43.216 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:43.217 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:43.218 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:04:43.219 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 101.2772ms
2025-05-11 20:04:43.220 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 142.8598ms
2025-05-11 20:04:43.220 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:43.224 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:43.225 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:43.225 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:04:43.227 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 143.6496ms
2025-05-11 20:04:44.864 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:04:44.867 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:44.867 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:44.868 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:44.869 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:04:44.870 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:04:44.870 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:04:44.870 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:04:44.871 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:04:44.873 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:44.875 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:44.876 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:44.877 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:44.878 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:44.879 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:04:44.879 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:44.880 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:44.881 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:04:44.881 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:04:44.882 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:04:44.884 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:44.885 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:04:44.886 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:04:44.886 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:44.888 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:44.889 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:04:44.890 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:44.891 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:44.891 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:44.893 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:44.893 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:44.894 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:04:44.895 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:44.896 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:44.897 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:04:44.898 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:44.899 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:44.901 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:44.902 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:44.903 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:44.904 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:44.905 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:04:44.906 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:44.907 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:44.908 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:44.909 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:44.910 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:44.911 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:04:44.912 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:44.913 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:44.914 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:44.915 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:44.916 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:44.916 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:44.917 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:44.918 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:44.918 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:04:44.919 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:44.920 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:44.920 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:04:44.921 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:04:44.922 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:04:44.923 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:44.924 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:44.925 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:44.926 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:44.926 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:44.927 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:44.928 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:44.929 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:44.930 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:44.931 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:44.931 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:44.932 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:44.932 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:44.934 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:44.934 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:44.934 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:44.936 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:44.937 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:44.938 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:44.938 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:04:44.939 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:04:44.939 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:44.940 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:44.940 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:44.941 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:04:44.942 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:44.942 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:44.944 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:44.944 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:44.945 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:44.946 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:44.946 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:44.947 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:44.948 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:44.948 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:04:44.949 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:04:44.950 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:44.951 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:44.952 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:04:44.953 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:44.954 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:44.955 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:04:44.955 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:04:44.957 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.958 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:44.959 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:44.960 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.960 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:04:44.961 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:44.962 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.963 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:44.963 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:44.964 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.966 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (3ms).
2025-05-11 20:04:44.966 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:44.967 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.968 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:44.969 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:44.969 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.971 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:44.972 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:44.973 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.973 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:44.974 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:04:44.975 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.975 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:44.976 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:44.976 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.977 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:44.977 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:44.978 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.979 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:44.980 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:44.980 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.981 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 65.3169ms
2025-05-11 20:04:44.982 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:04:44.982 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.983 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:04:44.984 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:04:44.985 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.986 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:44.986 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:04:44.987 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.988 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:44.990 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:04:44.990 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.991 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:04:44.992 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:44.993 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.994 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 124.1249ms
2025-05-11 20:04:44.995 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:04:44.996 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:44.999 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.000 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.001 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:04:45.002 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.003 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:45.003 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.005 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:45.005 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.006 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:45.007 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.007 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:45.008 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.008 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:45.009 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.010 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:45.011 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.012 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 114.3185ms
2025-05-11 20:04:45.013 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.014 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:04:45.015 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.016 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:45.017 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.017 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.018 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.019 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:04:45.020 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.020 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 156.724ms
2025-05-11 20:04:45.021 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.024 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.025 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.026 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.027 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.028 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.029 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.030 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.032 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.033 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.034 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.035 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.035 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.036 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.036 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 79ms reading results.
2025-05-11 20:04:45.038 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.039 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:45.040 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.041 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.041 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:45.042 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:45.042 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:45.043 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:45.044 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:45.046 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.046 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.047 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.048 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.049 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.050 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.051 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.052 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.053 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.053 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.055 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 9ms reading results.
2025-05-11 20:04:45.056 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.057 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:04:45.058 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.059 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.060 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:45.060 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:45.061 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:45.062 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:45.064 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:45.065 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.066 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:04:45.067 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.068 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:45.069 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:45.070 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:45.071 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:45.071 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:45.072 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:45.072 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:04:45.073 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 158.4424ms
2025-05-11 20:04:45.074 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:45.075 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:04:45.075 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:45.077 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:45.078 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.079 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:45.080 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:04:45.080 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:45.081 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 210.6582ms
2025-05-11 20:04:45.081 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:04:45.084 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:04:45.085 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:45.086 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:45.086 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:45.087 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:45.088 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:45.089 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:45.090 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:45.091 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:45.092 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:45.093 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:45.094 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:45.094 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:45.095 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:04:45.096 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:45.097 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:45.098 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:45.099 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:45.100 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:45.101 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:45.101 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:04:45.102 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.103 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.104 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:45.105 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:45.106 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:45.107 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:45.108 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:45.109 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.110 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.111 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.112 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.113 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.113 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.114 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.115 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.116 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.117 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.118 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.119 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.120 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.120 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.121 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.122 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.123 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.124 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.125 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.125 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.126 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.127 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.128 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.128 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.129 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.130 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.131 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.131 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.132 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.133 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.134 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.134 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.135 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.136 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.137 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.138 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.138 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.139 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.140 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.141 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.142 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.143 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.144 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.145 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.146 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 36ms reading results.
2025-05-11 20:04:45.147 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.147 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:45.148 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.149 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.150 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:45.150 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:45.151 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:45.152 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:45.154 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:45.155 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.156 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.157 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.157 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.158 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.159 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.160 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.161 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.161 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:45.162 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.163 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 20:04:45.164 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.164 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:45.166 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.166 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.167 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:45.168 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:45.168 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:45.169 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:45.171 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:45.173 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.174 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:04:45.175 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.175 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:45.176 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:45.178 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:45.178 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:45.179 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:45.179 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:45.180 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:04:45.181 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 87.9361ms
2025-05-11 20:04:45.181 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:45.182 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:45.183 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:45.184 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:04:45.185 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 110.1693ms
2025-05-11 20:04:46.058 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:04:46.060 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:46.061 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:46.062 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:46.062 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:04:46.063 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:04:46.064 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:04:46.065 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:46.067 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:46.067 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:46.068 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:46.069 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:46.069 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:46.070 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:46.070 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:04:46.072 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:46.073 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:04:46.074 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:46.075 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:46.076 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:46.077 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:46.078 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:46.079 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:46.079 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:46.080 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:46.081 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:46.082 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:46.083 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:46.084 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:46.085 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:04:46.086 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:46.086 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:04:46.088 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:46.089 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:46.090 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:46.090 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:46.092 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:46.092 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:04:46.093 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:46.094 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:04:46.094 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:04:46.095 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:46.096 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:04:46.097 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:46.098 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:46.099 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:46.100 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:46.100 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:46.101 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:04:46.102 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:46.103 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:04:46.104 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:46.105 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:46.105 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:46.106 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:46.107 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:46.107 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:46.108 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:04:46.109 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:46.110 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:46.111 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:46.111 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:46.112 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:46.113 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:46.114 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:46.114 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:46.115 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:46.116 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:46.117 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:04:46.117 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:04:46.118 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:46.119 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:46.120 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:46.121 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:46.121 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:46.122 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:46.123 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:46.123 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:46.124 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:46.125 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:46.125 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:04:46.127 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:46.127 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:46.128 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:04:46.128 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:46.129 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:46.129 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:46.130 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:46.131 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:46.132 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:46.133 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:46.133 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:46.135 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:46.135 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:04:46.136 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:04:46.136 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:04:46.137 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:46.139 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:46.140 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:46.141 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:46.142 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:46.143 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:04:46.143 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:04:46.146 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:46.147 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:04:46.148 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:04:46.148 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:46.150 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:46.151 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:04:46.152 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:04:46.153 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:46.154 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:46.155 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:46.156 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:04:46.157 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:46.158 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:46.158 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:46.160 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:46.161 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:46.161 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:46.162 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:46.162 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:46.164 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:46.167 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 85.7706ms
2025-05-11 20:04:46.167 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:46.168 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:46.169 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 77.6531ms
2025-05-11 20:04:46.170 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:46.171 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:46.171 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:46.172 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:46.173 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:04:46.174 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:46.175 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 116.9505ms
2025-05-11 20:04:46.176 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:04:46.179 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 115.2684ms
2025-05-11 20:04:47.412 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:04:47.412 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:04:47.416 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:47.417 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:47.419 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:47.420 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:47.420 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:47.421 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:47.421 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:04:47.422 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:04:47.423 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:04:47.423 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:04:47.425 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:47.426 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:47.427 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:47.427 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:47.430 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:47.430 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:47.431 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:47.432 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:47.433 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:47.434 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:47.435 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:47.436 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:47.437 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:47.438 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:47.440 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:47.441 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:47.442 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:47.443 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:47.444 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:47.445 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:47.446 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:47.447 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:47.447 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:04:47.448 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:04:47.449 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:04:47.450 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:04:47.451 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:47.452 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:47.452 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:47.454 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:04:47.453 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:47.454 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:04:47.455 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:04:47.456 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:47.457 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:04:47.458 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:47.459 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:47.459 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:47.460 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:47.461 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:47.462 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:47.462 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:47.463 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:47.464 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:47.465 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:47.465 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:47.466 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:47.467 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:47.468 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:47.469 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:04:47.469 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:47.470 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:47.473 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:04:47.474 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:47.475 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:47.475 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:47.476 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:47.477 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:47.479 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:47.479 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:47.480 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:47.481 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:04:47.482 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:47.483 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:47.484 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:04:47.484 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:47.485 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:47.486 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:47.487 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:47.488 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:47.488 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:47.489 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:47.489 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:47.491 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:47.492 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:47.492 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:04:47.493 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:47.493 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:47.494 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:04:47.495 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:47.495 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:47.496 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:47.497 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:47.497 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:47.498 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:47.499 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:04:47.499 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:47.500 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:04:47.501 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:04:47.503 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:04:47.508 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:04:47.508 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:04:47.509 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:47.511 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:47.511 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:04:47.512 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:04:47.513 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:47.515 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:47.516 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:04:47.516 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:04:47.517 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:47.518 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:47.520 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:47.521 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:47.522 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:47.522 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:47.523 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:47.523 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:47.524 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:47.524 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:47.525 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:47.525 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:47.526 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 82.3665ms
2025-05-11 20:04:47.530 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:47.530 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 85.0557ms
2025-05-11 20:04:47.531 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:47.532 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:47.532 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:47.533 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:47.534 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:04:47.535 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:47.537 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 125.2505ms
2025-05-11 20:04:47.537 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:04:47.541 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 129.5036ms
2025-05-11 20:04:48.350 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:04:48.351 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:04:48.351 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:04:48.352 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:48.354 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:48.355 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:48.356 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:48.357 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:48.357 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:48.358 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:48.358 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:48.359 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:48.359 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:04:48.360 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:04:48.361 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:04:48.362 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:04:48.363 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:04:48.363 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:04:48.365 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:04:48.365 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:04:48.366 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:48.367 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:48.368 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:48.368 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:48.369 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:04:48.369 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:04:48.370 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:48.371 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:04:48.372 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:04:48.373 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:48.374 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:48.376 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:48.377 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:48.378 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:48.379 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:48.380 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:48.382 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:48.383 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:48.384 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:48.386 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:48.388 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:48.390 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:48.391 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:48.392 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:48.393 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:48.394 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:48.395 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:48.397 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:48.398 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:48.398 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:04:48.399 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:48.400 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:04:48.401 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:48.402 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:48.403 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:48.404 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:04:48.405 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:04:48.406 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:04:48.407 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:48.408 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:48.409 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:48.410 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:48.411 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:48.412 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:48.412 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:48.413 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:48.414 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:04:48.415 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:48.416 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:48.416 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:04:48.418 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:48.418 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:48.419 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:48.421 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:48.421 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:48.422 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:48.423 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:04:48.423 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:04:48.424 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:48.425 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.425 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.426 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:48.427 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.428 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.428 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:48.429 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:48.430 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:48.431 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:48.432 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:04:48.432 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:04:48.433 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:48.434 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:04:48.435 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:04:48.436 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:48.437 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:04:48.438 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:48.438 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:04:48.442 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:48.443 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:48.443 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:48.444 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:48.445 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:04:48.446 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.446 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:48.448 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.449 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.449 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:48.450 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:04:48.451 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.452 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:04:48.453 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.454 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.455 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:48.455 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:04:48.456 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.457 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:48.458 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:48.459 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.460 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:48.461 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:48.462 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.463 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:48.463 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:48.464 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.465 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:48.466 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:48.468 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:48.467 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.468 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:48.469 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:04:48.470 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.470 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:48.471 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.472 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.473 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 77.5329ms
2025-05-11 20:04:48.474 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.474 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.475 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:04:48.476 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:48.477 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.477 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:48.478 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:04:48.479 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.480 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.481 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:04:48.482 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.482 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:04:48.483 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:04:48.484 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.485 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 134.4428ms
2025-05-11 20:04:48.488 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.491 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.492 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.492 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:04:48.493 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.494 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.495 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.496 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:04:48.497 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.498 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.498 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.499 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:04:48.500 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.501 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:48.502 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.503 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:48.504 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.504 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:48.505 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.506 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:48.507 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.507 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:48.508 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.509 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:48.510 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.520 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 125.7873ms
2025-05-11 20:04:48.528 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.530 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:04:48.531 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.532 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:48.533 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.534 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.536 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.537 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-11 20:04:48.538 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.541 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.539 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 189.4037ms
2025-05-11 20:04:48.542 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.545 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.546 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.547 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.548 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.549 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.550 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.551 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.552 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 106ms reading results.
2025-05-11 20:04:48.553 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.554 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:04:48.556 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.557 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.559 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:48.559 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:48.560 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:48.561 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:48.565 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:48.566 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.567 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.567 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.569 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.570 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.570 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.571 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.572 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.573 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.573 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.574 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2025-05-11 20:04:48.575 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.576 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:48.577 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.578 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.578 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:48.579 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:48.579 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:48.580 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:48.582 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:48.583 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.584 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:04:48.585 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.586 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:48.586 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:48.587 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:48.588 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:48.588 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:48.589 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:48.590 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:04:48.591 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 193.9795ms
2025-05-11 20:04:48.592 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:48.592 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:48.593 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:04:48.594 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.595 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:48.596 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:04:48.597 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:48.598 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 246.7957ms
2025-05-11 20:04:48.598 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:48.601 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:04:48.602 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:04:48.603 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:48.604 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:48.605 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:48.606 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:48.607 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:48.607 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:48.608 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:48.610 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:48.610 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:48.611 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:48.612 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:48.613 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:48.613 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:04:48.614 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:48.615 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:48.615 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:04:48.616 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:04:48.617 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:48.618 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:48.619 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:04:48.619 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.620 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.621 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:48.621 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:48.622 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:48.624 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:48.628 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:04:48.629 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.630 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.631 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.632 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.633 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.634 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.635 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.636 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.637 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.637 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.638 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.639 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.640 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.641 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.642 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.642 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.644 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.645 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.646 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.647 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.648 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.649 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.649 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.650 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.651 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.652 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.653 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.654 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.655 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.656 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.657 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.657 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.658 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.659 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.660 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.661 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.662 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.662 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.663 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.664 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.665 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.666 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.668 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.669 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.670 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 40ms reading results.
2025-05-11 20:04:48.671 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.672 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:48.673 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.675 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.675 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:48.676 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:48.677 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:48.678 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:48.682 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:04:48.683 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.684 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.685 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.686 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.687 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.688 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.689 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.690 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.691 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:04:48.692 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.693 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 9ms reading results.
2025-05-11 20:04:48.694 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.695 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:04:48.696 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.697 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.698 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:48.698 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:04:48.699 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:48.700 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:48.703 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:04:48.705 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.705 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:04:48.707 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.708 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:04:48.709 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:48.710 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:48.711 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:48.711 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:48.712 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:48.713 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:04:48.714 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 102.6656ms
2025-05-11 20:04:48.715 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:04:48.716 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:48.717 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:48.718 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:04:48.719 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 126.8299ms
2025-05-11 20:04:51.082 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:04:51.084 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:51.084 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:04:51.086 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:51.089 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:04:51.089 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:51.090 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:04:51.090 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:04:51.091 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:04:51.092 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:04:51.093 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:04:51.094 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:51.095 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:04:51.096 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:51.096 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:51.098 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:04:51.098 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:51.100 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:51.101 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:51.103 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:04:51.104 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:51.106 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:04:51.108 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:51.108 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:04:51.109 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:51.110 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:51.112 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:51.113 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:04:51.114 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:51.115 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:04:51.116 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:51.117 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:51.118 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:51.119 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:04:51.120 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:04:51.121 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:04:51.122 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:04:51.123 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:04:51.124 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:51.125 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:51.125 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:51.126 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:04:51.127 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:04:51.128 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:04:51.129 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:04:51.129 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:04:51.130 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:51.131 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:51.132 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:51.132 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:04:51.133 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:51.134 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:51.135 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:51.135 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:51.136 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:51.137 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:51.137 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:51.138 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:04:51.139 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:51.140 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:04:51.140 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:51.141 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:51.142 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:04:51.143 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:04:51.144 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:51.144 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:51.145 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:51.146 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:51.147 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:51.147 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:04:51.148 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:51.149 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:04:51.149 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:51.150 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:51.151 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:04:51.151 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:04:51.152 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:51.153 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:51.154 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:51.154 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:51.155 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:51.156 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:04:51.156 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:51.157 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:04:51.159 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:51.160 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:04:51.161 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:51.162 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:04:51.162 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:04:51.163 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:51.164 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:04:51.164 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:51.165 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:51.166 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:51.167 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:51.167 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:51.168 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:04:51.168 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:04:51.169 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:04:51.170 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:04:51.171 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:04:51.174 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:04:51.180 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:04:51.181 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:04:51.183 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:51.185 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:51.186 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2025-05-11 20:04:51.187 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:04:51.188 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:51.190 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:51.191 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:04:51.192 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:04:51.193 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:51.194 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:04:51.196 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:51.197 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:04:51.198 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:51.198 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:04:51.199 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:51.199 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:04:51.200 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:51.200 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:04:51.201 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:51.202 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:04:51.205 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 87.9656ms
2025-05-11 20:04:51.206 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 90.0498ms
2025-05-11 20:04:51.208 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:51.210 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:04:51.210 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:51.211 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:04:51.212 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:51.213 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:04:51.213 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:04:51.214 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:04:51.215 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 131.3258ms
2025-05-11 20:04:51.217 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 135.9978ms
2025-05-11 20:05:12.038 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:05:12.047 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:05:12.046 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:05:12.046 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:05:12.053 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:05:12.056 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:05:12.059 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:05:12.059 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:05:12.060 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:05:12.061 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:05:12.062 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:05:12.063 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:05:12.064 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:05:12.065 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:05:12.065 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:05:12.066 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:05:12.067 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:05:12.068 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:05:12.069 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:05:12.069 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:05:12.070 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:05:12.071 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:05:12.072 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:05:12.073 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:05:12.073 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:05:12.074 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:05:12.075 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:05:12.076 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:05:12.077 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:05:12.078 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:05:12.078 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:05:12.079 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:05:12.080 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:05:12.082 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:05:12.083 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:05:12.084 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:05:12.084 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:05:12.086 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:05:12.087 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:05:12.088 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:05:12.089 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:05:12.090 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:05:12.092 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:05:12.093 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:05:12.094 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:05:12.095 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:05:12.096 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:05:12.097 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:05:12.098 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:05:12.098 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:05:12.099 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:05:12.100 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:05:12.101 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:05:12.101 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:05:12.102 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:05:12.103 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:05:12.104 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:05:12.105 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:05:12.106 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:05:12.107 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:05:12.108 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:05:12.108 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:05:12.109 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:05:12.110 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:05:12.111 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:05:12.111 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:05:12.112 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:05:12.113 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:05:12.114 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:05:12.114 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:05:12.115 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:05:12.118 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:05:12.118 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:05:12.119 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:05:12.121 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:05:12.122 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:05:12.123 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:05:12.123 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:05:12.124 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:05:12.125 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:05:12.125 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.126 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.127 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:05:12.128 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.128 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.129 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:05:12.130 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:05:12.131 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:05:12.132 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:05:12.133 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:05:12.133 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:05:12.134 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:05:12.135 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:05:12.136 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:05:12.137 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:05:12.138 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:05:12.138 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:05:12.139 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:05:12.142 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:05:12.143 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:05:12.143 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:05:12.144 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:05:12.146 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:05:12.146 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.146 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:05:12.147 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.148 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.149 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:05:12.150 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:05:12.150 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.152 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:05:12.153 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.154 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.154 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:05:12.155 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:05:12.156 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.156 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:05:12.157 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:05:12.158 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.159 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:05:12.160 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:05:12.161 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.162 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:05:12.162 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:05:12.163 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.165 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:05:12.166 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:05:12.166 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.167 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:05:12.167 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:05:12.168 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.169 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.170 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:05:12.170 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.171 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.173 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 76.0621ms
2025-05-11 20:05:12.174 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.179 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:05:12.180 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:05:12.181 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.182 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:05:12.183 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:05:12.184 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.185 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-11 20:05:12.187 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.188 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.189 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:05:12.190 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:05:12.191 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.195 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 148.5778ms
2025-05-11 20:05:12.196 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.199 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:05:12.201 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.202 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.203 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.204 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:05:12.205 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.206 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.207 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.208 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:05:12.209 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.210 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:05:12.210 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.212 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:05:12.212 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.213 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:05:12.214 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.215 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:05:12.216 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.217 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:05:12.218 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.219 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:05:12.220 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.224 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 130.2975ms
2025-05-11 20:05:12.224 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.225 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:05:12.226 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.227 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:05:12.229 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.230 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.231 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.232 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:05:12.233 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.234 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 195.7806ms
2025-05-11 20:05:12.235 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.238 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.239 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.240 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.241 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.242 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.244 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.244 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.246 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.247 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.248 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.249 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 103ms reading results.
2025-05-11 20:05:12.250 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.251 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:05:12.252 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.252 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.253 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:05:12.253 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:05:12.254 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:05:12.255 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:05:12.258 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:05:12.259 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.260 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.261 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.262 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.263 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.264 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.265 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.265 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.266 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.267 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.267 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2025-05-11 20:05:12.268 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.269 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:05:12.271 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.272 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.273 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:05:12.273 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:05:12.274 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:05:12.274 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:05:12.277 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:05:12.279 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.279 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:05:12.280 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.281 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:05:12.282 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:05:12.284 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:05:12.284 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:05:12.285 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:05:12.285 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:05:12.286 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:05:12.287 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 189.0686ms
2025-05-11 20:05:12.287 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:05:12.288 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:05:12.288 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:05:12.290 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:05:12.291 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.291 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:05:12.292 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:05:12.293 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:05:12.294 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 248.559ms
2025-05-11 20:05:12.294 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:05:12.297 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:05:12.298 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:05:12.299 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:05:12.299 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:05:12.300 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:05:12.301 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:05:12.301 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:05:12.302 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:05:12.303 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:05:12.304 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:05:12.305 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:05:12.306 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:05:12.307 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:05:12.307 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:05:12.308 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:05:12.309 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:05:12.310 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:05:12.311 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:05:12.312 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:05:12.314 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:05:12.314 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:05:12.315 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.315 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.316 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:05:12.317 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:05:12.318 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:05:12.319 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:05:12.321 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:05:12.322 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.323 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.323 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.325 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.326 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.327 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.328 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.329 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.329 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.330 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.331 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.333 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.334 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.335 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.336 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.336 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.337 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.338 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.340 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.341 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.342 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.342 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.343 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.344 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.345 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.346 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.347 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.348 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.349 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.350 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.350 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.351 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.352 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.353 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.354 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.355 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.356 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.357 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.357 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.358 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.359 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.361 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.362 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.362 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.363 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 41ms reading results.
2025-05-11 20:05:12.364 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.365 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:05:12.366 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.367 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.368 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:05:12.369 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:05:12.370 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:05:12.371 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:05:12.372 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:05:12.374 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.375 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.376 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.377 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.377 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.378 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.379 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.380 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.381 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:05:12.382 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.383 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2025-05-11 20:05:12.384 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.384 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:05:12.386 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.387 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.388 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:05:12.389 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:05:12.390 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:05:12.391 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:05:12.392 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:05:12.394 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.395 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:05:12.396 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.397 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:05:12.398 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:05:12.400 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:05:12.402 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:05:12.402 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:05:12.403 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:05:12.404 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:05:12.405 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 99.7964ms
2025-05-11 20:05:12.406 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:05:12.407 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:05:12.408 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:05:12.409 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:05:12.411 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 123.0852ms
2025-05-11 20:05:36.898 +07:00 [DBG] Connection id "0HNCGH6OBB7JG" received FIN.
2025-05-11 20:05:36.911 +07:00 [DBG] Connection id "0HNCGH6OBB7JG" is closed. The last processed stream ID was 59.
2025-05-11 20:05:36.911 +07:00 [DBG] The connection queue processing loop for 0HNCGH6OBB7JG completed.
2025-05-11 20:05:36.922 +07:00 [DBG] Connection id "0HNCGH6OBB7JG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 20:05:36.931 +07:00 [DBG] Connection id "0HNCGH6OBB7JG" stopped.
2025-05-11 20:06:24.119 +07:00 [DBG] Connection id "0HNCGH6OBB7JH" accepted.
2025-05-11 20:06:24.126 +07:00 [DBG] Connection id "0HNCGH6OBB7JH" started.
2025-05-11 20:06:24.163 +07:00 [DBG] Connection 0HNCGH6OBB7JH established using the following protocol: "Tls13"
2025-05-11 20:06:24.174 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:06:24.174 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:06:24.174 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:06:24.182 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:24.185 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:24.187 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:24.188 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:24.188 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:24.189 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:24.190 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:24.190 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:24.191 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:24.192 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:06:24.193 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:06:24.193 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:06:24.194 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:06:24.195 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:06:24.195 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:06:24.196 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:06:24.201 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:24.202 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:06:24.202 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:24.203 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:24.203 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:24.204 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:06:24.205 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:24.205 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:06:24.206 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:06:24.207 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:06:24.208 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:06:24.209 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:24.210 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:24.211 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:24.212 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:24.212 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:24.213 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:24.214 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:24.215 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:24.216 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:24.217 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:24.219 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:24.220 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:24.221 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:24.222 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:24.223 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:24.224 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:24.226 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:24.227 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:24.228 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:24.229 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:24.230 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:24.231 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:06:24.232 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:24.234 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:24.235 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:06:24.236 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:06:24.237 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:06:24.238 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:06:24.239 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:24.240 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:24.241 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:24.242 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:24.243 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:24.243 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:24.244 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:24.245 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:24.246 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:06:24.247 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:24.248 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:24.249 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:06:24.250 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:24.251 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:24.251 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:24.256 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:24.252 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:24.256 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:06:24.257 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:06:24.257 +07:00 [DBG] Created DbConnection. (5ms).
2025-05-11 20:06:24.259 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:24.259 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.260 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.261 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:24.262 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.263 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.263 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:24.264 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:24.283 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:24.285 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:24.286 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (21ms).
2025-05-11 20:06:24.286 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:06:24.287 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:24.288 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (24ms).
2025-05-11 20:06:24.289 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-11 20:06:24.290 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:24.291 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:06:24.292 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:24.293 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:06:24.296 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:24.297 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:24.298 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:24.298 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:24.299 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:24.300 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:06:24.300 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.301 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:24.306 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.307 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.308 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:06:24.310 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2025-05-11 20:06:24.311 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.312 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:24.313 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.314 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.316 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:24.317 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2025-05-11 20:06:24.319 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.320 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:24.321 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:24.324 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.325 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:24.326 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:24.329 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.333 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:24.334 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:24.336 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.338 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:24.338 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:24.340 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.341 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:24.342 +07:00 [DBG] Created DbConnection. (3ms).
2025-05-11 20:06:24.344 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.345 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:06:24.346 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.348 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.349 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 122.0167ms
2025-05-11 20:06:24.350 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.352 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.353 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:06:24.353 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:24.354 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.355 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:24.356 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:06:24.357 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.358 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.359 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-11 20:06:24.360 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.361 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:06:24.362 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:06:24.363 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.364 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 190.3512ms
2025-05-11 20:06:24.366 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.370 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.372 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.373 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:06:24.376 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.380 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.382 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.383 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:06:24.384 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.386 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.388 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.389 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:06:24.390 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.391 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:24.392 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.394 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:24.396 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.396 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:24.397 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.398 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:24.400 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.400 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:24.401 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.402 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:06:24.403 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.407 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 182.5667ms
2025-05-11 20:06:24.407 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.413 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:06:24.416 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.417 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:24.418 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.419 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.420 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.421 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:06:24.422 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.423 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 249.9662ms
2025-05-11 20:06:24.424 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.429 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.430 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.431 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.432 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.433 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.436 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.439 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.440 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.444 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 143ms reading results.
2025-05-11 20:06:24.445 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.447 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:24.449 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.450 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.451 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:24.451 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:24.452 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:24.453 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:24.458 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:24.460 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.461 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.463 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.464 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.465 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.465 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.466 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.468 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.470 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.471 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.472 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 12ms reading results.
2025-05-11 20:06:24.473 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.474 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:06:24.476 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.477 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.478 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:24.479 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:24.480 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:24.481 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:24.485 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:24.487 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.488 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:06:24.489 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.490 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:24.491 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:24.493 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:24.494 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:24.495 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:24.496 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:24.497 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:06:24.498 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 272.5359ms
2025-05-11 20:06:24.499 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:24.500 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:06:24.501 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:24.508 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:24.513 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.514 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:24.515 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:06:24.516 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:24.521 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 347.2382ms
2025-05-11 20:06:24.521 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:06:24.525 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:06:24.526 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:24.527 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:24.528 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:24.529 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:06:24.530 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:24.531 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:24.532 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:24.534 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:24.537 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:24.540 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:24.541 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:24.542 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:24.543 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:06:24.545 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:24.551 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:24.552 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:24.553 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:24.555 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:24.557 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:24.557 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:06:24.558 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.560 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.561 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:24.562 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:24.563 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:24.564 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:24.569 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:24.571 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.572 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.574 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.575 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.576 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.577 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.578 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.579 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.580 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.581 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.583 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.585 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.587 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.588 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.589 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.590 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.591 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.592 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.593 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.594 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.595 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.596 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.597 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.598 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.599 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.601 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.602 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.603 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.604 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.605 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.607 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.608 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.610 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.611 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.612 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.615 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.620 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.623 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.625 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.626 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.628 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.631 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.633 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.635 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.636 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 65ms reading results.
2025-05-11 20:06:24.638 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.639 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:06:24.640 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.641 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.643 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:24.645 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:06:24.646 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:06:24.648 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:24.654 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:24.655 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.657 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.658 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.659 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.660 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.661 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.662 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.666 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.667 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:24.668 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.668 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 12ms reading results.
2025-05-11 20:06:24.669 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.671 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:24.673 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.674 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.675 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:24.676 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:24.677 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:06:24.679 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:24.688 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:24.689 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.691 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:06:24.704 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.708 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2025-05-11 20:06:24.713 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:24.716 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:24.724 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:24.725 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:24.728 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:24.729 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:06:24.730 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 190.3258ms
2025-05-11 20:06:24.733 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:24.737 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:24.740 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:24.741 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:06:24.743 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 243.062ms
2025-05-11 20:06:35.039 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:06:35.041 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:35.042 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:35.042 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:35.043 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:06:35.044 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:06:35.046 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:06:35.049 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:35.051 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:06:35.053 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:35.054 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:35.054 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:35.055 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:06:35.056 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:06:35.057 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:06:35.058 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:06:35.060 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:35.062 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:06:35.063 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:35.065 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:35.066 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:35.067 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:06:35.069 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:35.070 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:06:35.071 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:35.072 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:35.074 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:35.075 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:35.076 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:35.077 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:35.078 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:06:35.079 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:35.080 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:06:35.081 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:35.082 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:35.083 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:35.084 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:35.085 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:35.086 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:06:35.087 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:06:35.088 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:06:35.089 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:06:35.090 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:35.090 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:35.091 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:06:35.092 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:35.094 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:35.095 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:06:35.096 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:35.096 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:06:35.097 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:35.098 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:35.099 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:35.099 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:06:35.100 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:35.101 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:35.102 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:35.103 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:35.103 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:06:35.104 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:35.105 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:35.106 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:35.107 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:35.107 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:35.109 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:35.108 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:35.110 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:06:35.111 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:35.112 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:35.113 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:35.113 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:35.114 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:06:35.115 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:35.115 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:35.116 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:35.117 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:35.117 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:35.118 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:35.119 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:06:35.119 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:35.120 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:35.121 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:35.121 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:35.123 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:35.123 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:35.124 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:06:35.125 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:35.126 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:35.128 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:35.129 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:35.131 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:35.131 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:35.132 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:35.132 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:06:35.133 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:35.134 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:35.134 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:06:35.135 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:35.137 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:35.138 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:35.138 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:35.139 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:06:35.141 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:06:35.143 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:35.144 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:06:35.144 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:06:35.145 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:35.146 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:35.147 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:06:35.148 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:35.148 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:35.149 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:35.150 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:35.151 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:35.152 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:35.153 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:35.154 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:35.154 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:35.155 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:35.155 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:35.156 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:35.157 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:06:35.157 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:35.160 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:06:35.163 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 88.1513ms
2025-05-11 20:06:35.166 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 82.1726ms
2025-05-11 20:06:35.171 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:06:35.172 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:06:35.173 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:35.174 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:35.174 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:35.175 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:35.176 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:06:35.177 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:06:35.178 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 139.4687ms
2025-05-11 20:06:35.179 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 135.2921ms
2025-05-11 20:06:35.999 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:06:36.002 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:36.004 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:36.004 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:06:36.004 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:06:36.005 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:36.006 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:36.008 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:36.009 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:06:36.010 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:36.011 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:36.012 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:06:36.013 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:36.013 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:36.014 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:06:36.015 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:06:36.016 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:06:36.017 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:36.018 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:06:36.019 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:06:36.020 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:06:36.021 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:36.022 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:06:36.023 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:06:36.023 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:36.024 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:36.026 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:36.026 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:36.027 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:06:36.028 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:36.029 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:06:36.029 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:06:36.030 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:36.032 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:36.034 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:36.035 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:36.036 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:36.037 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:36.038 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:36.040 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:36.042 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:36.044 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:36.045 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:36.046 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:36.048 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:36.048 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:36.049 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:36.050 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:06:36.051 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:36.052 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:36.053 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:06:36.054 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:36.055 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:36.056 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:06:36.057 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:36.057 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:36.059 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:36.060 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:06:36.060 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:06:36.061 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:36.063 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:36.064 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:36.065 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:06:36.066 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:36.067 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:36.068 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:06:36.069 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:36.069 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:36.070 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:36.071 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:36.072 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:36.073 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:06:36.074 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:36.075 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:36.075 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:36.077 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:36.078 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:36.079 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:36.080 +07:00 [DBG] Created DbConnection. (3ms).
2025-05-11 20:06:36.080 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:06:36.081 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:36.082 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.082 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.083 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:36.084 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.084 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.085 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:36.086 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:36.087 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:36.088 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:36.089 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:06:36.089 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:06:36.090 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:06:36.091 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:06:36.092 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:06:36.092 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:36.093 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:36.094 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:06:36.095 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:36.098 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:36.099 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:36.099 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:36.100 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:36.101 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.102 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:06:36.102 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:06:36.103 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.104 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.105 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:36.106 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.106 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:06:36.108 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:36.109 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.110 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.111 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:36.112 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.113 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:06:36.114 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:36.115 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.117 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:36.118 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:36.119 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.121 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:36.123 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:36.124 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.124 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:36.125 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:06:36.126 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.127 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:36.127 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.128 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.129 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:36.129 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.130 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.131 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:06:36.132 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:36.133 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.133 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 81.3032ms
2025-05-11 20:06:36.134 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:06:36.135 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.136 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:06:36.137 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-11 20:06:36.138 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.138 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:36.140 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:06:36.141 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.141 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.144 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.145 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-11 20:06:36.146 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.146 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 142.6476ms
2025-05-11 20:06:36.147 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:06:36.147 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.151 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.152 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.152 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:06:36.153 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.153 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.154 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.155 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:36.156 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.157 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:36.158 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.159 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:36.160 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.161 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:36.161 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.162 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:36.163 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.163 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:36.164 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.165 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:06:36.167 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.169 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 124.9361ms
2025-05-11 20:06:36.170 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.171 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:06:36.171 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.172 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:36.173 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.174 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.174 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.175 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:06:36.176 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.177 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 177.9223ms
2025-05-11 20:06:36.178 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.180 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.181 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.182 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.183 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.184 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.185 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.186 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.187 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.188 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.188 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.189 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 88ms reading results.
2025-05-11 20:06:36.191 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.192 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:06:36.193 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.194 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.195 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:36.195 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:36.196 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:36.197 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:36.201 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:36.202 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.203 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.204 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.206 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.207 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.208 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.208 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.209 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.209 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.210 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.210 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2025-05-11 20:06:36.211 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.213 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:36.214 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.215 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.216 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:36.217 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:36.217 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:36.219 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:36.222 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:36.226 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.227 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:06:36.229 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.230 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:36.232 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:36.234 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:36.235 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:36.236 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:36.237 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:36.238 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:06:36.240 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 188.7892ms
2025-05-11 20:06:36.241 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:36.242 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:36.243 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:06:36.243 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.245 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:36.247 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-11 20:06:36.248 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:36.250 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 246.7974ms
2025-05-11 20:06:36.251 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:36.255 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:06:36.256 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:06:36.257 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:36.258 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:36.259 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:36.261 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:06:36.265 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:36.268 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:36.270 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:36.271 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:36.273 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:36.275 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:36.276 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:36.277 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:36.278 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:06:36.279 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:36.280 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:36.281 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:36.282 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:36.283 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:36.286 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:36.286 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:06:36.287 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.289 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.290 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:36.290 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:36.291 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:36.292 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:36.294 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:36.295 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.296 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.297 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.298 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.299 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.300 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.300 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.301 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.302 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.303 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.303 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.304 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.305 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.306 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.306 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.307 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.308 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.309 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.309 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.310 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.311 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.312 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.312 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.313 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.314 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.314 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.315 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.316 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.317 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.318 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.319 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.320 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.321 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.321 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.322 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.323 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.325 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.325 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.327 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.327 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.328 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.367 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.368 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.369 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.370 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 74ms reading results.
2025-05-11 20:06:36.371 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.372 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:36.373 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.373 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.374 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:36.375 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:36.375 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:36.376 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:36.378 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:36.380 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.381 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.381 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.382 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.382 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.383 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.384 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.385 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.385 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:36.386 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.387 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 20:06:36.388 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.389 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:06:36.390 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.390 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.391 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:36.392 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:36.393 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:06:36.394 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:36.396 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:36.397 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.398 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:06:36.399 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.399 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:06:36.401 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:36.402 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:36.402 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:36.403 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:36.403 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:36.404 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:06:36.404 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 129.7618ms
2025-05-11 20:06:36.405 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:36.406 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:36.407 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:36.408 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:06:36.409 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 166.7082ms
2025-05-11 20:06:46.550 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:06:46.552 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:46.553 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:46.554 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:46.554 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:06:46.555 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:06:46.556 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:06:46.559 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:46.560 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:06:46.560 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:46.561 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:46.561 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:46.562 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:06:46.563 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:06:46.563 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:06:46.564 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:06:46.565 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:46.567 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:06:46.568 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:46.569 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:46.570 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:46.571 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:06:46.572 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:46.573 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:06:46.574 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:46.575 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:46.575 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:46.576 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:46.577 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:46.578 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:46.579 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:06:46.580 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:46.581 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:06:46.582 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:46.583 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:46.584 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:46.584 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:46.585 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:46.586 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:06:46.587 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:06:46.588 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:06:46.589 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:06:46.589 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:46.590 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:46.591 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:06:46.592 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:46.593 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:46.594 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:06:46.595 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:46.595 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:06:46.596 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:46.597 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:46.598 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:46.599 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:06:46.600 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:46.601 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:46.602 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:46.603 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:46.603 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:06:46.604 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:46.605 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:46.605 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:46.606 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:46.607 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:46.608 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:46.608 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:46.609 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:46.610 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:06:46.611 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:46.611 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:46.612 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:06:46.613 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:46.614 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:46.615 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:46.615 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:46.616 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:46.617 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:46.617 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:46.618 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:46.619 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:06:46.620 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:46.621 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:46.622 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:46.623 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:46.623 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:06:46.624 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:46.624 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:46.625 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:46.626 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:46.627 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:46.627 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:46.629 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:46.629 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:46.630 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:06:46.630 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:06:46.631 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:46.631 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:06:46.632 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:46.634 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:06:46.634 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:46.636 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:46.636 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:46.637 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:06:46.637 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:06:46.638 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:06:46.639 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:46.640 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:06:46.640 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:46.642 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:46.642 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:46.643 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:06:46.644 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:46.645 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:46.645 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:46.646 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:46.646 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:46.647 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:46.648 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:46.649 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:46.650 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:06:46.650 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:46.652 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:46.654 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:46.654 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 78.2163ms
2025-05-11 20:06:46.654 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:06:46.655 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:06:46.656 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 72.2324ms
2025-05-11 20:06:46.657 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:46.657 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:06:46.658 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:46.659 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:46.659 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:06:46.660 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:46.661 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 110.7852ms
2025-05-11 20:06:46.661 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:06:46.665 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 109.369ms
2025-05-11 20:06:49.092 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:06:49.094 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:06:49.094 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:06:49.095 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:49.096 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:49.099 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:49.099 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:49.100 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:49.101 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:49.101 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:49.102 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:49.102 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:49.103 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:06:49.103 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:06:49.104 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:06:49.105 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:06:49.105 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:06:49.106 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:06:49.107 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:06:49.108 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:49.109 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:06:49.110 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:49.111 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:49.111 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:49.112 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:06:49.112 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:49.114 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:06:49.115 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:06:49.116 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:06:49.116 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:06:49.118 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:49.119 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:49.120 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:49.121 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:49.122 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:49.122 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:49.124 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:49.125 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:49.126 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:49.127 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:49.129 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:49.130 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:49.131 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:49.131 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:49.132 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:49.133 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:49.134 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:49.135 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:49.136 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:49.137 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:49.137 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:49.138 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:06:49.139 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:49.139 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:49.140 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:06:49.141 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:06:49.142 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:06:49.143 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:06:49.143 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:49.144 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:49.145 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:49.146 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:49.147 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:49.147 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:49.148 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:49.149 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:49.149 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:06:49.150 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:49.151 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:49.151 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:06:49.153 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:49.153 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:49.153 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:49.155 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:49.156 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:49.156 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:06:49.157 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:06:49.157 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:06:49.158 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:49.158 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.159 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.160 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:49.161 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.161 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.162 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:49.163 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:49.163 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:49.164 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:49.165 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:06:49.165 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:49.166 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:49.167 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:06:49.167 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:06:49.168 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:49.169 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:49.170 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:06:49.170 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:06:49.172 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:49.173 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:06:49.173 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:49.174 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.175 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.176 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:49.177 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.178 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:06:49.178 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:49.179 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.180 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.180 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:49.181 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.182 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:49.182 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:49.183 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.184 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:49.184 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:06:49.185 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.186 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:49.187 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:49.188 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.188 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:49.189 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:49.190 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.190 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:49.191 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:49.192 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.192 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:49.193 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:49.193 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.194 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:06:49.195 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:49.195 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.196 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 60.5858ms
2025-05-11 20:06:49.198 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:49.198 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.199 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:06:49.199 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:06:49.200 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.200 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:49.201 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.202 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.202 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.203 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.204 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.204 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:06:49.205 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:49.206 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.207 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 113.3241ms
2025-05-11 20:06:49.207 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:06:49.208 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.210 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-11 20:06:49.212 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.212 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:06:49.213 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.215 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:06:49.215 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.217 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.217 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.219 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:06:49.220 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.221 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.221 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.222 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:49.223 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.224 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:49.225 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.226 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:49.227 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.227 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:49.228 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.228 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:49.229 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.230 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:49.230 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.231 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:06:49.232 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.234 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 100.2028ms
2025-05-11 20:06:49.234 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.235 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:06:49.236 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.236 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:49.237 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.238 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.238 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.239 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:06:49.240 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.241 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 149.4905ms
2025-05-11 20:06:49.242 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.244 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.245 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.246 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.246 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.247 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.248 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.249 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.249 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.250 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 75ms reading results.
2025-05-11 20:06:49.251 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.251 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:06:49.252 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.253 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.254 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:49.255 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:49.255 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:49.256 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:49.258 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:49.259 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.260 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.261 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.261 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.262 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.263 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.263 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.264 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.264 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.265 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.266 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 6ms reading results.
2025-05-11 20:06:49.267 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.267 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:06:49.269 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.269 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.270 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:49.271 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:49.271 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:49.272 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:49.274 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:49.275 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.275 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:06:49.276 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.277 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:06:49.278 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:49.279 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:49.279 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:49.280 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:49.280 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:49.281 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:06:49.282 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 147.5335ms
2025-05-11 20:06:49.283 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:49.284 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:06:49.284 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:49.285 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:49.286 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.286 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:49.287 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:06:49.288 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:49.288 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 195.1858ms
2025-05-11 20:06:49.289 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:06:49.291 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:06:49.292 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:49.293 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:49.294 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:49.294 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:06:49.296 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:49.296 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:49.297 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:49.299 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:49.300 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:49.301 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:49.302 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:49.303 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:49.303 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:06:49.304 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:49.305 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:49.306 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:49.306 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:49.308 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:49.309 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:49.310 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:06:49.310 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.311 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.312 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:49.312 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:49.313 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:49.314 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:49.315 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:49.316 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.317 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.318 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.318 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.319 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.320 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.320 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.321 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.323 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.325 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.326 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.327 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.328 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.328 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.332 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.333 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.333 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.335 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.336 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.338 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.338 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.339 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.340 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.341 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.342 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.342 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.343 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.344 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.345 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.346 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.346 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.347 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.348 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.348 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.349 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.350 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.351 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.351 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.352 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.353 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.353 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.354 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.355 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.355 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.356 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 39ms reading results.
2025-05-11 20:06:49.357 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.358 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:06:49.359 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.360 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.361 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:49.361 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:49.362 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:49.363 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:49.364 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:49.366 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.366 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.367 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.368 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.368 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.369 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.370 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.371 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.371 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:49.372 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.373 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 20:06:49.374 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.374 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:06:49.375 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.376 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.377 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:49.377 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:49.378 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:49.379 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:49.380 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:49.381 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.382 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:06:49.383 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.383 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:06:49.384 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:49.386 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:49.386 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:49.387 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:49.387 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:49.388 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:06:49.388 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 87.8015ms
2025-05-11 20:06:49.389 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:49.390 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:49.390 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:49.391 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:06:49.392 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 108.8595ms
2025-05-11 20:06:54.902 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:06:54.902 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:06:54.902 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:06:54.907 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:54.909 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:54.911 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:54.912 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:54.912 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:54.913 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:54.914 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:54.915 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:54.916 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:54.917 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:06:54.918 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:06:54.918 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:06:54.920 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:06:54.920 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:06:54.921 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:06:54.922 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:06:54.923 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:54.923 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:06:54.924 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:54.924 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:54.925 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:54.925 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:06:54.926 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:54.927 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:06:54.928 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:06:54.928 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:06:54.929 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:06:54.930 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:54.931 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:54.932 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:54.934 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:54.935 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:54.936 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:54.937 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:54.938 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:54.939 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:54.941 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:54.942 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:54.943 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:54.944 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:54.945 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:54.946 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:54.948 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:54.949 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:54.950 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:54.951 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:54.952 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:54.952 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:06:54.953 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:06:54.954 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:54.955 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:54.955 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:06:54.956 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:06:54.957 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:06:54.957 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:06:54.958 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:54.959 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:54.960 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:54.960 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:54.961 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:54.962 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:06:54.963 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:54.964 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:54.965 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:06:54.966 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:54.967 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:54.968 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:06:54.969 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:54.970 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:54.970 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:54.971 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:54.972 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:54.973 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:06:54.973 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:06:54.974 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:06:54.974 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:54.975 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:54.976 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:54.977 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:54.977 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:54.978 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:54.979 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:54.979 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:54.980 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:54.981 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:06:54.981 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:06:54.982 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:54.983 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:06:54.983 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:06:54.984 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:06:54.985 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:54.985 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:54.986 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:06:54.987 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:06:54.988 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:54.989 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:06:54.990 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:54.991 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:54.992 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:54.993 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:54.994 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:54.994 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:06:54.995 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:06:54.996 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:54.997 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:54.998 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:06:54.999 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:54.999 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:06:55.000 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:55.001 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.002 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:55.003 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:06:55.003 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.005 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:55.005 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:55.006 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.007 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:55.007 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:55.008 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.009 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:55.010 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:06:55.011 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.011 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:55.012 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:06:55.013 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.013 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:06:55.014 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:55.015 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.016 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 65.852ms
2025-05-11 20:06:55.019 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.019 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:55.021 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:06:55.022 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.022 +07:00 [DBG] Created DbConnection. (3ms).
2025-05-11 20:06:55.023 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:55.028 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.027 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.031 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.032 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:55.032 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:55.027 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.030 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:06:55.033 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:55.035 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.036 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 134.2358ms
2025-05-11 20:06:55.038 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:06:55.040 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.049 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.049 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:06:55.050 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.052 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.054 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.054 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:06:55.056 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.057 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.060 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.061 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2025-05-11 20:06:55.063 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.065 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:55.067 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.069 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:55.070 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.070 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:55.071 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.073 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:55.074 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.075 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:55.076 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.077 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:06:55.078 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.090 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 142.3777ms
2025-05-11 20:06:55.092 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.096 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:06:55.097 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.098 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:55.099 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.102 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.103 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.106 +07:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-05-11 20:06:55.107 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.111 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 208.4499ms
2025-05-11 20:06:55.112 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.117 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.118 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.119 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.119 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.121 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.123 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.124 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.124 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.125 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.126 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.128 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 136ms reading results.
2025-05-11 20:06:55.130 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.131 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:55.132 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.133 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.136 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:55.137 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:55.138 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:06:55.139 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:55.142 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:55.144 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.145 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.147 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.148 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.151 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.152 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.153 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.154 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.156 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.158 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.159 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 14ms reading results.
2025-05-11 20:06:55.161 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.163 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:55.164 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.166 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.168 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:55.169 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:55.171 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:06:55.172 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:55.175 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:55.179 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.180 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:06:55.181 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.182 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:06:55.184 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:55.186 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:55.186 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:55.187 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:55.188 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:55.189 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:06:55.190 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 240.8467ms
2025-05-11 20:06:55.192 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:55.193 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:06:55.193 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:55.195 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:06:55.195 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.196 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:06:55.198 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:06:55.199 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:06:55.200 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 298.0337ms
2025-05-11 20:06:55.201 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:06:55.205 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:06:55.206 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:55.207 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:06:55.208 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:55.208 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:06:55.210 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:06:55.211 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:06:55.212 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:55.215 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:06:55.216 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:06:55.217 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:55.218 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:06:55.220 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:55.221 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:06:55.222 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:55.223 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:55.224 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:06:55.225 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:06:55.227 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:06:55.229 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:06:55.230 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:06:55.230 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.231 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.233 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:55.234 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:55.235 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:06:55.236 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:55.238 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:06:55.239 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.241 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.242 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.243 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.243 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.244 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.245 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.246 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.247 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.248 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.249 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.249 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.250 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.251 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.252 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.253 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.253 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.254 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.255 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.256 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.256 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.257 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.258 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.259 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.260 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.261 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.261 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.262 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.263 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.263 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.264 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.265 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.265 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.266 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.267 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.268 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.268 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.269 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.270 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.270 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.271 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.272 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.273 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.274 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.275 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 35ms reading results.
2025-05-11 20:06:55.276 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.277 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:06:55.279 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.280 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.281 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:55.282 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:55.283 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:55.284 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:55.286 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:06:55.288 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.291 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.292 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.294 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.295 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.296 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.297 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.297 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.298 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:06:55.299 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.300 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 11ms reading results.
2025-05-11 20:06:55.301 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.301 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:06:55.302 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.303 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.304 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:06:55.304 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:06:55.305 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:06:55.306 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:55.307 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:06:55.309 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.310 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:06:55.311 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.311 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:06:55.312 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:06:55.314 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:06:55.314 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:06:55.315 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:06:55.315 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:06:55.316 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:06:55.317 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 100.4742ms
2025-05-11 20:06:55.318 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:06:55.319 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:06:55.319 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:06:55.320 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:06:55.321 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 128.8916ms
2025-05-11 20:07:06.742 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:07:06.743 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:07:06.745 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:07:06.747 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:07:06.748 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:07:06.749 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:07:06.749 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:07:06.750 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:07:06.751 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:07:06.752 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:07:06.753 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:07:06.754 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:07:06.756 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:07:06.757 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:07:06.757 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:07:06.758 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:07:06.758 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:07:06.759 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:07:06.760 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:07:06.761 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:07:06.762 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:07:06.763 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:07:06.764 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:07:06.765 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:07:06.765 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:07:06.767 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:07:06.768 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:07:06.769 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:07:06.770 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:07:06.771 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:07:06.772 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:07:06.773 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:07:06.774 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:07:06.775 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:07:06.776 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:07:06.776 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:07:06.777 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:07:06.778 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:07:06.779 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:07:06.780 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:07:06.781 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:07:06.782 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:07:06.782 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:07:06.783 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:07:06.784 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:07:06.784 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:07:06.785 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:07:06.786 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:07:06.786 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:07:06.788 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:07:06.788 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:07:06.789 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:07:06.790 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:07:06.791 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:07:06.791 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:07:06.792 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:07:06.793 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:07:06.793 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:07:06.794 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:07:06.795 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:07:06.796 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:07:06.796 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:07:06.797 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:07:06.798 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:07:06.798 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:07:06.799 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:07:06.800 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:07:06.801 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:07:06.801 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:07:06.802 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:07:06.803 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:07:06.804 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:07:06.805 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:07:06.805 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:07:06.806 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:07:06.807 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:07:06.808 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:07:06.809 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:07:06.809 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:07:06.810 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:07:06.811 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:07:06.811 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:07:06.812 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:07:06.813 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:07:06.814 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:07:06.815 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:07:06.816 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:07:06.817 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:07:06.817 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:07:06.818 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:07:06.818 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:07:06.819 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:07:06.819 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:07:06.820 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:07:06.821 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:07:06.821 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:07:06.822 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:07:06.823 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:07:06.823 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:07:06.824 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:07:06.825 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:07:06.826 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:07:06.831 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:07:06.831 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:07:06.832 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:07:06.833 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:07:06.834 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:07:06.834 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:07:06.835 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:07:06.836 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:07:06.837 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:07:06.837 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:07:06.838 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:07:06.839 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:07:06.840 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:07:06.841 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:07:06.842 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:07:06.842 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:07:06.843 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:07:06.843 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:07:06.844 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:07:06.844 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:07:06.845 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:07:06.845 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:07:06.846 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 72.8442ms
2025-05-11 20:07:06.849 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:07:06.850 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 77.887ms
2025-05-11 20:07:06.850 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:07:06.851 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:07:06.852 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:07:06.852 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:07:06.853 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:07:06.853 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:07:06.854 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 111.1873ms
2025-05-11 20:07:06.855 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:07:06.857 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 115.1399ms
2025-05-11 20:08:02.485 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:08:02.491 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:08:02.496 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:08:02.491 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:08:02.499 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:08:02.499 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:08:02.502 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:08:02.503 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:08:02.503 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:08:02.504 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:08:02.505 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:08:02.506 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:08:02.506 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:08:02.507 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:08:02.508 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:08:02.509 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:08:02.510 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:08:02.511 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:08:02.512 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:08:02.513 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:08:02.514 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:08:02.515 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:08:02.515 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:08:02.517 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:08:02.518 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:08:02.519 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:08:02.520 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:08:02.520 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:08:02.521 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:08:02.523 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:08:02.523 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:08:02.525 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:08:02.526 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:08:02.527 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:08:02.528 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:08:02.529 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:08:02.530 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:08:02.531 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:08:02.532 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:08:02.534 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:08:02.535 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:08:02.536 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:08:02.537 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:08:02.539 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:08:02.541 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:08:02.542 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:08:02.543 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:08:02.545 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:08:02.546 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:08:02.548 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:08:02.549 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:08:02.550 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:08:02.551 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:08:02.552 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:08:02.553 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:08:02.555 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:08:02.556 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:08:02.557 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:08:02.558 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:08:02.560 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:08:02.561 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:08:02.562 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:08:02.563 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:08:02.564 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:08:02.565 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:08:02.566 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:08:02.567 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:08:02.568 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:08:02.569 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:08:02.570 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:08:02.572 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:08:02.572 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:08:02.579 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:08:02.580 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:08:02.582 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:08:02.583 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:08:02.584 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:08:02.585 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:08:02.585 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:08:02.587 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:08:02.587 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.588 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.589 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:08:02.590 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.591 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.592 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:08:02.593 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:08:02.594 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:08:02.595 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:08:02.596 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:08:02.596 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:08:02.597 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:08:02.598 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-11 20:08:02.599 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:08:02.600 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:08:02.600 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:08:02.601 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:08:02.602 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:08:02.605 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:08:02.606 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:08:02.607 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:08:02.607 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:08:02.609 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:08:02.609 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.609 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:08:02.611 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.611 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.612 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:08:02.613 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:08:02.613 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.614 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:08:02.615 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.616 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.616 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:08:02.617 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:08:02.618 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.618 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:08:02.619 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:08:02.620 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.621 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:08:02.623 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:08:02.623 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.625 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:08:02.625 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:08:02.625 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.626 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:08:02.628 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:08:02.628 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.629 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:08:02.629 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:08:02.630 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.631 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:08:02.631 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.632 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.634 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.633 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 89.9019ms
2025-05-11 20:08:02.636 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.640 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:08:02.641 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:08:02.642 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.642 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:08:02.643 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:08:02.644 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.645 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:08:02.645 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.646 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.647 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:08:02.647 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:08:02.648 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.650 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 158.5885ms
2025-05-11 20:08:02.651 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.653 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:08:02.653 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.655 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.656 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.656 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:08:02.657 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.657 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.658 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.659 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:08:02.659 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.660 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:08:02.661 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.663 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:08:02.663 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.664 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:08:02.664 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.665 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:08:02.665 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.666 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:08:02.666 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.667 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:08:02.668 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.670 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 129.7225ms
2025-05-11 20:08:02.671 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.671 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:08:02.672 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.673 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:08:02.674 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.675 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.676 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.676 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:08:02.677 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.678 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 193.1763ms
2025-05-11 20:08:02.679 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.681 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.682 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.683 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.684 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.685 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.686 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.686 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.687 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.689 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.689 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.690 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 81ms reading results.
2025-05-11 20:08:02.691 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.692 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:08:02.693 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.694 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.695 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:08:02.696 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:08:02.697 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:08:02.698 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:08:02.700 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:08:02.702 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.704 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.705 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.705 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.706 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.707 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.708 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.708 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.710 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.710 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.711 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2025-05-11 20:08:02.712 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.713 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:08:02.714 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.715 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.716 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:08:02.718 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:08:02.719 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:08:02.719 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:08:02.722 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:08:02.724 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.725 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:08:02.726 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.726 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:08:02.727 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:08:02.729 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:08:02.729 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:08:02.729 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:08:02.730 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:08:02.731 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:08:02.732 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 185.6585ms
2025-05-11 20:08:02.733 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:08:02.734 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:08:02.734 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:08:02.735 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:08:02.736 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.736 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:08:02.737 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:08:02.738 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:08:02.739 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 247.6627ms
2025-05-11 20:08:02.739 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:08:02.741 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:08:02.742 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:08:02.743 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:08:02.743 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:08:02.744 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:08:02.745 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:08:02.746 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:08:02.747 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:08:02.748 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:08:02.749 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:08:02.750 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:08:02.751 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:08:02.751 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:08:02.752 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:08:02.753 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:08:02.754 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:08:02.754 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:08:02.755 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:08:02.756 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:08:02.757 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:08:02.758 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:08:02.759 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.759 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.760 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:08:02.761 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:08:02.761 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:08:02.762 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:08:02.764 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:08:02.765 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.766 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.767 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.767 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.768 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.768 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.769 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.770 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.770 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.771 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.772 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.772 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.773 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.774 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.774 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.775 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.776 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.777 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.778 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.781 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.782 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.783 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.785 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.787 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.788 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.789 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.790 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.791 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.792 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.793 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.794 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.795 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.795 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.796 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.797 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.797 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.798 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.799 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.800 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.801 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.801 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.802 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.802 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.803 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.804 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 38ms reading results.
2025-05-11 20:08:02.804 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.805 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:08:02.806 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.807 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.807 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:08:02.808 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:08:02.808 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:08:02.809 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:08:02.811 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:08:02.838 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.839 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.852 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.853 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.854 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.855 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.856 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.859 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.860 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:08:02.860 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.861 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 23ms reading results.
2025-05-11 20:08:02.862 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.863 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:08:02.864 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.865 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.866 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:08:02.867 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:08:02.867 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:08:02.868 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:08:02.869 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:08:02.870 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.871 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:08:02.872 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.872 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:08:02.873 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:08:02.874 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:08:02.874 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:08:02.875 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:08:02.875 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:08:02.876 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:08:02.876 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 126.6181ms
2025-05-11 20:08:02.877 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:08:02.878 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:08:02.878 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:08:02.879 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:08:02.880 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 146.2992ms
2025-05-11 20:09:21.122 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:09:21.132 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:09:21.142 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:09:21.161 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:21.164 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:21.165 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:21.167 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:21.168 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:21.168 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:21.169 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:21.171 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:21.171 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:21.172 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:09:21.172 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:09:21.173 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:09:21.177 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:09:21.178 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:09:21.179 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:09:21.191 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:09:21.192 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:21.193 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:09:21.195 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:21.196 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:21.197 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:21.197 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:09:21.198 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:21.200 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:09:21.202 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:09:21.203 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:09:21.204 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:09:21.205 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:21.206 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:21.207 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:21.209 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:21.210 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:21.211 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:21.212 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:21.212 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:21.214 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:21.217 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:21.218 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:21.219 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:21.221 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:21.222 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:21.223 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:21.224 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:09:21.225 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:21.226 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:09:21.227 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:09:21.228 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:21.228 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:09:21.229 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:09:21.230 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:21.230 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:21.231 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:09:21.232 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:09:21.232 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:09:21.233 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:09:21.234 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:21.235 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:21.236 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:21.237 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:21.238 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:21.239 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:21.239 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:21.240 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:21.241 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:09:21.241 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:21.242 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:21.243 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:09:21.244 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:21.245 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:21.245 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:21.247 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:21.248 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:21.248 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:09:21.249 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:09:21.250 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:09:21.251 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:21.251 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.252 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.252 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:21.253 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.254 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.254 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:21.255 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:21.256 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:21.257 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:21.258 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:09:21.258 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:09:21.259 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:21.260 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:09:21.261 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:09:21.261 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:21.262 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:09:21.264 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:09:21.264 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:09:21.267 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:21.268 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:21.269 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:09:21.269 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:21.271 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.272 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:09:21.272 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:21.273 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.274 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.274 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:21.275 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.276 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:09:21.277 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:09:21.277 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.278 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.279 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:21.280 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.281 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:09:21.282 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:21.283 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.285 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:21.286 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:21.287 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.288 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:21.289 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:21.290 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.293 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:21.291 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:21.293 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.295 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:21.296 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:21.297 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.297 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:21.299 +07:00 [DBG] Created DbConnection. (3ms).
2025-05-11 20:09:21.303 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.302 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:09:21.300 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.304 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.309 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.322 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:21.306 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 80.2188ms
2025-05-11 20:09:21.325 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.326 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:09:21.327 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:09:21.328 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.329 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-05-11 20:09:21.330 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:21.332 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.334 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:09:21.335 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.336 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.338 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-11 20:09:21.339 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.340 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 197.6882ms
2025-05-11 20:09:21.342 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.345 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:09:21.346 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.347 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.349 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.349 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:09:21.350 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.352 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.354 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.355 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:09:21.356 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.357 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:21.358 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.361 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:21.362 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.362 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:21.363 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.364 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:21.365 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.365 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:21.366 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.368 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:09:21.369 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.372 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 148.1483ms
2025-05-11 20:09:21.373 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.373 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:09:21.374 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.375 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:21.376 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.377 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.379 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.380 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:09:21.380 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.382 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 259.6935ms
2025-05-11 20:09:21.383 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.386 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.388 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.390 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.392 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.394 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.395 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.396 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.397 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.397 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.398 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 127ms reading results.
2025-05-11 20:09:21.399 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.400 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:09:21.400 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.402 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.404 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:21.405 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:09:21.405 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:21.406 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:09:21.411 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:09:21.412 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.413 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.414 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.415 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.416 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.417 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.418 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.418 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.420 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.420 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.421 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 9ms reading results.
2025-05-11 20:09:21.422 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.423 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:09:21.424 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.425 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.426 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:21.426 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:09:21.427 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:21.427 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:09:21.430 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:09:21.432 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.433 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:09:21.434 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.435 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:09:21.436 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:21.438 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:21.438 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:21.482 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:21.483 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:21.484 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:09:21.487 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 261.7212ms
2025-05-11 20:09:21.489 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:21.490 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:21.491 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:09:21.492 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.495 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:21.495 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-11 20:09:21.497 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:21.498 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 366.2594ms
2025-05-11 20:09:21.498 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:21.502 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:09:21.503 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:09:21.504 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:21.505 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:21.505 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:21.506 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:09:21.507 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:21.508 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:21.509 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:21.511 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:21.512 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:21.513 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:21.514 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:21.515 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:21.516 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:09:21.517 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:21.518 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:21.519 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:21.519 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:21.521 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:21.522 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:21.523 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:09:21.524 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.527 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.529 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:21.530 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:09:21.531 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:09:21.532 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:09:21.537 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:09:21.538 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.539 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.540 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.543 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.544 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.545 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.546 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.547 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.553 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.554 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.556 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.557 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.558 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.561 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.563 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.571 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.572 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.573 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.576 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.577 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.578 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.579 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.580 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.581 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.585 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.586 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.587 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.588 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.590 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.591 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.592 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.593 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.594 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.595 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.597 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.598 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.599 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.600 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.601 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.602 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.605 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.608 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.615 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.616 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.618 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 79ms reading results.
2025-05-11 20:09:21.619 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.620 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:09:21.621 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.622 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.623 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:21.624 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:09:21.625 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:21.626 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:09:21.627 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:09:21.629 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.630 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.630 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.631 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.632 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.633 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.634 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.634 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.635 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:21.636 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.638 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2025-05-11 20:09:21.639 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.640 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:09:21.641 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.642 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.642 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:21.643 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:09:21.644 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:21.645 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:09:21.647 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:09:21.648 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.649 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:09:21.650 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.650 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:09:21.651 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:21.653 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:21.654 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:21.654 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:21.654 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:21.655 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:09:21.656 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 142.9229ms
2025-05-11 20:09:21.657 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:21.657 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:21.658 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:21.659 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:09:21.660 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 168.8407ms
2025-05-11 20:09:25.117 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:09:25.118 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:09:25.119 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:25.121 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:25.121 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:25.122 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:25.123 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:25.123 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:25.124 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:09:25.125 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:09:25.126 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:09:25.127 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:09:25.128 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:25.130 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:25.130 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:25.131 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:25.132 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:25.132 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:25.133 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:09:25.134 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:09:25.135 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:25.136 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:25.136 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:25.137 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:25.139 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:25.140 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:25.141 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:25.143 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:25.143 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:25.144 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:25.146 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:25.147 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:25.148 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:25.149 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:25.149 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:09:25.150 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:09:25.151 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:09:25.151 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:09:25.152 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:25.153 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:25.154 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:25.155 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:25.156 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:09:25.157 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:09:25.158 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:09:25.158 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:09:25.159 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:25.160 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:25.161 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:09:25.161 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:09:25.162 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:25.163 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:25.164 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:25.164 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:25.165 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:25.166 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:25.167 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:25.167 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:25.168 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:25.169 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:25.169 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:25.170 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:25.171 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:09:25.171 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:09:25.172 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:25.173 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:25.174 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:25.175 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:25.176 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:25.176 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:25.177 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:25.178 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:25.179 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:25.180 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:25.180 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:09:25.181 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:09:25.182 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:25.183 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:25.183 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:25.184 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:25.185 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:25.185 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:25.186 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:25.187 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:25.188 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:25.189 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:25.190 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:25.191 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:25.191 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:09:25.191 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:09:25.192 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:25.192 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:25.193 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:25.194 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:25.195 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:25.196 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:25.196 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:25.197 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:25.197 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:09:25.198 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:09:25.199 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:09:25.199 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:09:25.204 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:09:25.204 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:09:25.206 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:25.206 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:25.207 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:09:25.208 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:09:25.209 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:25.210 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:25.211 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:09:25.212 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:09:25.213 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:25.214 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:25.216 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:25.217 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:25.218 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:25.218 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:25.219 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:25.219 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:25.220 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:25.220 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:25.222 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:09:25.222 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:09:25.226 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 79.2093ms
2025-05-11 20:09:25.234 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 88.1952ms
2025-05-11 20:09:25.234 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:25.236 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:25.237 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:25.238 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:25.239 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:25.239 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:25.240 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:09:25.241 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:09:25.242 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 124.0913ms
2025-05-11 20:09:25.243 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 125.5522ms
2025-05-11 20:09:27.796 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:09:27.798 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:27.799 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:27.800 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:27.800 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:09:27.801 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:09:27.802 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:09:27.802 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:09:27.803 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:09:27.805 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:27.807 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:27.807 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:27.808 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:27.809 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:27.809 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:09:27.810 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:27.810 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:27.811 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:09:27.812 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:09:27.812 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:09:27.813 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:27.814 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:09:27.815 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:09:27.816 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:27.817 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:27.819 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:09:27.819 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:27.820 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:27.821 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:27.822 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:27.823 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:27.824 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:09:27.825 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:27.825 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:09:27.826 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:09:27.827 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:09:27.829 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:27.830 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:27.831 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:09:27.832 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:27.833 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:27.834 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:09:27.835 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:27.836 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:27.836 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:09:27.838 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:27.839 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:27.840 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:09:27.841 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:27.842 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:27.843 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:27.844 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:27.845 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:09:27.845 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:27.846 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:27.847 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:09:27.848 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:09:27.849 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:27.849 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:27.850 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:09:27.851 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:09:27.852 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:09:27.852 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:27.854 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:27.854 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:27.855 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:09:27.856 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:27.857 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:27.858 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:27.858 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:27.859 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:27.860 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:27.861 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:27.862 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:27.862 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:27.864 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:27.864 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:27.865 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:27.866 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:27.867 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:27.868 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:27.869 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-11 20:09:27.869 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:09:27.870 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:27.870 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.871 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.871 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:09:27.872 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.873 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.873 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:27.874 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:27.875 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:27.876 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:27.876 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:27.877 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:27.878 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:27.878 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:09:27.879 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:09:27.881 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:27.882 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:09:27.882 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:09:27.883 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:27.885 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:09:27.886 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:09:27.886 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:09:27.887 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.889 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.890 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:27.891 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.892 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:09:27.892 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:27.893 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.894 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.894 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:27.895 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.896 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:09:27.897 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:27.897 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.898 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:27.899 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:27.900 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.902 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:27.904 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:27.905 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.905 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:27.905 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:09:27.906 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.907 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:27.907 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.908 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.909 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:27.910 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.910 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.911 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:09:27.912 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:27.913 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.914 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:09:27.913 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 68.6012ms
2025-05-11 20:09:27.915 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.917 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:09:27.918 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:09:27.919 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.919 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:09:27.920 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:27.921 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.922 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:09:27.922 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.923 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.925 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.925 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:09:27.926 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.927 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:09:27.928 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 126.2592ms
2025-05-11 20:09:27.929 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.930 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.933 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.933 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (3ms).
2025-05-11 20:09:27.934 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.935 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:27.936 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.937 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:27.938 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.939 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:27.939 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.940 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:27.941 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.941 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:27.942 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.943 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:09:27.944 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.946 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 118.0956ms
2025-05-11 20:09:27.947 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.948 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:09:27.948 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.949 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:27.950 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.950 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.951 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.952 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:09:27.953 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.954 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 158.1599ms
2025-05-11 20:09:27.954 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.957 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.958 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.959 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.960 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.961 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.962 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.963 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.963 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.964 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.965 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.966 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.967 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.968 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.969 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 81ms reading results.
2025-05-11 20:09:27.970 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.970 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:09:27.972 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.973 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.973 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:27.974 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:09:27.975 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:27.976 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:09:27.977 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:09:27.979 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.981 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.982 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.983 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.984 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.985 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.986 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.987 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.988 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:27.989 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.990 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 10ms reading results.
2025-05-11 20:09:27.991 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.991 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:09:27.993 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.994 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:27.995 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:27.996 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:09:27.996 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:27.997 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:09:27.999 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:09:28.000 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.001 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:09:28.002 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.003 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:09:28.004 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:28.005 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:28.006 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:28.007 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:28.007 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:28.008 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:09:28.009 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 164.9627ms
2025-05-11 20:09:28.010 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:28.010 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:09:28.012 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:28.014 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:28.014 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.015 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:28.016 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:09:28.016 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:28.017 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 215.3317ms
2025-05-11 20:09:28.018 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:09:28.020 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:09:28.021 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:28.022 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:28.023 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:28.023 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:09:28.024 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:28.025 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:28.026 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:28.028 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:28.029 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:28.030 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:28.031 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:28.032 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:28.033 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:09:28.034 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:28.035 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:28.035 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:28.036 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:28.037 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:28.039 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:28.039 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:09:28.041 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.042 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.043 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:28.044 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:09:28.045 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:28.045 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:09:28.047 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:09:28.048 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.049 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.049 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.050 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.051 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.051 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.052 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.053 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.053 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.054 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.055 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.056 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.056 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.058 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.058 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.059 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.060 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.060 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.061 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.062 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.063 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.063 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.064 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.065 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.065 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.066 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.066 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.067 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.068 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.069 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.070 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.070 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.071 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.072 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.072 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.073 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.074 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.074 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.075 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.076 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.077 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.077 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.078 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.079 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.079 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 31ms reading results.
2025-05-11 20:09:28.080 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.081 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:09:28.082 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.083 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.084 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:28.084 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:09:28.085 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:28.085 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:09:28.087 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:09:28.088 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.089 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.090 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.090 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.091 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.092 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.093 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.093 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.094 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:28.095 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.095 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 20:09:28.096 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.097 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:09:28.098 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.099 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.100 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:28.100 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:09:28.101 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:28.102 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:09:28.103 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:09:28.104 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.105 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:09:28.106 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.107 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:09:28.107 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:28.109 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:28.109 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:28.110 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:28.110 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:28.111 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:09:28.112 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 81.3567ms
2025-05-11 20:09:28.112 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:28.113 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:28.114 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:28.114 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:09:28.115 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 104.8882ms
2025-05-11 20:09:29.510 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:09:29.511 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:09:29.514 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:29.516 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:29.516 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:29.517 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:29.518 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:29.518 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:29.519 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:09:29.520 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:09:29.520 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:09:29.521 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:09:29.522 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:29.523 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:29.524 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:29.524 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:29.525 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:29.526 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:29.527 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:09:29.527 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:09:29.528 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:29.529 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:29.530 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:29.531 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:29.532 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:29.533 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:29.534 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:29.536 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:29.537 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:29.537 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:29.539 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:29.540 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:29.540 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:29.541 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:29.542 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:09:29.543 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:09:29.544 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:09:29.545 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:09:29.545 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:29.546 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:29.547 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:29.548 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:29.549 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:09:29.550 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:09:29.551 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:09:29.552 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:09:29.552 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:29.553 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:29.554 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:09:29.555 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:09:29.555 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:29.556 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:29.557 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:29.558 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:29.558 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:29.559 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:29.560 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:29.561 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:29.561 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:29.562 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:29.563 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:29.563 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:29.564 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:09:29.565 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:09:29.566 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:29.567 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:29.567 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:29.568 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:29.569 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:29.569 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:29.570 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:29.571 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:29.571 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:29.572 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:29.573 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:09:29.573 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:09:29.574 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:29.575 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:29.576 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:29.577 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:29.578 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:29.578 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:29.579 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:29.580 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:29.581 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:29.581 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:29.583 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:29.584 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:29.584 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:09:29.584 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:09:29.585 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:29.585 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:29.586 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:29.587 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:29.587 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:29.588 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:29.589 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:29.589 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:29.590 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:09:29.591 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:09:29.592 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:09:29.592 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:09:29.594 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:09:29.595 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:09:29.596 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:29.597 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:29.597 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:09:29.598 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:09:29.599 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:29.599 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:29.600 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:09:29.601 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:09:29.602 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:29.603 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:29.604 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:29.605 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:29.606 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:29.606 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:29.607 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:29.607 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:29.607 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:29.608 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:29.609 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:09:29.609 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:09:29.612 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 72.6119ms
2025-05-11 20:09:29.612 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 73.9478ms
2025-05-11 20:09:29.613 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:29.614 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:29.614 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:29.615 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:29.616 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:29.616 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:29.617 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:09:29.618 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:09:29.618 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 107.377ms
2025-05-11 20:09:29.619 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 109.85ms
2025-05-11 20:09:49.289 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:09:49.291 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:09:49.291 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:09:49.292 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:49.295 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:49.298 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:49.299 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:49.300 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:49.300 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:49.301 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:49.302 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:49.302 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:49.303 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:09:49.305 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:09:49.305 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:09:49.306 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:09:49.308 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:09:49.308 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:09:49.310 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:09:49.311 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:09:49.312 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:49.313 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:49.314 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:49.314 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:49.315 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:09:49.315 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:09:49.316 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:49.317 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:09:49.317 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:09:49.318 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:09:49.319 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:49.321 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:49.322 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:49.323 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:49.324 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:49.325 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:49.326 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:49.327 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:49.328 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:49.329 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:49.330 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:49.332 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:49.333 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:49.334 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:49.335 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:49.336 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:09:49.337 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:09:49.339 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:49.340 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:09:49.340 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:09:49.341 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:49.341 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:09:49.342 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:49.343 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:49.343 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:09:49.344 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:09:49.345 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:09:49.346 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:09:49.347 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:49.347 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:49.348 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:49.349 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:49.350 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:49.350 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:49.351 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:49.352 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:49.352 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:09:49.353 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:49.354 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:49.354 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:09:49.356 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:49.356 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:49.357 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:49.358 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:49.359 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:49.359 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:09:49.360 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:09:49.360 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:09:49.361 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:49.361 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.362 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.363 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:49.363 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.364 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.365 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:49.365 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:49.366 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:49.367 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:49.368 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:09:49.368 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:09:49.369 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:49.370 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:09:49.371 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:09:49.371 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:49.372 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:09:49.373 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:09:49.374 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:09:49.377 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:49.377 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:49.378 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:09:49.378 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:49.379 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:09:49.379 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.380 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:49.381 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.382 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.383 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:49.384 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:09:49.384 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.385 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:09:49.386 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.387 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.387 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:49.388 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-11 20:09:49.389 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.390 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:49.391 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:49.391 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.392 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:49.394 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:49.395 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.396 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:49.397 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:49.398 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.399 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:49.399 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:49.400 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.401 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:49.401 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:49.402 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.402 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:09:49.403 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:09:49.404 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.404 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.405 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 67.7078ms
2025-05-11 20:09:49.406 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.407 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.408 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:09:49.409 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.410 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:49.410 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:49.411 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.412 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:09:49.412 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.413 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.414 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-11 20:09:49.415 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-11 20:09:49.416 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.416 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:09:49.417 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 126.7435ms
2025-05-11 20:09:49.418 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.425 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.426 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.428 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.428 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:09:49.430 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.432 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.434 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.434 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:09:49.435 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.436 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.437 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.438 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:09:49.439 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.440 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:49.441 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.442 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:49.443 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.444 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:49.444 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.445 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:49.445 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.446 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:49.446 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.447 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:09:49.448 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.449 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 113.1104ms
2025-05-11 20:09:49.450 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.451 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:09:49.452 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.453 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:49.453 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.454 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.455 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.455 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:09:49.456 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.457 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 168.2503ms
2025-05-11 20:09:49.458 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.460 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.461 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.462 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.463 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.464 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.465 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.466 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.468 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 88ms reading results.
2025-05-11 20:09:49.469 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.470 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:09:49.472 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.473 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.474 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:49.475 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:49.475 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:49.476 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:09:49.480 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:09:49.482 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.483 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.483 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.485 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.486 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.488 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.488 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.489 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.490 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.492 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.493 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 11ms reading results.
2025-05-11 20:09:49.494 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.495 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:09:49.496 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.497 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.498 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:49.499 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:49.500 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:09:49.501 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:09:49.503 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:09:49.505 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.507 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:09:49.508 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.510 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:09:49.511 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:49.513 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:49.514 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:49.515 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:49.515 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:49.516 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:09:49.517 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 178.4004ms
2025-05-11 20:09:49.518 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:49.519 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:09:49.520 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:49.522 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:49.523 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.523 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:49.524 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:09:49.525 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:49.526 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 235.4454ms
2025-05-11 20:09:49.527 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:09:49.530 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:09:49.531 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:49.532 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:49.532 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:49.533 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:09:49.534 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:49.535 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:49.536 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:49.537 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:49.538 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:49.540 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:49.541 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:49.542 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:49.543 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:09:49.543 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:49.544 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:49.545 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:09:49.546 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:09:49.547 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:49.549 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:49.549 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:09:49.550 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.551 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.551 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:49.552 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:09:49.553 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:49.554 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:09:49.555 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:09:49.556 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.557 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.558 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.558 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.559 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.560 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.561 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.561 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.562 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.563 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.564 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.564 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.565 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.566 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.566 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.567 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.568 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.569 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.570 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.571 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.572 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.572 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.573 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.574 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.575 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.576 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.577 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.577 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.578 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.579 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.580 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.581 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.582 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.583 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.583 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.584 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.585 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.586 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.586 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.587 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.588 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.589 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.590 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.591 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.591 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 35ms reading results.
2025-05-11 20:09:49.592 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.593 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:09:49.594 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.595 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.595 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:49.596 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:09:49.597 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:49.598 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:09:49.599 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:09:49.600 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.601 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.602 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.602 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.603 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.604 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.605 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.605 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.606 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:09:49.607 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.607 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 20:09:49.608 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.609 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:09:49.610 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.611 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.611 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:49.612 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:09:49.613 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:49.613 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:09:49.614 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:09:49.616 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.617 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:09:49.618 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.619 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:09:49.620 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:49.621 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:49.621 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:49.622 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:49.622 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:49.623 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:09:49.624 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 84.346ms
2025-05-11 20:09:49.625 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:09:49.626 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:49.626 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:49.627 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:09:49.628 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 109.2456ms
2025-05-11 20:09:59.611 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-11 20:09:59.613 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-11 20:09:59.615 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:59.617 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:09:59.618 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:59.619 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:09:59.620 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:59.621 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:09:59.621 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:09:59.622 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-11 20:09:59.623 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:09:59.624 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-11 20:09:59.626 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:59.627 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:59.628 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:59.628 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:09:59.629 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:59.631 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:59.631 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:09:59.632 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:09:59.634 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:59.636 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:09:59.637 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:59.638 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:09:59.640 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:59.642 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:59.643 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:59.645 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:09:59.647 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:59.648 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:09:59.649 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:59.651 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:59.652 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:59.653 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:09:59.654 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:09:59.655 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:09:59.656 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:09:59.657 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-11 20:09:59.659 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:59.660 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:59.661 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:59.662 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:09:59.663 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:09:59.664 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:09:59.665 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:09:59.667 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:59.666 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:09:59.669 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:09:59.670 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:59.672 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:59.673 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:09:59.674 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:59.675 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:59.676 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:59.678 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:59.679 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:59.680 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:59.681 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:59.682 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:09:59.684 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:59.685 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:09:59.685 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:09:59.686 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:59.687 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:59.688 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:09:59.688 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:59.689 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:59.690 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:59.691 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:59.692 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:59.693 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:09:59.694 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:59.695 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:09:59.696 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:09:59.696 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:59.697 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:59.698 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:09:59.699 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:59.700 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:59.701 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:59.701 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:59.702 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:59.703 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:09:59.704 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:59.704 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:09:59.706 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:59.707 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:09:59.707 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:09:59.709 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:09:59.709 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:59.710 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:09:59.711 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:59.712 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:59.712 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:59.713 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:59.714 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:59.715 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:09:59.716 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:09:59.716 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:09:59.717 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:09:59.718 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:09:59.720 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:09:59.725 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-11 20:09:59.726 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-11 20:09:59.726 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:59.727 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:59.728 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:09:59.729 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:09:59.730 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:59.731 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:59.731 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:09:59.732 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:09:59.733 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:59.734 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:09:59.735 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:59.737 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:09:59.737 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:59.738 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:09:59.738 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:59.738 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:09:59.739 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:59.739 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:09:59.740 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:09:59.741 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:09:59.744 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 93.5869ms
2025-05-11 20:09:59.745 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 95.3992ms
2025-05-11 20:09:59.745 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:59.746 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-11 20:09:59.746 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:59.747 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:09:59.748 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:59.749 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:09:59.750 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:09:59.750 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:09:59.751 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 138.5476ms
2025-05-11 20:09:59.752 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28593 application/json; charset=utf-8 140.9099ms
2025-05-11 20:10:04.578 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-11 20:10:04.580 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-11 20:10:04.580 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:10:04.582 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:10:04.583 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:10:04.585 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:10:04.586 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:10:04.587 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:10:04.588 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:10:04.588 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:10:04.589 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:10:04.589 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:10:04.590 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-11 20:10:04.590 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:10:04.591 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:10:04.591 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-11 20:10:04.592 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-11 20:10:04.593 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:10:04.594 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:10:04.595 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:10:04.596 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:10:04.597 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:10:04.598 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:10:04.598 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:10:04.599 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:10:04.599 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:10:04.600 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:10:04.601 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:10:04.601 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-11 20:10:04.602 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:10:04.603 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:10:04.604 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:10:04.605 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:10:04.607 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:10:04.608 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:10:04.609 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:10:04.610 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:10:04.610 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:10:04.611 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:10:04.612 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:10:04.613 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:10:04.615 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:10:04.617 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:10:04.617 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:10:04.618 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:10:04.620 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:10:04.621 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:10:04.622 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:10:04.623 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:10:04.624 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-11 20:10:04.624 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:10:04.625 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-11 20:10:04.626 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:10:04.627 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:10:04.628 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-11 20:10:04.628 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:10:04.629 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:10:04.630 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-11 20:10:04.631 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:10:04.632 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:10:04.633 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:10:04.633 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:10:04.634 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:10:04.635 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-11 20:10:04.635 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:10:04.636 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:10:04.637 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-11 20:10:04.638 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:10:04.638 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:10:04.639 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-11 20:10:04.640 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:10:04.640 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:10:04.641 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:10:04.642 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:10:04.643 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:10:04.644 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-11 20:10:04.644 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:10:04.644 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:10:04.645 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-11 20:10:04.646 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.646 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.647 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:10:04.648 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.649 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.649 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-11 20:10:04.650 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:10:04.651 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:10:04.651 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-11 20:10:04.652 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:10:04.652 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:10:04.653 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-11 20:10:04.654 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:10:04.654 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-11 20:10:04.655 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-11 20:10:04.656 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:10:04.656 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:10:04.657 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-11 20:10:04.659 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-11 20:10:04.660 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:10:04.660 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:10:04.661 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.662 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.663 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-11 20:10:04.664 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-11 20:10:04.664 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.665 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-11 20:10:04.666 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.667 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.667 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-11 20:10:04.668 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:10:04.669 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.669 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:10:04.670 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:10:04.671 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.671 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-11 20:10:04.673 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:10:04.673 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.674 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:10:04.674 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:10:04.675 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.676 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:10:04.676 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:10:04.677 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.677 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-11 20:10:04.678 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:10:04.679 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.679 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-11 20:10:04.680 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:10:04.681 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.682 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:10:04.682 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 61.7171ms
2025-05-11 20:10:04.683 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.684 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:10:04.685 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-11 20:10:04.685 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.686 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-11 20:10:04.686 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:10:04.687 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.688 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.688 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.689 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.690 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.690 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:10:04.691 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.691 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:10:04.692 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 112.8501ms
2025-05-11 20:10:04.693 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.694 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-11 20:10:04.696 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.697 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-11 20:10:04.697 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.698 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:10:04.699 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.701 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-11 20:10:04.701 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.702 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.702 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.703 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-11 20:10:04.704 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.704 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.705 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.706 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-11 20:10:04.706 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.707 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:10:04.708 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.709 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:10:04.710 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.710 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:10:04.711 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.711 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:10:04.712 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.712 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:10:04.713 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.714 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-11 20:10:04.715 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.716 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 96.8412ms
2025-05-11 20:10:04.717 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.718 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-11 20:10:04.718 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.719 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:10:04.720 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.720 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.721 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.722 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:10:04.722 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.723 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 144.9466ms
2025-05-11 20:10:04.724 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.726 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.727 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.727 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.728 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.729 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.730 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.730 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.731 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.732 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 69ms reading results.
2025-05-11 20:10:04.733 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.733 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:10:04.734 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.735 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.736 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:10:04.736 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:10:04.737 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:10:04.738 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:10:04.739 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:10:04.740 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.741 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.742 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.743 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.743 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.744 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.745 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.746 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.746 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.747 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.748 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-11 20:10:04.749 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.749 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:10:04.750 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.751 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.751 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:10:04.752 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:10:04.752 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:10:04.753 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:10:04.754 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:10:04.755 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.756 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:10:04.757 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.758 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:10:04.759 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:10:04.760 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:10:04.760 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:10:04.761 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:10:04.761 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:10:04.762 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:10:04.763 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 141.2542ms
2025-05-11 20:10:04.764 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:10:04.765 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-11 20:10:04.765 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:10:04.766 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-11 20:10:04.767 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.767 +07:00 [INF] CORS policy execution successful.
2025-05-11 20:10:04.768 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-11 20:10:04.768 +07:00 [DBG] The request path  does not match the path filter
2025-05-11 20:10:04.769 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 189.6224ms
2025-05-11 20:10:04.770 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-11 20:10:04.772 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-11 20:10:04.773 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:10:04.774 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-11 20:10:04.774 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:10:04.775 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-11 20:10:04.776 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-11 20:10:04.777 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-11 20:10:04.778 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:10:04.779 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-11 20:10:04.779 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-11 20:10:04.780 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:10:04.781 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-11 20:10:04.782 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-11 20:10:04.782 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-11 20:10:04.783 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:10:04.784 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-11 20:10:04.785 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-11 20:10:04.785 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-11 20:10:04.787 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-11 20:10:04.788 +07:00 [DBG] Creating DbConnection.
2025-05-11 20:10:04.788 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-11 20:10:04.789 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.790 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.790 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:10:04.791 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:10:04.791 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:10:04.792 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:10:04.793 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-11 20:10:04.794 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.795 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.796 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.797 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.798 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.798 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.799 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.799 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.800 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.801 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.801 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.802 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.803 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.804 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.804 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.805 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.806 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.806 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.807 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.808 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.808 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.809 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.810 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.810 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.811 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.812 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.813 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.813 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.814 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.815 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.815 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.816 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.817 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.817 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.818 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.819 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.820 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.821 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.821 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.822 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.823 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.823 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.824 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.825 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.825 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 30ms reading results.
2025-05-11 20:10:04.826 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.827 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:10:04.828 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.828 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.829 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:10:04.829 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:10:04.830 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:10:04.831 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:10:04.832 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-11 20:10:04.833 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.834 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.835 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.835 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.836 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.837 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.838 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.839 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.839 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-11 20:10:04.841 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.841 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2025-05-11 20:10:04.842 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.843 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:10:04.844 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.845 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.846 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-11 20:10:04.847 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-11 20:10:04.847 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-11 20:10:04.848 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:10:04.850 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-11 20:10:04.851 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.852 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-11 20:10:04.853 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.853 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-11 20:10:04.854 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-11 20:10:04.855 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-11 20:10:04.856 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-11 20:10:04.856 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-11 20:10:04.857 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-11 20:10:04.857 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-11 20:10:04.858 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 77.8516ms
2025-05-11 20:10:04.859 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-11 20:10:04.860 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-11 20:10:04.860 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-11 20:10:04.861 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-11 20:10:04.862 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 97.3791ms
2025-05-11 20:16:23.301 +07:00 [DBG] Connection id "0HNCGH6OBB7JH" received FIN.
2025-05-11 20:16:23.306 +07:00 [DBG] Connection id "0HNCGH6OBB7JH" is closed. The last processed stream ID was 95.
2025-05-11 20:16:23.307 +07:00 [DBG] The connection queue processing loop for 0HNCGH6OBB7JH completed.
2025-05-11 20:16:23.310 +07:00 [DBG] Connection id "0HNCGH6OBB7JH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-11 20:16:23.318 +07:00 [DBG] Connection id "0HNCGH6OBB7JH" stopped.
