2025-05-15 00:01:18.354 +07:00 [DBG] Connection id "0HNCISTFO09UQ" accepted.
2025-05-15 00:01:18.520 +07:00 [DBG] Connection id "0HNCISTFO09UQ" started.
2025-05-15 00:01:18.567 +07:00 [DBG] Connection id "0HNCISTFO09UR" accepted.
2025-05-15 00:01:18.567 +07:00 [DBG] Connection id "0HNCISTFO09UR" started.
2025-05-15 00:01:18.568 +07:00 [DBG] Connection id "0HNCISTFO09US" accepted.
2025-05-15 00:01:18.626 +07:00 [DBG] Connection id "0HNCISTFO09US" started.
2025-05-15 00:01:18.687 +07:00 [DBG] Connection id "0HNCISTFO09UR" received FIN.
2025-05-15 00:01:18.687 +07:00 [DBG] Connection id "0HNCISTFO09US" received FIN.
2025-05-15 00:01:18.698 +07:00 [DBG] Connection 0HNCISTFO09UR established using the following protocol: "Tls13"
2025-05-15 00:01:18.698 +07:00 [DBG] Connection 0HNCISTFO09UQ established using the following protocol: "Tls13"
2025-05-15 00:01:18.698 +07:00 [DBG] Connection 0HNCISTFO09US established using the following protocol: "Tls13"
2025-05-15 00:01:18.708 +07:00 [DBG] Connection id "0HNCISTFO09US" is closed. The last processed stream ID was 0.
2025-05-15 00:01:18.708 +07:00 [DBG] Connection id "0HNCISTFO09UR" is closed. The last processed stream ID was 0.
2025-05-15 00:01:18.711 +07:00 [DBG] Connection id "0HNCISTFO09UR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-15 00:01:18.711 +07:00 [DBG] Connection id "0HNCISTFO09US" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-15 00:01:18.713 +07:00 [DBG] The connection queue processing loop for 0HNCISTFO09UR completed.
2025-05-15 00:01:18.713 +07:00 [DBG] The connection queue processing loop for 0HNCISTFO09US completed.
2025-05-15 00:01:18.780 +07:00 [DBG] Connection id "0HNCISTFO09US" stopped.
2025-05-15 00:01:18.780 +07:00 [DBG] Connection id "0HNCISTFO09UR" stopped.
2025-05-15 00:01:18.785 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-15 00:01:18.785 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-15 00:01:18.785 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-15 00:01:18.797 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 00:01:18.797 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 00:01:18.797 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 00:01:18.798 +07:00 [INF] CORS policy execution successful.
2025-05-15 00:01:18.798 +07:00 [INF] CORS policy execution successful.
2025-05-15 00:01:18.799 +07:00 [INF] CORS policy execution successful.
2025-05-15 00:01:18.808 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 00:01:18.808 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 00:01:18.808 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 00:01:18.812 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-15 00:01:18.812 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-15 00:01:18.812 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-15 00:01:18.814 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-15 00:01:18.814 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-15 00:01:18.814 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-15 00:01:18.820 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-15 00:01:18.820 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 00:01:18.831 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-15 00:01:18.831 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 00:01:18.831 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 00:01:18.832 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 00:01:18.837 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-15 00:01:18.837 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 00:01:18.837 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-15 00:01:18.847 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-15 00:01:18.847 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-15 00:01:18.847 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-15 00:01:18.849 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 00:01:18.850 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 00:01:18.851 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 00:01:18.851 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 00:01:18.852 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 00:01:18.853 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 00:01:18.855 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 00:01:18.855 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 00:01:18.855 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 00:01:18.857 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 00:01:18.858 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 00:01:18.859 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 00:01:18.860 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 00:01:18.861 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 00:01:18.862 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 00:01:18.864 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 00:01:18.864 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 00:01:18.865 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 00:01:18.884 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 00:01:18.884 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 00:01:18.884 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 00:01:18.887 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-15 00:01:18.887 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-15 00:01:18.887 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-15 00:01:18.889 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-15 00:01:18.889 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-15 00:01:18.890 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-15 00:01:18.891 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 00:01:18.892 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 00:01:18.893 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-15 00:01:18.893 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 00:01:18.894 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 00:01:18.895 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 00:01:18.896 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-15 00:01:18.896 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-15 00:01:18.897 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 00:01:18.898 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-15 00:01:18.898 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-15 00:01:18.899 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-15 00:01:18.901 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-15 00:01:18.902 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-15 00:01:18.903 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-15 00:01:18.904 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-15 00:01:18.905 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 00:01:18.906 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 00:01:18.907 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-15 00:01:18.908 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-15 00:01:18.908 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-15 00:01:18.909 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-15 00:01:18.910 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 00:01:18.911 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 00:01:18.912 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-15 00:01:18.913 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-15 00:01:18.914 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-15 00:01:18.914 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-15 00:01:18.915 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 00:01:18.916 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 00:01:18.917 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-15 00:01:18.918 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-15 00:01:18.924 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 00:01:18.924 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 00:01:18.924 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 00:01:18.934 +07:00 [DBG] Creating DbConnection.
2025-05-15 00:01:18.939 +07:00 [DBG] Created DbConnection. (5ms).
2025-05-15 00:01:18.941 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:18.942 +07:00 [DBG] Creating DbConnection.
2025-05-15 00:01:18.942 +07:00 [DBG] Creating DbConnection.
2025-05-15 00:01:18.943 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-15 00:01:18.943 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-15 00:01:18.944 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:18.945 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.120 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.124 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 00:01:19.125 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-15 00:01:19.126 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.126 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-15 00:01:19.127 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 00:01:19.128 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-15 00:01:19.129 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-15 00:01:19.130 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.130 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 00:01:19.130 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-15 00:01:19.131 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 00:01:19.135 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-15 00:01:19.135 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-15 00:01:19.136 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-15 00:01:19.185 +07:00 [INF] Executed DbCommand (56ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 00:01:19.190 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.191 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.192 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.193 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.194 +07:00 [INF] Executed DbCommand (58ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-15 00:01:19.194 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.194 +07:00 [INF] Executed DbCommand (63ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-15 00:01:19.195 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.196 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.197 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.198 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-15 00:01:19.199 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.200 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-15 00:01:19.201 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.202 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.202 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.203 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-15 00:01:19.204 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.205 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-15 00:01:19.206 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.208 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.208 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 00:01:19.208 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 00:01:19.209 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.211 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 00:01:19.211 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 00:01:19.212 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.213 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 00:01:19.213 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 00:01:19.214 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.214 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 00:01:19.215 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 00:01:19.216 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.216 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 00:01:19.216 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 00:01:19.217 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.218 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-15 00:01:19.219 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-15 00:01:19.219 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.222 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.222 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.223 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.224 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.225 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.225 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 361.019ms
2025-05-15 00:01:19.226 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.227 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 363.9425ms
2025-05-15 00:01:19.229 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.230 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-15 00:01:19.231 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.228 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-15 00:01:19.232 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.233 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 00:01:19.233 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 00:01:19.234 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.235 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.235 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.236 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.237 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-15 00:01:19.238 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-15 00:01:19.239 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.240 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 488.9606ms
2025-05-15 00:01:19.241 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 525.2805ms
2025-05-15 00:01:19.242 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.249 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.250 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.251 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.252 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.253 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.253 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.254 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.256 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.257 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.258 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.259 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.260 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.262 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.265 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.266 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 78ms reading results.
2025-05-15 00:01:19.267 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.268 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-15 00:01:19.270 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.272 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.273 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 00:01:19.274 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-15 00:01:19.274 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-15 00:01:19.275 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 00:01:19.281 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 00:01:19.282 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.283 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.284 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.285 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.286 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.287 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.289 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.289 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.291 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.292 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.293 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 10ms reading results.
2025-05-15 00:01:19.294 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.295 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-15 00:01:19.297 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.298 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.299 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 00:01:19.300 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-15 00:01:19.301 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-15 00:01:19.302 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 00:01:19.309 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 00:01:19.311 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.312 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-15 00:01:19.313 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.314 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-15 00:01:19.316 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 00:01:19.318 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 00:01:19.318 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 00:01:19.319 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 00:01:19.319 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 00:01:19.321 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-15 00:01:19.323 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 458.0687ms
2025-05-15 00:01:19.329 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 00:01:19.329 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-15 00:01:19.330 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 00:01:19.331 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 00:01:19.332 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.333 +07:00 [INF] CORS policy execution successful.
2025-05-15 00:01:19.333 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-15 00:01:19.335 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 584.2235ms
2025-05-15 00:01:19.335 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 00:01:19.338 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-15 00:01:19.339 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-15 00:01:19.340 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 00:01:19.343 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 00:01:19.344 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 00:01:19.353 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-15 00:01:19.354 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 00:01:19.354 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 00:01:19.356 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 00:01:19.357 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 00:01:19.358 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 00:01:19.359 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 00:01:19.361 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 00:01:19.364 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-15 00:01:19.365 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-15 00:01:19.366 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 00:01:19.367 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 00:01:19.367 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-15 00:01:19.368 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-15 00:01:19.370 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 00:01:19.371 +07:00 [DBG] Creating DbConnection.
2025-05-15 00:01:19.372 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-15 00:01:19.372 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.374 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.374 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 00:01:19.375 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-15 00:01:19.375 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-15 00:01:19.376 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 00:01:19.379 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 00:01:19.381 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.381 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.382 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.383 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.383 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.384 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.384 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.385 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.386 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.387 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.387 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.388 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.389 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.389 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.390 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.390 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.391 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.392 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.392 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.393 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.393 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.394 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.395 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.395 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.396 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.397 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.397 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.398 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.399 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.399 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.400 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.401 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.402 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.403 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.403 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.404 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.404 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.405 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.406 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.406 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.407 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.408 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.408 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.409 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.410 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 28ms reading results.
2025-05-15 00:01:19.410 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.411 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-15 00:01:19.412 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.412 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.413 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 00:01:19.414 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-15 00:01:19.414 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-15 00:01:19.415 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 00:01:19.420 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 00:01:19.421 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.422 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.423 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.423 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.424 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.424 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.425 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.426 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.426 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 00:01:19.427 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.428 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 6ms reading results.
2025-05-15 00:01:19.429 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.429 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-15 00:01:19.430 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.431 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.432 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 00:01:19.432 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-15 00:01:19.433 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-15 00:01:19.434 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 00:01:19.436 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 00:01:19.437 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.438 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-15 00:01:19.439 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.440 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-15 00:01:19.441 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 00:01:19.444 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 00:01:19.445 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 00:01:19.445 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 00:01:19.446 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 00:01:19.447 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-15 00:01:19.449 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 90.2712ms
2025-05-15 00:01:19.450 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 00:01:19.451 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 00:01:19.451 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 00:01:19.452 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-15 00:01:19.453 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 124.906ms
2025-05-15 00:01:40.358 +07:00 [DBG] Connection id "0HNCISTFO09UQ" received FIN.
2025-05-15 00:01:40.359 +07:00 [DBG] Connection id "0HNCISTFO09UQ" is closed. The last processed stream ID was 7.
2025-05-15 00:01:40.360 +07:00 [DBG] The connection queue processing loop for 0HNCISTFO09UQ completed.
2025-05-15 00:01:40.360 +07:00 [DBG] Connection id "0HNCISTFO09UQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-15 00:01:40.372 +07:00 [DBG] Connection id "0HNCISTFO09UQ" stopped.
2025-05-15 02:04:49.956 +07:00 [DBG] Connection id "0HNCISTFO09UT" accepted.
2025-05-15 02:04:49.968 +07:00 [DBG] Connection id "0HNCISTFO09UT" started.
2025-05-15 02:04:50.033 +07:00 [DBG] Connection 0HNCISTFO09UT established using the following protocol: "Tls13"
2025-05-15 02:04:50.074 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-15 02:04:50.074 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-15 02:04:50.105 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 02:04:50.105 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 02:04:50.115 +07:00 [INF] CORS policy execution successful.
2025-05-15 02:04:50.115 +07:00 [INF] CORS policy execution successful.
2025-05-15 02:04:50.130 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 02:04:50.130 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 02:04:50.136 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-15 02:04:50.136 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-15 02:04:50.142 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-15 02:04:50.142 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-15 02:04:50.153 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 02:04:50.153 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 02:04:50.162 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 02:04:50.162 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 02:04:50.166 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 02:04:50.166 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 02:04:50.175 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-15 02:04:50.175 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-15 02:04:50.176 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 02:04:50.177 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 02:04:50.178 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 02:04:50.178 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 02:04:50.181 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:50.181 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:50.184 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 02:04:50.185 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 02:04:50.186 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:50.187 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:50.189 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 02:04:50.189 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 02:04:50.204 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 02:04:50.204 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 02:04:50.208 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-15 02:04:50.208 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-15 02:04:50.211 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-15 02:04:50.211 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-15 02:04:50.212 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 02:04:50.212 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 02:04:50.213 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 02:04:50.213 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 02:04:50.214 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-15 02:04:50.215 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-15 02:04:50.216 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-15 02:04:50.216 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-15 02:04:50.217 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-15 02:04:50.217 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-15 02:04:50.218 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-15 02:04:50.219 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-15 02:04:50.220 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:50.220 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:50.221 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:50.221 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:50.222 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:50.222 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:50.223 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-15 02:04:50.224 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-15 02:04:50.224 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:50.225 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:50.226 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-15 02:04:50.226 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-15 02:04:50.227 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-15 02:04:50.228 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-15 02:04:50.228 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 02:04:50.229 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 02:04:50.230 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 02:04:50.230 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 02:04:50.231 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-15 02:04:50.232 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-15 02:04:50.233 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-15 02:04:50.233 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-15 02:04:50.234 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-15 02:04:50.234 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-15 02:04:50.235 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-15 02:04:50.236 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-15 02:04:50.236 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 02:04:50.237 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 02:04:50.238 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 02:04:50.238 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 02:04:50.239 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-15 02:04:50.240 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-15 02:04:50.240 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-15 02:04:50.241 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-15 02:04:50.266 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 02:04:50.266 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 02:04:50.279 +07:00 [DBG] Creating DbConnection.
2025-05-15 02:04:50.283 +07:00 [DBG] Created DbConnection. (4ms).
2025-05-15 02:04:50.284 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:50.286 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(pt => pt.Payment)
    .OrderBy(pt => pt.FullName)
    .Skip(__p_0)
    .Take(__p_0)
    .Select(pt => new PatientVM{ 
        PatientId = pt.PatientId, 
        Status = pt.Status, 
        Gender = pt.Gender, 
        Avatar = pt.Avatar, 
        FullName = pt.FullName, 
        Date = pt.Date, 
        Time = pt.Time, 
        Location = pt.Location, 
        Email = pt.Email, 
        PhoneNumber = pt.PhoneNumber, 
        Diseases = pt.Diseases, 
        PaymentId = pt.PaymentId, 
        PaymentName = pt.Payment.PaymentName, 
        Age = DateTime.Now.Year - pt.Date.Year - DateTime.Now < pt.Date.AddYears(DateTime.Now.Year - pt.Date.Year) ? 1 : 0 
    }
    )'
2025-05-15 02:04:50.375 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PatientVM>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            PatientId -> 0
            Status -> 1
            Gender -> 2
            Avatar -> 3
            FullName -> 4
            Date -> 5
            Time -> 6
            Location -> 7
            Email -> 8
            PhoneNumber -> 9
            Diseases -> 10
            PaymentId -> 11
            PaymentName -> 12
            Age -> 13
        SELECT t.PatientId, t.Status, t.Gender, t.Avatar, t.FullName, t.Date, t.Time, t.Location, t.Email, t.PhoneNumber, t.Diseases, t.PaymentId, p0.PaymentName, (DATEPART(year, GETDATE()) - DATEPART(year, t.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, t.Date) AS int), t.Date) THEN 1
            ELSE 0
        END AS Age
        FROM 
        (
            SELECT p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status, p.Time
            FROM Patient AS p
            ORDER BY p.FullName ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
        ) AS t
        INNER JOIN Payment AS p0 ON t.PaymentId == p0.PaymentId
        ORDER BY t.FullName ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PatientVM>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2025-05-15 02:04:50.411 +07:00 [DBG] Creating DbConnection.
2025-05-15 02:04:50.411 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-15 02:04:50.412 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:50.464 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:50.465 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 02:04:50.466 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-15 02:04:50.467 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-15 02:04:50.469 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-15 02:04:50.470 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:50.471 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 02:04:50.472 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-15 02:04:50.473 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-15 02:04:50.473 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    WHERE 0 = 1
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-15 02:04:50.517 +07:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    WHERE 0 = 1
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-15 02:04:50.518 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:50.519 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-15 02:04:50.520 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:50.521 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-15 02:04:50.524 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 02:04:50.526 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 02:04:50.526 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 02:04:50.527 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 02:04:50.527 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 02:04:50.528 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-15 02:04:50.531 +07:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-15 02:04:50.532 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 342.6224ms
2025-05-15 02:04:50.533 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 02:04:50.534 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 02:04:50.535 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:50.535 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-15 02:04:50.536 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2 application/json; charset=utf-8 467.9476ms
2025-05-15 02:04:50.537 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:50.539 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2025-05-15 02:04:50.540 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:50.541 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-15 02:04:50.542 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 02:04:50.543 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 02:04:50.544 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 02:04:50.544 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 02:04:50.545 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 02:04:50.546 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-15 02:04:50.554 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 364.018ms
2025-05-15 02:04:50.557 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 02:04:50.557 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 02:04:50.558 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:50.559 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-15 02:04:50.560 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28997 application/json; charset=utf-8 491.7191ms
2025-05-15 02:04:50.837 +07:00 [DBG] Connection id "0HNCISTFO09UT" received FIN.
2025-05-15 02:04:50.839 +07:00 [DBG] Connection id "0HNCISTFO09UT" is closed. The last processed stream ID was 3.
2025-05-15 02:04:50.840 +07:00 [DBG] Connection id "0HNCISTFO09UT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-15 02:04:50.841 +07:00 [DBG] The connection queue processing loop for 0HNCISTFO09UT completed.
2025-05-15 02:04:50.842 +07:00 [DBG] Connection id "0HNCISTFO09UT" stopped.
2025-05-15 02:04:54.786 +07:00 [DBG] Connection id "0HNCISTFO09UU" accepted.
2025-05-15 02:04:54.787 +07:00 [DBG] Connection id "0HNCISTFO09UU" started.
2025-05-15 02:04:54.793 +07:00 [DBG] Connection 0HNCISTFO09UU established using the following protocol: "Tls13"
2025-05-15 02:04:54.798 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-15 02:04:54.798 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-15 02:04:54.798 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-15 02:04:54.802 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 02:04:54.803 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 02:04:54.805 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 02:04:54.806 +07:00 [INF] CORS policy execution successful.
2025-05-15 02:04:54.807 +07:00 [INF] CORS policy execution successful.
2025-05-15 02:04:54.807 +07:00 [INF] CORS policy execution successful.
2025-05-15 02:04:54.808 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 02:04:54.809 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 02:04:54.809 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 02:04:54.810 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-15 02:04:54.810 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-15 02:04:54.811 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-15 02:04:54.812 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-15 02:04:54.813 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-15 02:04:54.814 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-15 02:04:54.815 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 02:04:54.816 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-15 02:04:54.817 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-15 02:04:54.819 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 02:04:54.819 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 02:04:54.820 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 02:04:54.821 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 02:04:54.821 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-15 02:04:54.822 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-15 02:04:54.823 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-15 02:04:54.824 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-15 02:04:54.825 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-15 02:04:54.827 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 02:04:54.828 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 02:04:54.830 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 02:04:54.831 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 02:04:54.832 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 02:04:54.833 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 02:04:54.834 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:54.835 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:54.836 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:54.837 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 02:04:54.839 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 02:04:54.841 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 02:04:54.842 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:54.842 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:54.843 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:54.844 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 02:04:54.845 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 02:04:54.847 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 02:04:54.848 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 02:04:54.849 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 02:04:54.850 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 02:04:54.850 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-15 02:04:54.851 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-15 02:04:54.852 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-15 02:04:54.853 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-15 02:04:54.853 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-15 02:04:54.854 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-15 02:04:54.856 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 02:04:54.857 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-15 02:04:54.858 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 02:04:54.858 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 02:04:54.859 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 02:04:54.860 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 02:04:54.861 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-15 02:04:54.861 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 02:04:54.862 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-15 02:04:54.863 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-15 02:04:54.864 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-15 02:04:54.865 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-15 02:04:54.866 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-15 02:04:54.867 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 02:04:54.868 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-15 02:04:54.870 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 02:04:54.870 +07:00 [DBG] Creating DbConnection.
2025-05-15 02:04:54.870 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-15 02:04:54.872 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-15 02:04:54.872 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:54.873 +07:00 [DBG] Creating DbConnection.
2025-05-15 02:04:54.873 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.874 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:54.874 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-15 02:04:54.875 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.876 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:54.876 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.877 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 02:04:54.878 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-15 02:04:54.879 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.879 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-15 02:04:54.880 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:54.881 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 02:04:54.881 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-15 02:04:54.882 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-15 02:04:54.883 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-15 02:04:54.884 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-15 02:04:54.884 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 02:04:54.885 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-15 02:04:54.886 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 02:04:54.887 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-15 02:04:54.888 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 02:04:54.890 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-15 02:04:54.891 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-15 02:04:54.891 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-15 02:04:54.892 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-15 02:04:54.893 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 02:04:54.896 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 02:04:54.897 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-15 02:04:54.899 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-15 02:04:54.901 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 02:04:54.904 +07:00 [DBG] Creating DbConnection.
2025-05-15 02:04:54.904 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-15 02:04:54.905 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 02:04:54.905 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.908 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.909 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.910 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.911 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.912 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.913 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.914 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.914 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-15 02:04:54.914 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.914 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.916 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.916 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 02:04:54.916 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.917 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-15 02:04:54.918 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-15 02:04:54.918 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.919 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.920 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-15 02:04:54.920 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.921 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-15 02:04:54.922 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-15 02:04:54.922 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.923 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 02:04:54.924 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.926 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 02:04:54.927 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.927 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 02:04:54.928 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.928 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 02:04:54.929 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 02:04:54.929 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.930 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-15 02:04:54.931 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.932 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 85.3109ms
2025-05-15 02:04:54.932 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.933 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-15 02:04:54.934 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.935 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 02:04:54.935 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-15 02:04:54.935 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.936 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.937 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.937 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.938 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-15 02:04:54.939 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-15 02:04:54.939 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.941 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 142.4389ms
2025-05-15 02:04:54.941 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.942 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.944 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (3ms).
2025-05-15 02:04:54.945 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.946 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 02:04:54.946 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.948 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 02:04:54.948 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.949 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 02:04:54.949 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.950 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 02:04:54.951 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.951 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 02:04:54.952 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-15 02:04:54.953 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.954 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.955 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 109.5229ms
2025-05-15 02:04:54.955 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.956 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-15 02:04:54.957 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.958 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 02:04:54.959 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.959 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.960 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.960 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-15 02:04:54.961 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.962 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 163.6952ms
2025-05-15 02:04:54.962 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.964 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.965 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.966 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.967 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.967 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.968 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.968 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.969 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.970 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 63ms reading results.
2025-05-15 02:04:54.970 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.971 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-15 02:04:54.972 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.973 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.974 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 02:04:54.974 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-15 02:04:54.975 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-15 02:04:54.976 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 02:04:54.979 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 02:04:54.981 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.982 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.983 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.984 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.985 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.986 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.987 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.990 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.991 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:54.993 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.995 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 13ms reading results.
2025-05-15 02:04:54.996 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:54.997 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-15 02:04:54.999 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.000 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.000 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 02:04:55.001 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-15 02:04:55.002 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-15 02:04:55.003 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 02:04:55.010 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 02:04:55.012 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.013 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-15 02:04:55.014 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.014 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-15 02:04:55.016 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 02:04:55.017 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 02:04:55.018 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 02:04:55.018 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 02:04:55.019 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 02:04:55.020 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-15 02:04:55.026 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 181.3509ms
2025-05-15 02:04:55.027 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 02:04:55.028 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 02:04:55.029 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-15 02:04:55.030 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.032 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 02:04:55.033 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-15 02:04:55.034 +07:00 [INF] CORS policy execution successful.
2025-05-15 02:04:55.037 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 239.1493ms
2025-05-15 02:04:55.038 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 02:04:55.041 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-15 02:04:55.043 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-15 02:04:55.044 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 02:04:55.045 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 02:04:55.047 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 02:04:55.048 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-15 02:04:55.050 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 02:04:55.052 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 02:04:55.053 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:55.054 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 02:04:55.055 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:55.056 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 02:04:55.059 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 02:04:55.060 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-15 02:04:55.061 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-15 02:04:55.062 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 02:04:55.063 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 02:04:55.064 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-15 02:04:55.065 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-15 02:04:55.068 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 02:04:55.069 +07:00 [DBG] Creating DbConnection.
2025-05-15 02:04:55.070 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-15 02:04:55.070 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.071 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.072 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 02:04:55.073 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-15 02:04:55.073 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-15 02:04:55.075 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 02:04:55.080 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 02:04:55.082 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.083 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.084 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.085 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.085 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.086 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.087 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.088 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.089 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.090 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.091 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.092 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.093 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.094 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.095 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.095 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.096 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.097 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.098 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.100 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.100 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.101 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.102 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.103 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.104 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.105 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.106 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.107 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.108 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.108 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.109 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.110 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.110 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.111 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.112 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.113 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.114 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.115 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.116 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.117 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.118 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.118 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.119 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.120 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.121 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 39ms reading results.
2025-05-15 02:04:55.122 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.123 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-15 02:04:55.124 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.125 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.126 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 02:04:55.126 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-15 02:04:55.127 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-15 02:04:55.128 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 02:04:55.133 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 02:04:55.134 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.135 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.136 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.137 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.138 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.138 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.139 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.140 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.141 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 02:04:55.141 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.142 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2025-05-15 02:04:55.143 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.144 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-15 02:04:55.145 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.146 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.147 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 02:04:55.147 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-15 02:04:55.148 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-15 02:04:55.149 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 02:04:55.152 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 02:04:55.153 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.153 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2025-05-15 02:04:55.154 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.155 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2025-05-15 02:04:55.155 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 02:04:55.157 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 02:04:55.157 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 02:04:55.157 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 02:04:55.158 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 02:04:55.159 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-15 02:04:55.160 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 103.1162ms
2025-05-15 02:04:55.161 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 02:04:55.161 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 02:04:55.162 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.163 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-15 02:04:55.163 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 134.8665ms
2025-05-15 02:04:55.729 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-15 02:04:55.729 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-15 02:04:55.732 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 02:04:55.733 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 02:04:55.734 +07:00 [INF] CORS policy execution successful.
2025-05-15 02:04:55.735 +07:00 [INF] CORS policy execution successful.
2025-05-15 02:04:55.737 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 02:04:55.736 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 02:04:55.737 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-15 02:04:55.738 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-15 02:04:55.739 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-15 02:04:55.740 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-15 02:04:55.741 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 02:04:55.742 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 02:04:55.743 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 02:04:55.743 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 02:04:55.744 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 02:04:55.744 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 02:04:55.745 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-15 02:04:55.746 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-15 02:04:55.747 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 02:04:55.747 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 02:04:55.748 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 02:04:55.749 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 02:04:55.750 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:55.751 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:55.752 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 02:04:55.753 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 02:04:55.755 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:55.754 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 02:04:55.756 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 02:04:55.757 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 02:04:55.758 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 02:04:55.758 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 02:04:55.759 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-15 02:04:55.759 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-15 02:04:55.760 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-15 02:04:55.761 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-15 02:04:55.761 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 02:04:55.762 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 02:04:55.763 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 02:04:55.763 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 02:04:55.764 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-15 02:04:55.765 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-15 02:04:55.765 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-15 02:04:55.766 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-15 02:04:55.767 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-15 02:04:55.768 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-15 02:04:55.768 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-15 02:04:55.769 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-15 02:04:55.769 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:55.770 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:55.771 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:55.771 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:55.772 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:55.773 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:55.773 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-15 02:04:55.774 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-15 02:04:55.774 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:55.775 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-15 02:04:55.776 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-15 02:04:55.776 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-15 02:04:55.777 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-15 02:04:55.777 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-15 02:04:55.778 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 02:04:55.779 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 02:04:55.779 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 02:04:55.780 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 02:04:55.781 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-15 02:04:55.781 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-15 02:04:55.782 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-15 02:04:55.783 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-15 02:04:55.783 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-15 02:04:55.784 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-15 02:04:55.784 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-15 02:04:55.785 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-15 02:04:55.786 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 02:04:55.786 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 02:04:55.787 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 02:04:55.788 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 02:04:55.788 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-15 02:04:55.789 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-15 02:04:55.789 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-15 02:04:55.790 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-15 02:04:55.791 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 02:04:55.792 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 02:04:55.793 +07:00 [DBG] Creating DbConnection.
2025-05-15 02:04:55.794 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-15 02:04:55.794 +07:00 [DBG] Creating DbConnection.
2025-05-15 02:04:55.794 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.795 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-15 02:04:55.795 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.796 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.796 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 02:04:55.797 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.798 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-15 02:04:55.798 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 02:04:55.799 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-15 02:04:55.801 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-15 02:04:55.800 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-15 02:04:55.802 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-15 02:04:55.803 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-15 02:04:55.807 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
INNER JOIN [Payment] AS [p0] ON [p].[PaymentId] = [p0].[PaymentId]
ORDER BY [p].[FullName]
2025-05-15 02:04:55.809 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.810 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-15 02:04:55.810 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-15 02:04:55.811 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.812 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.813 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-15 02:04:55.814 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-15 02:04:55.814 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.816 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 02:04:55.816 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-15 02:04:55.817 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 02:04:55.818 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 02:04:55.818 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 02:04:55.819 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 02:04:55.820 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 02:04:55.820 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 02:04:55.821 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 02:04:55.821 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 02:04:55.822 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-15 02:04:55.822 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 02:04:55.823 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-15 02:04:55.825 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 68.3287ms
2025-05-15 02:04:55.826 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 70.4198ms
2025-05-15 02:04:55.826 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 02:04:55.831 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 02:04:55.832 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 02:04:55.833 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 02:04:55.834 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.834 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 02:04:55.835 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-15 02:04:55.836 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-15 02:04:55.836 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 107.4323ms
2025-05-15 02:04:55.837 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 28997 application/json; charset=utf-8 108.2433ms
2025-05-15 02:04:55.849 +07:00 [DBG] Connection id "0HNCISTFO09UU" received FIN.
2025-05-15 02:04:55.850 +07:00 [DBG] Connection id "0HNCISTFO09UU" is closed. The last processed stream ID was 11.
2025-05-15 02:04:55.850 +07:00 [DBG] The connection queue processing loop for 0HNCISTFO09UU completed.
2025-05-15 02:04:55.851 +07:00 [DBG] Connection id "0HNCISTFO09UU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-15 02:04:55.859 +07:00 [DBG] Connection id "0HNCISTFO09UU" stopped.
2025-05-15 10:09:41.081 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-15 10:09:41.825 +07:00 [DBG] Hosting starting
2025-05-15 10:09:41.888 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-15 10:09:41.911 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-227fa330-dced-4a64-a1c8-04d8b60f3e99.xml'.
2025-05-15 10:09:41.934 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2025-05-15 10:09:41.980 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2025-05-15 10:09:41.997 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-bea7c23c-cd46-482f-bde2-174e951603a6.xml'.
2025-05-15 10:09:42.018 +07:00 [DBG] Found key {227fa330-dced-4a64-a1c8-04d8b60f3e99}.
2025-05-15 10:09:42.032 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2025-05-15 10:09:42.038 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2025-05-15 10:09:42.040 +07:00 [DBG] Found key {bea7c23c-cd46-482f-bde2-174e951603a6}.
2025-05-15 10:09:42.057 +07:00 [DBG] Considering key {227fa330-dced-4a64-a1c8-04d8b60f3e99} with expiration date 2025-06-05 10:07:06Z as default key.
2025-05-15 10:09:42.065 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-15 10:09:42.072 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-15 10:09:42.077 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-15 10:09:42.087 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-15 10:09:42.091 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-15 10:09:42.098 +07:00 [DBG] Using key {227fa330-dced-4a64-a1c8-04d8b60f3e99} as the default key.
2025-05-15 10:09:42.104 +07:00 [DBG] Key ring with default key {227fa330-dced-4a64-a1c8-04d8b60f3e99} was loaded during application startup.
2025-05-15 10:09:42.501 +07:00 [INF] Now listening on: https://localhost:7169
2025-05-15 10:09:42.505 +07:00 [INF] Now listening on: http://localhost:5169
2025-05-15 10:09:42.507 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2025-05-15 10:09:42.509 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-05-15 10:09:42.510 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-05-15 10:09:42.511 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-05-15 10:09:42.629 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-15 10:09:42.631 +07:00 [INF] Hosting environment: Development
2025-05-15 10:09:42.634 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\api\CityInfo.API
2025-05-15 10:09:42.635 +07:00 [DBG] Hosting started
2025-05-15 10:09:48.907 +07:00 [DBG] Connection id "0HNCJBNPTPQ42" accepted.
2025-05-15 10:09:48.912 +07:00 [DBG] Connection id "0HNCJBNPTPQ42" started.
2025-05-15 10:09:49.012 +07:00 [DBG] Connection 0HNCJBNPTPQ42 established using the following protocol: "Tls13"
2025-05-15 10:09:49.101 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-15 10:09:49.101 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-15 10:09:49.101 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-15 10:09:49.117 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-15 10:09:49.117 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-15 10:09:49.117 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-15 10:09:49.124 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 10:09:49.124 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 10:09:49.124 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 10:09:49.127 +07:00 [INF] CORS policy execution successful.
2025-05-15 10:09:49.127 +07:00 [INF] CORS policy execution successful.
2025-05-15 10:09:49.128 +07:00 [INF] CORS policy execution successful.
2025-05-15 10:09:49.175 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 10:09:49.175 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 10:09:49.175 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 10:09:49.214 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-15 10:09:49.214 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-15 10:09:49.214 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-15 10:09:49.221 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-15 10:09:49.221 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-15 10:09:49.221 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-15 10:09:49.232 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 10:09:49.232 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-15 10:09:49.234 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-15 10:09:49.336 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 10:09:49.336 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 10:09:49.336 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 10:09:49.343 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 10:09:49.343 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-15 10:09:49.343 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-15 10:09:49.385 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-15 10:09:49.385 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-15 10:09:49.385 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-15 10:09:49.390 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 10:09:49.390 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 10:09:49.391 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 10:09:49.394 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 10:09:49.396 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 10:09:49.398 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 10:09:49.401 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:49.403 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:49.404 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:49.406 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 10:09:49.410 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 10:09:49.413 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 10:09:49.414 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:49.417 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:49.420 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:49.425 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 10:09:49.426 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 10:09:49.428 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 10:09:49.631 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-15 10:09:49.631 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-15 10:09:49.631 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-15 10:09:49.662 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 10:09:49.667 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 10:09:49.667 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 10:09:49.674 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-15 10:09:49.674 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-15 10:09:49.674 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-15 10:09:49.680 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-15 10:09:49.680 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-15 10:09:49.682 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-15 10:09:49.685 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:49.688 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-15 10:09:49.693 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:49.698 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:49.700 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 10:09:49.702 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:49.704 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-15 10:09:49.706 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 10:09:49.708 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-15 10:09:49.711 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-15 10:09:49.712 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:49.713 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:49.715 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-15 10:09:49.720 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-15 10:09:49.722 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-15 10:09:49.737 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:49.739 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:49.743 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:49.745 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-15 10:09:49.747 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:49.749 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-15 10:09:49.751 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-15 10:09:49.753 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 10:09:49.755 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 10:09:49.757 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-15 10:09:49.759 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-15 10:09:49.761 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-15 10:09:49.764 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-15 10:09:49.766 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 10:09:49.768 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 10:09:49.770 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-15 10:09:49.771 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-15 10:09:50.587 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 10:09:50.587 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 10:09:50.587 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 10:09:50.651 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - null null
2025-05-15 10:09:50.651 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - null null
2025-05-15 10:09:50.657 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 10:09:50.660 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 10:09:50.661 +07:00 [INF] CORS policy execution successful.
2025-05-15 10:09:50.663 +07:00 [INF] CORS policy execution successful.
2025-05-15 10:09:50.665 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 10:09:50.666 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 10:09:50.669 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-15 10:09:50.669 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-05-15 10:09:50.670 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-15 10:09:50.673 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-05-15 10:09:50.675 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 10:09:50.677 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 10:09:50.682 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 10:09:50.682 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 10:09:50.685 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 10:09:50.687 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 10:09:50.691 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-15 10:09:50.692 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-15 10:09:50.694 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 10:09:50.697 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 10:09:50.699 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 10:09:50.703 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 10:09:50.704 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:50.707 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:50.708 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Where(p => p.Time.Year < __n_0)'
2025-05-15 10:09:50.708 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Where(ap => ap.AppointmentConfirmed == "Finished")
    .OrderByDescending(ap => ap.AppointmentTime)
    .Take(__p_0)
    .Select(ap => new AppointmentModel{ 
        AppointmentId = ap.AppointmentId, 
        AppointmentTime = ap.AppointmentTime, 
        AppointmentStatus = ap.AppointmentStatus, 
        AppointmentComment = ap.AppointmentComment, 
        AppointmentConfirmed = ap.AppointmentConfirmed, 
        PatientStatus = ap.Patient.Status, 
        PatientId = ap.PatientId, 
        DoctorId = ap.DoctorId, 
        Gender = ap.Patient.Gender, 
        Avatar = ap.Patient.Avatar, 
        FullName = ap.Patient.FullName, 
        Date = ap.Patient.Date, 
        Diseases = ap.Patient.Diseases, 
        Age = DateTime.Now.Year - ap.Patient.Date.Year - DateTime.Now < ap.Patient.Date.AddYears(DateTime.Now.Year - ap.Patient.Date.Year) ? 1 : 0 
    }
    )'
2025-05-15 10:09:50.708 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .OrderBy(pt => pt.AppointmentTime)
    .Skip(__p_0)
    .Take(__p_1)
    .Select(ap => new AppointmentModel{ 
        AppointmentId = ap.AppointmentId, 
        AppointmentTime = ap.AppointmentTime, 
        AppointmentStatus = ap.AppointmentStatus, 
        AppointmentComment = ap.AppointmentComment, 
        AppointmentConfirmed = ap.AppointmentConfirmed, 
        PatientStatus = ap.Patient.Status, 
        PatientId = ap.PatientId, 
        DoctorId = ap.DoctorId, 
        Gender = ap.Patient.Gender, 
        Avatar = ap.Patient.Avatar, 
        FullName = ap.Patient.FullName, 
        Date = ap.Patient.Date, 
        Diseases = ap.Patient.Diseases, 
        Age = DateTime.Now.Year - ap.Patient.Date.Year - DateTime.Now < ap.Patient.Date.AddYears(DateTime.Now.Year - ap.Patient.Date.Year) ? 1 : 0 
    }
    )'
2025-05-15 10:09:50.710 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 10:09:50.713 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 10:09:50.721 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:50.722 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:50.725 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 10:09:50.726 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 10:09:50.730 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 10:09:50.730 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 10:09:50.732 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-15 10:09:50.734 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-15 10:09:50.736 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-15 10:09:50.737 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2025-05-15 10:09:50.739 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 10:09:50.741 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 10:09:50.742 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 10:09:50.744 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 10:09:50.745 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-15 10:09:50.746 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-15 10:09:50.748 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-15 10:09:50.750 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-15 10:09:50.751 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-15 10:09:50.752 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-15 10:09:50.754 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-15 10:09:50.755 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-15 10:09:50.757 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:50.758 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:50.760 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:50.762 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:50.763 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:50.764 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:50.766 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-15 10:09:50.768 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-15 10:09:50.769 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:50.771 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:50.772 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-15 10:09:50.773 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-15 10:09:50.775 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-15 10:09:50.776 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-15 10:09:50.778 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 10:09:50.780 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 10:09:50.782 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 10:09:50.784 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 10:09:50.786 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-15 10:09:50.787 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-15 10:09:50.788 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-15 10:09:50.790 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-15 10:09:50.793 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-15 10:09:50.794 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-15 10:09:50.796 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-15 10:09:50.798 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-15 10:09:50.800 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 10:09:50.802 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 10:09:50.804 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 10:09:50.806 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 10:09:50.808 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-15 10:09:50.809 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-15 10:09:50.810 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-15 10:09:50.811 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-15 10:09:50.886 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 10:09:50.886 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 10:09:50.899 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(pt => pt.Payment)
    .OrderBy(pt => pt.FullName)
    .Skip(__p_0)
    .Take(__p_1)
    .Select(pt => new PatientVM{ 
        PatientId = pt.PatientId, 
        Status = pt.Status, 
        Gender = pt.Gender, 
        Avatar = pt.Avatar, 
        FullName = pt.FullName, 
        Date = pt.Date, 
        Time = pt.Time, 
        Location = pt.Location, 
        Email = pt.Email, 
        PhoneNumber = pt.PhoneNumber, 
        Diseases = pt.Diseases, 
        PaymentId = pt.PaymentId, 
        PaymentName = pt.Payment.PaymentName, 
        Age = DateTime.Now.Year - pt.Date.Year - DateTime.Now < pt.Date.AddYears(DateTime.Now.Year - pt.Date.Year) ? 1 : 0 
    }
    )'
2025-05-15 10:09:51.013 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10], [Property: Patient.Time (DateTime) Required, 11] }
        SELECT p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status, p.Time
        FROM Patient AS p
        WHERE DATEPART(year, p.Time) < @__n_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2025-05-15 10:09:51.014 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PatientVM>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            PatientId -> 0
            Status -> 1
            Gender -> 2
            Avatar -> 3
            FullName -> 4
            Date -> 5
            Time -> 6
            Location -> 7
            Email -> 8
            PhoneNumber -> 9
            Diseases -> 10
            PaymentId -> 11
            PaymentName -> 12
            Age -> 13
        SELECT t.PatientId, t.Status, t.Gender, t.Avatar, t.FullName, t.Date, t.Time, t.Location, t.Email, t.PhoneNumber, t.Diseases, t.PaymentId, p0.PaymentName, (DATEPART(year, GETDATE()) - DATEPART(year, t.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, t.Date) AS int), t.Date) THEN 1
            ELSE 0
        END AS Age
        FROM 
        (
            SELECT p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status, p.Time
            FROM Patient AS p
            ORDER BY p.FullName ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        INNER JOIN Payment AS p0 ON t.PaymentId == p0.PaymentId
        ORDER BY t.FullName ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PatientVM>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2025-05-15 10:09:51.014 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AppointmentModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            AppointmentId -> 0
            AppointmentTime -> 1
            AppointmentStatus -> 2
            AppointmentComment -> 3
            AppointmentConfirmed -> 4
            PatientStatus -> 5
            PatientId -> 6
            DoctorId -> 7
            Gender -> 8
            Avatar -> 9
            FullName -> 10
            Date -> 11
            Diseases -> 12
            Age -> 13
        SELECT t.AppointmentId, t.AppointmentTime, t.AppointmentStatus, t.AppointmentComment, t.AppointmentConfirmed, p.Status AS PatientStatus, t.PatientId, t.DoctorId, p.Gender, p.Avatar, p.FullName, p.Date, p.Diseases, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM 
        (
            SELECT a.AppointmentId, a.AppointmentComment, a.AppointmentConfirmed, a.AppointmentStatus, a.AppointmentTime, a.DoctorId, a.PatientId
            FROM Appointment AS a
            ORDER BY a.AppointmentTime ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        INNER JOIN Patient AS p ON t.PatientId == p.PatientId
        ORDER BY t.AppointmentTime ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppointmentModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2025-05-15 10:09:51.014 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AppointmentModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            AppointmentId -> 0
            AppointmentTime -> 1
            AppointmentStatus -> 2
            AppointmentComment -> 3
            AppointmentConfirmed -> 4
            PatientStatus -> 5
            PatientId -> 6
            DoctorId -> 7
            Gender -> 8
            Avatar -> 9
            FullName -> 10
            Date -> 11
            Diseases -> 12
            Age -> 13
        SELECT t.AppointmentId, t.AppointmentTime, t.AppointmentStatus, t.AppointmentComment, t.AppointmentConfirmed, p.Status AS PatientStatus, t.PatientId, t.DoctorId, p.Gender, p.Avatar, p.FullName, p.Date, p.Diseases, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM 
        (
            SELECT TOP(@__p_0) a.AppointmentId, a.AppointmentComment, a.AppointmentConfirmed, a.AppointmentStatus, a.AppointmentTime, a.DoctorId, a.PatientId
            FROM Appointment AS a
            WHERE a.AppointmentConfirmed == N'Finished'
            ORDER BY a.AppointmentTime DESC
        ) AS t
        INNER JOIN Patient AS p ON t.PatientId == p.PatientId
        ORDER BY t.AppointmentTime DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppointmentModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2025-05-15 10:09:51.056 +07:00 [DBG] Creating DbConnection.
2025-05-15 10:09:51.056 +07:00 [DBG] Creating DbConnection.
2025-05-15 10:09:51.056 +07:00 [DBG] Creating DbConnection.
2025-05-15 10:09:51.056 +07:00 [DBG] Creating DbConnection.
2025-05-15 10:09:51.056 +07:00 [DBG] Creating DbConnection.
2025-05-15 10:09:51.095 +07:00 [DBG] Created DbConnection. (34ms).
2025-05-15 10:09:51.095 +07:00 [DBG] Created DbConnection. (34ms).
2025-05-15 10:09:51.095 +07:00 [DBG] Created DbConnection. (34ms).
2025-05-15 10:09:51.095 +07:00 [DBG] Created DbConnection. (34ms).
2025-05-15 10:09:51.095 +07:00 [DBG] Created DbConnection. (34ms).
2025-05-15 10:09:51.100 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.100 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.100 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.100 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.102 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.542 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.542 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.547 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.550 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:51.550 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:51.550 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:51.553 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.558 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:51.559 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.562 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:51.566 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2025-05-15 10:09:51.566 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-15 10:09:51.566 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-15 10:09:51.566 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2025-05-15 10:09:51.566 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2025-05-15 10:09:51.584 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (33ms).
2025-05-15 10:09:51.584 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-05-15 10:09:51.584 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (35ms).
2025-05-15 10:09:51.584 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (25ms).
2025-05-15 10:09:51.584 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (35ms).
2025-05-15 10:09:51.605 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-15 10:09:51.605 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-15 10:09:51.605 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 10:09:51.605 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-15 10:09:51.605 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-15 10:09:51.683 +07:00 [INF] Executed DbCommand (85ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-15 10:09:51.683 +07:00 [INF] Executed DbCommand (78ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 10:09:51.683 +07:00 [INF] Executed DbCommand (81ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-15 10:09:51.683 +07:00 [INF] Executed DbCommand (83ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[Status], [t].[Gender], [t].[Avatar], [t].[FullName], [t].[Date], [t].[Time], [t].[Location], [t].[Email], [t].[PhoneNumber], [t].[Diseases], [t].[PaymentId], [p0].[PaymentName], (DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [t].[Date]) AS int), [t].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
    FROM [Patient] AS [p]
    ORDER BY [p].[FullName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Payment] AS [p0] ON [t].[PaymentId] = [p0].[PaymentId]
ORDER BY [t].[FullName]
2025-05-15 10:09:51.683 +07:00 [INF] Executed DbCommand (79ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-15 10:09:51.708 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.708 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.708 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.708 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.725 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 18ms reading results.
2025-05-15 10:09:51.725 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 28ms reading results.
2025-05-15 10:09:51.725 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 20ms reading results.
2025-05-15 10:09:51.725 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 24ms reading results.
2025-05-15 10:09:51.730 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.730 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.731 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.734 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.745 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (13ms).
2025-05-15 10:09:51.745 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (11ms).
2025-05-15 10:09:51.745 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (9ms).
2025-05-15 10:09:51.745 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (14ms).
2025-05-15 10:09:51.754 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 10:09:51.754 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 10:09:51.754 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 10:09:51.754 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 10:09:51.759 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.760 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 10:09:51.761 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 10:09:51.764 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 10:09:51.768 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 10:09:51.771 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 10:09:51.772 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 10:09:51.774 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 10:09:51.775 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 10:09:51.776 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 10:09:51.777 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 10:09:51.778 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 10:09:51.779 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 10:09:51.782 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 10:09:51.782 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 10:09:51.782 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 10:09:51.784 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 10:09:51.787 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-15 10:09:51.788 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientVM, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-15 10:09:51.790 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-15 10:09:51.792 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-15 10:09:51.825 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.827 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.829 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.831 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.834 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.836 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.838 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.840 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.843 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.845 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.847 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.850 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.851 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.854 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.855 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.857 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.859 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.862 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.864 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.866 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.868 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.870 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.871 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.875 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.877 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.879 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.882 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.884 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.885 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.888 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.891 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.893 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.895 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.897 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.899 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.902 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.903 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.909 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.911 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.914 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.917 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.919 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.921 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.923 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 233ms reading results.
2025-05-15 10:09:51.925 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.926 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-15 10:09:51.928 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Where(p => p.Time.Year == __n_0)'
2025-05-15 10:09:51.935 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10], [Property: Patient.Time (DateTime) Required, 11] }
        SELECT p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status, p.Time
        FROM Patient AS p
        WHERE DATEPART(year, p.Time) == @__n_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2025-05-15 10:09:51.944 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.947 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:51.949 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:51.951 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-15 10:09:51.953 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-15 10:09:51.955 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 10:09:51.966 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 10:09:51.977 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 2535.7988ms
2025-05-15 10:09:51.989 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.993 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-15 10:09:51.977 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 1235.104ms
2025-05-15 10:09:51.997 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2025-05-15 10:09:51.995 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:51.996 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 2573.08ms
2025-05-15 10:09:51.977 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 1236.8633ms
2025-05-15 10:09:51.996 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - null null
2025-05-15 10:09:52.008 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 10:09:52.010 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 10:09:52.010 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 10:09:52.011 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.013 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-15 10:09:52.015 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2025-05-15 10:09:52.018 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 10:09:52.019 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 10:09:52.020 +07:00 [INF] CORS policy execution successful.
2025-05-15 10:09:52.023 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.026 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 10:09:52.028 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 10:09:52.029 +07:00 [INF] CORS policy execution successful.
2025-05-15 10:09:52.029 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.030 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.031 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 10:09:52.033 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.034 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.035 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.036 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 10:09:52.040 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-05-15 10:09:52.041 +07:00 [DBG] Disposed connection to database '' on server '' (10ms).
2025-05-15 10:09:52.041 +07:00 [DBG] Disposed connection to database '' on server '' (12ms).
2025-05-15 10:09:52.042 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.043 +07:00 [DBG] Disposed connection to database '' on server '' (9ms).
2025-05-15 10:09:52.045 +07:00 [DBG] Disposed connection to database '' on server '' (9ms).
2025-05-15 10:09:52.046 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/RecentPatient/4'
2025-05-15 10:09:52.048 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-05-15 10:09:52.052 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=4&search= - 200 2234 application/json; charset=utf-8 1399.9355ms
2025-05-15 10:09:52.052 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 2958.6869ms
2025-05-15 10:09:52.053 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.055 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0&search= - 200 2234 application/json; charset=utf-8 1404.6793ms
2025-05-15 10:09:52.057 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 2964.1106ms
2025-05-15 10:09:52.058 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)' with route pattern 'api/Appointment/RecentPatient/{n}' is valid for the request path '/api/Appointment/RecentPatient/4'
2025-05-15 10:09:52.061 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-15 10:09:52.071 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.079 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-15 10:09:52.080 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 10:09:52.081 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.082 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 10:09:52.084 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-15 10:09:52.086 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.087 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-15 10:09:52.089 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-15 10:09:52.090 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 101ms reading results.
2025-05-15 10:09:52.092 +07:00 [INF] Route matched with {action = "RecentPatient", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RecentPatient(Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2025-05-15 10:09:52.094 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 10:09:52.096 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.099 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 10:09:52.101 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 10:09:52.103 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (6ms).
2025-05-15 10:09:52.104 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 10:09:52.106 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:52.110 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:52.112 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 10:09:52.112 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Count()'
2025-05-15 10:09:52.115 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 10:09:52.117 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:52.121 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:52.123 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 10:09:52.126 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 10:09:52.131 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 10:09:52.131 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2025-05-15 10:09:52.133 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2025-05-15 10:09:52.135 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-15 10:09:52.136 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2025-05-15 10:09:52.139 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-15 10:09:52.140 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2025-05-15 10:09:52.142 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:52.143 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 10:09:52.145 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:52.147 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2025-05-15 10:09:52.148 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-15 10:09:52.149 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2025-05-15 10:09:52.151 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:52.153 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2025-05-15 10:09:52.156 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 10:09:52.156 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2025-05-15 10:09:52.158 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT COUNT(*)
        FROM Patient AS p), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .Single()'
2025-05-15 10:09:52.160 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2025-05-15 10:09:52.160 +07:00 [DBG] Creating DbConnection.
2025-05-15 10:09:52.163 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:52.164 +07:00 [DBG] Created DbConnection. (3ms).
2025-05-15 10:09:52.165 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.166 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:52.168 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.170 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.171 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:52.173 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.174 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:52.176 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2025-05-15 10:09:52.177 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:52.178 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-15 10:09:52.180 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2025-05-15 10:09:52.181 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-05-15 10:09:52.183 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-05-15 10:09:52.184 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2025-05-15 10:09:52.185 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-05-15 10:09:52.187 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 10:09:52.188 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2025-05-15 10:09:52.190 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-15 10:09:52.193 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 10:09:52.196 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 10:09:52.197 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2025-05-15 10:09:52.200 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.201 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2025-05-15 10:09:52.202 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT TOP(@__p_0) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    WHERE [a].[AppointmentConfirmed] = N'Finished'
    ORDER BY [a].[AppointmentTime] DESC
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime] DESC
2025-05-15 10:09:52.203 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2025-05-15 10:09:52.204 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2025-05-15 10:09:52.207 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.209 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.211 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2025-05-15 10:09:52.212 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 5ms reading results.
2025-05-15 10:09:52.214 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2025-05-15 10:09:52.216 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2025-05-15 10:09:52.218 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.220 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 10:09:52.222 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 10:09:52.224 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (6ms).
2025-05-15 10:09:52.227 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 10:09:52.228 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2025-05-15 10:09:52.231 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 10:09:52.232 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 10:09:52.233 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2025-05-15 10:09:52.236 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 10:09:52.237 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 10:09:52.238 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2025-05-15 10:09:52.239 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 10:09:52.240 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 10:09:52.242 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 10:09:52.243 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 10:09:52.244 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-15 10:09:52.244 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 10:09:52.250 +07:00 [DBG] Creating DbConnection.
2025-05-15 10:09:52.251 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-15 10:09:52.252 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-15 10:09:52.254 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API) in 128.5533ms
2025-05-15 10:09:52.254 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.256 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.RecentPatient (CityInfo.API)'
2025-05-15 10:09:52.257 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 2829.1107ms
2025-05-15 10:09:52.258 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.260 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 10:09:52.259 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 10:09:52.261 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-15 10:09:52.262 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:52.264 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 10:09:52.265 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.267 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 10:09:52.268 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-05-15 10:09:52.270 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.272 +07:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-05-15 10:09:52.273 +07:00 [INF] CORS policy execution successful.
2025-05-15 10:09:52.274 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-05-15 10:09:52.276 +07:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-05-15 10:09:52.279 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/RecentPatient/4 - 200 2478 application/json; charset=utf-8 283.0036ms
2025-05-15 10:09:52.280 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 10:09:52.281 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-15 10:09:52.285 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 3191.8747ms
2025-05-15 10:09:52.290 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-15 10:09:52.301 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-15 10:09:52.303 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 10:09:52.305 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[AppointmentConfirmed], [p].[Status] AS [PatientStatus], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Diseases], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentConfirmed], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2025-05-15 10:09:52.306 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 10:09:52.308 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.309 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 10:09:52.311 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2025-05-15 10:09:52.313 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-15 10:09:52.314 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.316 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 10:09:52.317 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-15 10:09:52.319 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 10:09:52.322 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 10:09:52.323 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:52.327 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 10:09:52.330 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 10:09:52.330 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 10:09:52.332 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:52.334 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 10:09:52.336 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 10:09:52.337 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 10:09:52.341 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-15 10:09:52.342 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 10:09:52.346 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-15 10:09:52.349 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-15 10:09:52.352 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:52.354 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:52.356 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 232.7344ms
2025-05-15 10:09:52.357 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-15 10:09:52.360 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2025-05-15 10:09:52.361 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:52.364 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 10:09:52.366 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 10:09:52.366 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.370 +07:00 [DBG] Creating DbConnection.
2025-05-15 10:09:52.370 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-15 10:09:52.372 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-15 10:09:52.374 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 4323 application/json; charset=utf-8 377.3509ms
2025-05-15 10:09:52.375 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.381 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.383 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:52.384 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-15 10:09:52.386 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-15 10:09:52.389 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 10:09:52.397 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 10:09:52.401 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.404 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.406 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.409 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.411 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.413 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.415 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.417 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.419 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.422 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.424 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.427 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.430 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.432 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.435 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.438 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.441 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.444 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.447 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.451 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.453 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.455 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.457 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.459 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.461 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.463 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.466 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.468 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.470 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.472 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.474 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.475 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.477 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.479 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.481 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.483 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.484 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.486 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.488 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.490 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.491 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.494 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.496 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.497 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.499 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 98ms reading results.
2025-05-15 10:09:52.501 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.502 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-15 10:09:52.505 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.507 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.509 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:52.511 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-15 10:09:52.512 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-15 10:09:52.514 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 10:09:52.521 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 10:09:52.524 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.526 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.528 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.531 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.532 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.534 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.536 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.537 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.539 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.542 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.544 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 20ms reading results.
2025-05-15 10:09:52.546 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.548 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-15 10:09:52.551 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.553 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.555 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:52.557 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-15 10:09:52.559 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-15 10:09:52.560 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 10:09:52.566 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 10:09:52.570 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.572 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-15 10:09:52.574 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.575 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-15 10:09:52.578 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 10:09:52.581 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 10:09:52.582 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 10:09:52.583 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 10:09:52.585 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 10:09:52.588 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-15 10:09:52.591 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 254.9026ms
2025-05-15 10:09:52.593 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 10:09:52.594 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-15 10:09:52.595 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 10:09:52.599 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 10:09:52.601 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.603 +07:00 [INF] CORS policy execution successful.
2025-05-15 10:09:52.604 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-15 10:09:52.605 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 10:09:52.607 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 346.1368ms
2025-05-15 10:09:52.609 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-15 10:09:52.614 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-15 10:09:52.618 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 10:09:52.621 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 10:09:52.623 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 10:09:52.625 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-15 10:09:52.628 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 10:09:52.631 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 10:09:52.636 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:52.642 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 10:09:52.645 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:52.650 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 10:09:52.690 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 10:09:52.692 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-15 10:09:52.694 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-15 10:09:52.697 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:52.699 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:52.701 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-15 10:09:52.703 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:52.706 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 10:09:52.710 +07:00 [DBG] Creating DbConnection.
2025-05-15 10:09:52.711 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-15 10:09:52.713 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.716 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.718 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:52.719 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-15 10:09:52.721 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-15 10:09:52.723 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 10:09:52.731 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 10:09:52.734 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.736 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.738 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.740 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.742 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.744 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.746 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.748 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.750 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.752 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.754 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.757 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.759 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.761 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.763 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.765 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.767 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.770 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.772 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.774 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.776 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.778 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.781 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.783 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.785 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.787 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.789 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.794 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.796 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.798 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.801 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.803 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.805 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.808 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.810 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.813 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.815 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.817 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.819 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.822 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.823 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.826 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.828 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.829 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.831 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 97ms reading results.
2025-05-15 10:09:52.833 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.835 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-15 10:09:52.838 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.840 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.841 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:52.843 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-15 10:09:52.845 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-15 10:09:52.847 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 10:09:52.853 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 10:09:52.856 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.858 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.860 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.862 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.864 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.866 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.869 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.871 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.873 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:52.875 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.877 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 21ms reading results.
2025-05-15 10:09:52.880 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.882 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-15 10:09:52.885 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.888 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.890 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:52.891 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-15 10:09:52.893 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-15 10:09:52.895 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 10:09:52.901 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 10:09:52.904 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.906 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2025-05-15 10:09:52.908 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.910 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-15 10:09:52.912 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 10:09:52.914 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 10:09:52.916 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 10:09:52.917 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 10:09:52.918 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 10:09:52.919 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-15 10:09:52.922 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 272.1901ms
2025-05-15 10:09:52.923 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 10:09:52.924 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - null null
2025-05-15 10:09:52.925 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 10:09:52.928 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-05-15 10:09:52.929 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.931 +07:00 [INF] CORS policy execution successful.
2025-05-15 10:09:52.932 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-15 10:09:52.933 +07:00 [DBG] The request path  does not match the path filter
2025-05-15 10:09:52.935 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 341.6352ms
2025-05-15 10:09:52.936 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/year/2024'
2025-05-15 10:09:52.943 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/year/{n}' is valid for the request path '/api/Patient/year/2024'
2025-05-15 10:09:52.945 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 10:09:52.947 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-15 10:09:52.948 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 10:09:52.949 +07:00 [INF] Route matched with {action = "PatientChart", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PatientChart(Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2025-05-15 10:09:52.951 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-15 10:09:52.953 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-15 10:09:52.955 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:52.957 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-15 10:09:52.958 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-05-15 10:09:52.960 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 10:09:52.963 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2025-05-15 10:09:52.964 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' ...
2025-05-15 10:09:52.966 +07:00 [DBG] Attempting to bind parameter 'n' of type 'System.Int32' using the name 'n' in request data ...
2025-05-15 10:09:52.968 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:52.970 +07:00 [DBG] Done attempting to bind parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:52.971 +07:00 [DBG] Attempting to validate the bound parameter 'n' of type 'System.Int32' ...
2025-05-15 10:09:52.973 +07:00 [DBG] Done attempting to validate the bound parameter 'n' of type 'System.Int32'.
2025-05-15 10:09:52.976 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2025-05-15 10:09:52.980 +07:00 [DBG] Creating DbConnection.
2025-05-15 10:09:52.981 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-15 10:09:52.982 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.984 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:52.986 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:52.987 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-15 10:09:52.989 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-15 10:09:52.990 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 10:09:52.999 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) < @__n_0
2025-05-15 10:09:53.002 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.004 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.006 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.009 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.011 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.013 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.015 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.016 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.018 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.020 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.022 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.024 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.027 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.030 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.032 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.034 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.035 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.037 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.040 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.042 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.044 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.045 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.047 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.048 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.050 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.052 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.054 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.056 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.059 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.061 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.063 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.065 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.067 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.070 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.072 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.074 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.076 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.078 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.080 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.083 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.085 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.087 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.090 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.092 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:53.094 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 91ms reading results.
2025-05-15 10:09:53.096 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:53.098 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-15 10:09:53.101 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:53.103 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:53.104 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:53.106 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-15 10:09:53.108 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-15 10:09:53.110 +07:00 [DBG] Executing DbCommand [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 10:09:53.118 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__n_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE DATEPART(year, [p].[Time]) = @__n_0
2025-05-15 10:09:53.121 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.123 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.126 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.128 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.130 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.132 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.133 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.135 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.137 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-15 10:09:53.139 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:53.141 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 19ms reading results.
2025-05-15 10:09:53.143 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:53.145 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2025-05-15 10:09:53.148 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:53.150 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:53.152 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-15 10:09:53.153 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-15 10:09:53.155 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-15 10:09:53.156 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 10:09:53.161 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patient] AS [p]
2025-05-15 10:09:53.164 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:53.166 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2025-05-15 10:09:53.168 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:53.170 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2025-05-15 10:09:53.172 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-05-15 10:09:53.175 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-15 10:09:53.176 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-15 10:09:53.178 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-15 10:09:53.179 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-15 10:09:53.181 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-15 10:09:53.183 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API) in 222.3281ms
2025-05-15 10:09:53.184 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)'
2025-05-15 10:09:53.186 +07:00 [DBG] 'DoctorManagementContext' disposed.
2025-05-15 10:09:53.188 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2025-05-15 10:09:53.189 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-15 10:09:53.192 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/year/2024 - 200 84 application/json; charset=utf-8 267.6908ms
2025-05-15 10:09:59.416 +07:00 [DBG] Connection id "0HNCJBNPTPQ42" received FIN.
2025-05-15 10:09:59.420 +07:00 [DBG] Connection id "0HNCJBNPTPQ42" is closed. The last processed stream ID was 19.
2025-05-15 10:09:59.421 +07:00 [DBG] The connection queue processing loop for 0HNCJBNPTPQ42 completed.
2025-05-15 10:09:59.423 +07:00 [DBG] Connection id "0HNCJBNPTPQ42" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-15 10:09:59.433 +07:00 [DBG] Connection id "0HNCJBNPTPQ42" stopped.
2025-05-15 10:10:03.359 +07:00 [DBG] Connection id "0HNCJBNPTPQ43" accepted.
2025-05-15 10:10:03.362 +07:00 [DBG] Connection id "0HNCJBNPTPQ43" started.
2025-05-15 10:10:03.371 +07:00 [DBG] Connection 0HNCJBNPTPQ43 established using the following protocol: "Tls13"
2025-05-15 10:10:03.376 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2025-05-15 10:10:03.618 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-05-15 10:10:03.621 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-05-15 10:10:03.634 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-05-15 10:10:03.635 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-05-15 10:10:03.637 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 261.2601ms
2025-05-15 10:10:03.647 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui.css - null null
2025-05-15 10:10:03.648 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2025-05-15 10:10:03.648 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - null null
2025-05-15 10:10:03.647 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - null null
2025-05-15 10:10:03.648 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2025-05-15 10:10:03.667 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 19.1162ms
2025-05-15 10:10:03.696 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-05-15 10:10:03.696 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-05-15 10:10:03.701 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui.css - 200 143943 text/css 53.148ms
2025-05-15 10:10:03.704 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 56.4886ms
2025-05-15 10:10:03.720 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-05-15 10:10:03.725 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 77.3779ms
2025-05-15 10:10:03.769 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 121.3142ms
2025-05-15 10:10:04.013 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2025-05-15 10:10:04.055 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/favicon-32x32.png - null null
2025-05-15 10:10:04.058 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-05-15 10:10:04.060 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/favicon-32x32.png - 200 628 image/png 6.4473ms
2025-05-15 10:10:04.260 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 246.8309ms
